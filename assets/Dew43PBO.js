import{_ as F}from"./-HTJ0knp.js";import{d as O,H,N as K,I as P,r as g,Y as Q,Z as Y,j as Z,o as q,$ as b,t as u,z as a,A as o,O as S,L as n,Q as B,v as c,a0 as G,B as y,y as I,R as J,S as W,P as w,x as v,a1 as X,n as ee,_ as te}from"./BnXPl0OR.js";import{V as ae,a as D}from"./CKWs_XQo.js";import{V as se,a as oe}from"./De-63k_A.js";import{V as ne}from"./RRlyB7SZ.js";import{V as re,a as ie}from"./Bg3YD54J.js";import{V as le}from"./CovGMz4Y.js";import{V as de}from"./DWl1dh9t.js";import{V as ue,R as ce}from"./D3czswpu.js";import{a as M,f as me}from"./DTLGNzJy.js";import{V as pe}from"./rc5dQa0a.js";import"./Cf5AFVmD.js";import"./DUlq3Ltg.js";import"./DDEw1AZ_.js";import"./DWqbtqDh.js";import"./WCBebhKv.js";import"./B56zCIIa.js";import"./B_q9z1a9.js";const fe=["id"],ge={key:0,class:"message-time"},ve={key:0,class:"typing-indicator received"},_e={class:"input-wrapper"},Ve=O({__name:"[chatId]",setup(he){const m=H(),R=K(),U=P(),f=g(!1),V=g(!1),N=g(),z=Q(),j=Y(),A=Number(z.params.chatId),h=g(!1),r=U.chats.find(l=>l.id===A);r||j.push("/matches");const d=Z(()=>{var i;const l=(i=m.user)==null?void 0:i.id,e=r==null?void 0:r.participants.find(t=>t!==l);return R.users.find(t=>t.id===e)}),p=g("");let _;function L(l){const e=new Date(l),i={day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"};return e.toLocaleString("pt-BR",i)}function k(){var e;if(!p.value.trim()||!r)return;const l={id:Date.now(),chatId:r.id,sender:((e=m==null?void 0:m.user)==null?void 0:e.id)||0,text:p.value.trim(),timestamp:new Date().toISOString()};r.messages.push(l),p.value="",setTimeout(()=>{h.value=!0,setTimeout(()=>{h.value=!1,setTimeout(()=>{var s;const i=["Sim, concordo!","Beleza, bora f1 então!","Claro, bora!","Com certeza meu mano","vambora cpx!","Vamos lá!"],t={id:Date.now()+1,chatId:r.id,sender:((s=d.value)==null?void 0:s.id)||0,text:i[Math.floor(Math.random()*i.length)],timestamp:new Date().toISOString()};r.messages.push(t)},1e3),x()},3e3)},1e3),x()}function x(){b(()=>{_&&_.scrollTo(0,_.scrollHeight)})}function $(){d.value&&(N.value=d.value.id,f.value=!0)}function E(){ee("/messages")}return q(()=>{b(()=>{_=document.getElementById("message_container"),x()})}),(l,e)=>{const i=F;return c(),u(B,null,[a(se,{dark:"",app:"",flat:"",style:{background:"transparent",backdropFilter:"blur(15px)"}},{default:o(()=>[a(de,{icon:"",size:"large",onClick:E},{default:o(()=>[a(ue,null,{default:o(()=>e[4]||(e[4]=[y("mdi-arrow-left")])),_:1})]),_:1}),G((c(),u("div",{onClick:$,class:"d-flex w-100 h-100 align-center cursor-pointer rounde-pill"},[a(ie,{size:"40",class:"ml-0 mr-3"},{default:o(()=>{var t,s;return[a(ae,{contain:"",src:((t=n(d))==null?void 0:t.profileImage)||"",alt:(s=n(d))==null?void 0:s.name},null,8,["src","alt"])]}),_:1}),a(oe,{class:"font-weight-light"},{default:o(()=>{var t;return[y(I(((t=n(d))==null?void 0:t.name)||"Chat"),1)]}),_:1})])),[[ce,!0]])]),_:1}),a(ne,{modelValue:n(f),"onUpdate:modelValue":e[1]||(e[1]=t=>S(f)?f.value=t:null),transition:"dialog-bottom-transition","content-class":"bg-surface d-flex justify-center align-center",class:"d-flex justify-center align-center",fullscreen:""},{default:o(()=>[a(M,{cols:"12",sm:"7",md:"6",lg:"4",xl:"3",class:"d-flex justify-center align-center ma-0 pa-0"},{default:o(()=>[a(i,{matchedUser:n(d),onClose:e[0]||(e[0]=t=>f.value=!1)},null,8,["matchedUser"])]),_:1})]),_:1},8,["modelValue"]),a(re,{fluid:"",class:"overflow-y-auto d-flex align-center flex-column pa-0 message-container"},{default:o(()=>[a(M,{cols:"12",lg:"6",md:"8",sm:"10",class:"d-flex justify-center"},{default:o(()=>[a(pe,{class:"pa-0 bg-transparent w-100","two-line":""},{default:o(()=>{var t;return[(c(!0),u(B,null,J(((t=n(r))==null?void 0:t.messages)||[],s=>{var C,T;return c(),u("div",{key:s.id,id:`${s.id}`,class:W([{sent:s.sender===((C=n(m).user)==null?void 0:C.id),received:s.sender!==((T=n(m).user)==null?void 0:T.id)},"message-item"])},[s.text?(c(),u("div",{key:0,class:"message-text",onClick:e[2]||(e[2]=xe=>V.value=!n(V))},[y(I(s.text)+" ",1),a(D,null,{default:o(()=>[n(V)?(c(),u("div",ge,I(L(s.timestamp)),1)):w("",!0)]),_:2},1024)])):w("",!0)],10,fe)}),128)),a(D,null,{default:o(()=>[n(h)?(c(),u("div",ve,e[5]||(e[5]=[v("div",{class:"dots"},[v("span"),v("span"),v("span")],-1)]))):w("",!0)]),_:1})]}),_:1})]),_:1})]),_:1}),a(le,{app:"",class:"glass-effect",height:"auto"},{default:o(()=>[v("div",_e,[a(me,{modelValue:n(p),"onUpdate:modelValue":e[3]||(e[3]=t=>S(p)?p.value=t:null),placeholder:"Digite sua mensagem...",variant:"solo-filled",density:"comfortable",rounded:"xl",class:"container-input",height:"30","hide-details":"",color:"purple-darken-3",onKeyup:X(k,["enter"]),"append-inner-icon":"mdi-send","onClick:appendInner":k},null,8,["modelValue"])])]),_:1})],64)}}}),$e=te(Ve,[["__scopeId","data-v-b83a120e"]]);export{$e as default};

import{_ as L}from"./BloS3qxZ.js";import{d as R,H as E,M as $,I as j,r as c,X as F,Y as H,j as K,o as O,Z as y,t as p,z as a,A as s,O as B,v as f,x as V,B as v,y as h,P,L as x,R as X,N as Y,$ as Z,_ as q}from"./BOOojg4o.js";import{V as G,a as J}from"./CVVM7VxE.js";import{V as Q,a as W}from"./B4pJHMdU.js";import{V as ee}from"./Dw1gs2c0.js";import{V as te,a as ae}from"./1aX6fCYC.js";import{V as se}from"./WtSKltkh.js";import{V as oe}from"./BQyewkaD.js";import{V as ne}from"./Cb38mTqh.js";import{a as re}from"./jdpkZYXZ.js";import{V as ie}from"./DAUEoSVK.js";import{d as le}from"./DPB67a2P.js";import"./Co0LjnBq.js";import"./CjbmMR3S.js";import"./6k-o3RJf.js";import"./Bedbo2yx.js";import"./BaoDn_82.js";import"./B5aWGhha.js";import"./BLeyLL70.js";const de={class:"message-text"},ue={key:0,class:"message-time"},me={class:"input-wrapper"},ce=R({__name:"[chatId]",setup(pe){const i=E(),T=$(),S=j(),g=c(!1),_=c(!1),b=c(),D=F(),I=H(),N=Number(D.params.chatId),o=S.chats.find(n=>n.id===N);o||I.push("/matches");const d=K(()=>{var l;const n=(l=i.user)==null?void 0:l.id,t=o==null?void 0:o.participants.find(e=>e!==n);return T.users.find(e=>e.id===t)}),u=c("");let m;function M(n){const t=new Date(n),l={day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"};return t.toLocaleString("pt-BR",l)}function w(){var t;if(!u.value.trim()||!o)return;const n={id:Date.now(),chatId:o.id,sender:((t=i==null?void 0:i.user)==null?void 0:t.id)||0,text:u.value.trim(),timestamp:new Date().toISOString()};o.messages.push(n),u.value="",U()}function U(){y(()=>{m&&m.scrollTo(0,m.scrollHeight)})}function z(){d.value&&(b.value=d.value.id,_.value=!0)}function A(){I.back()}return O(()=>{y(()=>{m=document.getElementById("message_container")})}),(n,t)=>{const l=L;return f(),p(B,null,[a(Q,{dark:"",app:"",flat:""},{default:s(()=>[a(oe,{icon:"",size:"large",onClick:A},{default:s(()=>[a(ne,null,{default:s(()=>t[3]||(t[3]=[v("mdi-arrow-left")])),_:1})]),_:1}),V("div",{onClick:z,ripple:!0,class:"d-flex w-100 align-center cursor-pointer"},[a(ae,{size:"40",class:"ml-0 mr-3"},{default:s(()=>{var e,r;return[a(G,{contain:"",src:((e=d.value)==null?void 0:e.profileImage)||"",alt:(r=d.value)==null?void 0:r.name},null,8,["src","alt"])]}),_:1}),a(W,{class:"font-weight-light"},{default:s(()=>{var e;return[v(h(((e=d.value)==null?void 0:e.name)||"Chat"),1)]}),_:1})])]),_:1}),a(ee,{modelValue:_.value,"onUpdate:modelValue":t[0]||(t[0]=e=>_.value=e),"max-width":"600px",transition:"dialog-transition"},{default:s(()=>[a(l)]),_:1},8,["modelValue"]),a(te,{fluid:"",class:"overflow-y-auto h-100 d-flex flex-column align-center pa-0 message-container",id:"message_container"},{default:s(()=>[a(re,{cols:"12",lg:"6",md:"8",class:"d-flex justify-center pb-0"},{default:s(()=>[a(ie,{class:"pa-0 bg-transparent w-100","two-line":""},{default:s(()=>{var e;return[(f(!0),p(B,null,P(((e=x(o))==null?void 0:e.messages)||[],r=>{var k,C;return f(),p("div",{key:r.id,onClick:t[1]||(t[1]=fe=>g.value=!g.value),class:X([{sent:r.sender===((k=x(i).user)==null?void 0:k.id),received:r.sender!==((C=x(i).user)==null?void 0:C.id)},"message-item"])},[V("div",de,[v(h(r.text)+" ",1),a(J,null,{default:s(()=>[g.value?(f(),p("div",ue,h(M(r.timestamp)),1)):Y("",!0)]),_:2},1024)])],2)}),128))]}),_:1})]),_:1})]),_:1}),a(se,{app:"",height:"auto"},{default:s(()=>[V("div",me,[a(le,{modelValue:u.value,"onUpdate:modelValue":t[2]||(t[2]=e=>u.value=e),placeholder:"Digite sua mensagem...",variant:"solo-filled",density:"comfortable",rounded:"xl",class:"container-input",height:"30","hide-details":"",color:"purple-darken-3",onKeyup:Z(w,["enter"]),"append-inner-icon":"mdi-send","onClick:appendInner":w},null,8,["modelValue"])])]),_:1})],64)}}}),ze=q(ce,[["__scopeId","data-v-cb541b93"]]);export{ze as default};

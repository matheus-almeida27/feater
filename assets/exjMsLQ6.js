import{d as G,u as ee,a as le,c as w,o as i,b as e,w as t,V as B,T as _e,e as p,f as he,g as L,h as d,t as F,i as R,n as ye,_ as K,j as xe,k as re,l as be,r as V,m as P,p as E,q as W,s as T,F as q,v as Y,x as O,y as Ve}from"./3IrZD_pa.js";import{V as te,a as ae}from"./CH7B2uz2.js";import{V as $,a as D,b as ke,c as Ce,d as we}from"./_zjfe_JH.js";import{V as Z,a as ie,b as je}from"./4ZpjlLR7.js";import{V as Se}from"./CUDmOMGI.js";import{V as oe,_ as Ie}from"./CZ6O-Z0i.js";import{g as Me}from"./C_jzxlMg.js";import{V as J}from"./BuN1Z4Vo.js";import"./DOsxrUzH.js";import"./BSdXjkqF.js";import"./B931MWyl.js";import"./NUaZe0XA.js";import"./QVnX6Ndp.js";import"./B6DE5s67.js";const $e={class:"match-dialog"},Re=G({__name:"MatchDialogContent",props:{matchInfo:{type:Object,default:()=>null}},emits:["close"],setup(_,{emit:h}){var I,y,s;const v=ee(),r=le(),k=_,U=((I=v.user)==null?void 0:I.profileImage)||"",j=h,S=((s=(y=k.matchInfo)==null?void 0:y.name)==null?void 0:s.split(" ")[0])+" também curtiu você!";function c(){const n=r.chats.find(o=>{var m;return o.participants.includes(Number(k.matchInfo.id))&&o.participants.includes(Number((m=v==null?void 0:v.user)==null?void 0:m.id))});j("close"),ye(`/messages/${n==null?void 0:n.id}`)}return(n,o)=>(i(),w("div",$e,[e(te,{"fill-height":""},{default:t(()=>[e(B,{variant:"text",rounded:"xl",class:"position-absolute top-0 right-0 mr-3 mt-3",icon:"mdi-close",onClick:o[0]||(o[0]=m=>n.$emit("close"))}),e($,{align:"center",justify:"center"},{default:t(()=>[e(D,{cols:"12",class:"text-center"},{default:t(()=>[e(_e,{name:"fade"},{default:t(()=>o[1]||(o[1]=[p("div",{class:"match-header"},[p("h2",null,"É um feat!")],-1)])),_:1})]),_:1})]),_:1}),e($,{align:"center",justify:"center"},{default:t(()=>[e(D,{cols:"12",md:"6",class:"d-flex justify-center"},{default:t(()=>[e(he,{name:"slide-fade",mode:"out-in",tag:"div",class:"avatars"},{default:t(()=>[(i(),L(ae,{size:"150",class:"mx-2",key:"userPhoto"},{default:t(()=>[e(Z,{contain:"",transition:"slide-x-transition",height:"150",width:"150",src:d(U),alt:"Sua foto"},null,8,["src"])]),_:1})),(i(),L(ae,{size:"150",class:"mx-2",key:"matchPhoto"},{default:t(()=>{var m;return[e(Z,{contain:"",transition:"slide-x-reverse-transition",height:"150",width:"150",src:(m=_.matchInfo)==null?void 0:m.profileImage,alt:"Foto do match"},null,8,["src"])]}),_:1}))]),_:1})]),_:1})]),_:1}),e($,{align:"center",justify:"center"},{default:t(()=>[e(D,{cols:"12",class:"text-center"},{default:t(()=>[p("p",{class:"collaboration-text"},F(S)),o[2]||(o[2]=p("p",{class:"collaboration-text"},"Que tal criar uma música juntos?",-1))]),_:1})]),_:1}),e($,{align:"center",justify:"center"},{default:t(()=>[e(D,{cols:"12",class:"text-center"},{default:t(()=>[e(B,{class:"ma-4 border",style:{color:"#fff",background:"#170015"},variant:"elevated",rounded:"xl",size:"x-large",onClick:c},{default:t(()=>o[3]||(o[3]=[R(" Enviar Mensagem ")])),_:1})]),_:1})]),_:1})]),_:1})]))}}),Le=K(Re,[["__scopeId","data-v-d73bf81b"]]),se=xe("filters",{state:()=>({nearbyUsers:!0,genres:[],roles:[]}),actions:{}}),Ue=G({__name:"FiltersDialogContent",emits:["close"],setup(_,{emit:h}){const v=h,r=se(),k=re(),U=be(),j=V(r.nearbyUsers),S=V(r.genres),c=V(r.roles),I=()=>{r.nearbyUsers=j.value,r.genres=S.value,r.roles=c.value,v("close"),U.alertSnackbar("Filtros aplicados!")};return(y,s)=>(i(),L(D,{cols:"12",md:"8",lg:"6",xl:"4",class:"d-flex ma-0 pa-0 justify-center align-center"},{default:t(()=>[e(ke,{class:"w-100 rounded-xl"},{default:t(()=>[e(Ce,{class:"pt-3 pl-5 font-weight-light text-h5 mb-2 d-flex align-center"},{default:t(()=>[s[5]||(s[5]=p("span",{class:"text-truncate"}," Filtros ",-1)),e(Se),e(B,{onClick:s[0]||(s[0]=n=>v("close")),icon:"",rounded:"xl",size:"small",variant:"elevated",color:""},{default:t(()=>[e(P,{size:"30",class:""},{default:t(()=>s[4]||(s[4]=[R(" mdi-close ")])),_:1})]),_:1})]),_:1}),e(we,{class:"pb-1 px-0 d-flex flex-column justify-center align-center"},{default:t(()=>[e($,{"no-gutters":"",class:"justify-center align-center mb-2"},{default:t(()=>s[6]||(s[6]=[p("div",{class:"d-flex w-100 align-center justify-center pa-3 mx-8 nearby_warn"},[p("span",{class:"text-center font-weight-light"}," Por padrão, nós mostramos primeiro os usuários mais próximos em relação à você")],-1)])),_:1}),e($,{"no-gutters":"",class:"w-100 justify-center align-center mb-6 px-6"},{default:t(()=>{var n;return[e(oe,{modelValue:d(c),"onUpdate:modelValue":s[1]||(s[1]=o=>E(c)?c.value=o:null),items:(n=d(k))==null?void 0:n.roles,label:"Ramos Artísticos",multiple:"",rounded:"xl","hide-details":"","return-object":"",clearable:"","item-title":"name",variant:"solo",chips:"",outlined:"",dense:""},null,8,["modelValue","items"])]}),_:1}),e($,{"no-gutters":"",class:"w-100 justify-center align-center mb-6 px-6"},{default:t(()=>{var n;return[e(oe,{modelValue:d(S),"onUpdate:modelValue":s[2]||(s[2]=o=>E(S)?S.value=o:null),items:(n=d(k))==null?void 0:n.genres,label:"Gêneros Musicais",multiple:"",rounded:"xl","hide-details":"",clearable:"","return-object":"","item-title":"name",variant:"solo",chips:"",outlined:"",dense:""},null,8,["modelValue","items"])]}),_:1}),e($,{"no-gutters":"",class:"w-100 justify-center align-center mb-4 px-6"},{default:t(()=>[e(B,{onClick:s[3]||(s[3]=n=>I()),block:"",rounded:"xl",variant:"elevated",color:"purple-darken-1"},{default:t(()=>s[7]||(s[7]=[R(" Aplicar ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}}),De=K(Ue,[["__scopeId","data-v-8cd3623a"]]),Fe={class:"inner-card"},Te={class:"card-content"},Be={class:"card-name"},Ee={class:"card-address font-weight-regular"},Ge={class:"card-address text-purple-accent-2 font-weight-light mt-1 mb-2"},Xe={class:"card-genres"},ze={class:"card-genres"},Ae=G({__name:"InnerCardStack",props:{card:{type:Object,required:!0},showBio:{type:Boolean,default:!1}},setup(_){const h=se(),v=_,r=ee().user,k=W(()=>v.card.favoriteRoles||[]),U=W(()=>v.card.favoriteGenres||[]),j=s=>r==null?void 0:r.favoriteRoles.some(n=>n.id==s.id),S=s=>r==null?void 0:r.favoriteGenres.some(n=>n.id==s.id),c=s=>h==null?void 0:h.roles.some(n=>n.id==s.id),I=s=>h==null?void 0:h.genres.some(n=>n.id==s.id),y=Me(v.card);return(s,n)=>(i(),w("div",Fe,[p("div",Te,[_.card.profileImage?(i(),L(Z,{key:0,draggable:"false",src:_.card.profileImage,cover:"",alt:"Imagem",class:"card-img"},null,8,["src"])):T("",!0),p("p",Be,F(_.card.name),1),p("p",Ee,F(_.card.location.address),1),p("p",Ge,[e(P,{size:"20",class:"mr-1 mt-n1"},{default:t(()=>n[0]||(n[0]=[R(" mdi-airplane ")])),_:1}),R(F(d(y)),1)]),p("div",Xe,[(i(!0),w(q,null,Y(d(k),(o,m)=>(i(),w("span",{key:m,class:O(["genre-tag border mb-2 ",{"is-favorite":j(o),"in-filter":c(o)}])},F(o.name),3))),128))]),p("div",ze,[(i(!0),w(q,null,Y(d(U),(o,m)=>(i(),w("span",{key:m,class:O(["genre-tag border mb-2 ",{"is-favorite":S(o),"in-filter":I(o)}])},F(o.name),3))),128))])]),e(ie,null,{default:t(()=>[_.showBio?T("",!0):(i(),L($,{key:0,"no-gutters":"",class:"justify-center"},{default:t(()=>[e(P,{class:"mt-1",size:"25"},{default:t(()=>n[1]||(n[1]=[R("mdi-chevron-up")])),_:1})]),_:1}))]),_:1})]))}}),Ne=K(Ae,[["__scopeId","data-v-889810ba"]]),Pe={class:"card-stack w-100"},qe={key:0,class:"text-center justify-center align-center d-flex"},Oe=["onMousedown","onTouchstart"],Ke={key:0,class:"d-flex w-100 justify-center align-center"},Qe=G({__name:"SwiperStack",emits:["swipe"],setup(_,{emit:h}){const{smAndUp:v}=Ve(),r=re(),k=ee(),U=le(),j=se(),S=V(r.users),c=V(!1);V(!1);const I=W(()=>{const l=k.user;if(!l)return[];const{latitude:a,longitude:C}=l.location;return S.value.filter(g=>g.id!==l.id).map(g=>{const M=de(a,C,g.location.latitude,g.location.longitude),u=j.genres.length?g.favoriteGenres.filter(b=>j.genres.some(H=>H.id===b.id)).length:0,f=j.roles.length?g.favoriteRoles.filter(b=>j.roles.some(H=>H.id===b.id)).length:0;return{...g,distance:M,commonGenresCount:u,commonRolesCount:f}}).sort((g,M)=>{const u=g.commonGenresCount+g.commonRolesCount,f=M.commonGenresCount+M.commonRolesCount;return u>0!=f>0?f>0?1:-1:u!==f?f-u:g.distance-M.distance})}),y=V([...I.value]),s=V(!1),n=V(!1);let o=0,m=0,X=!1,x=V();const Q=V(),ce=V(),ue=()=>{c.value=!c.value};function ne(l,a){a===0&&(x.value=document.querySelector("#innerCardRef"),X=!0,o=l.type.includes("touch")?l.touches[0].clientX:l.clientX,m=o,document.addEventListener("mousemove",z),document.addEventListener("touchmove",z),document.addEventListener("mouseup",A),document.addEventListener("touchend",A))}function z(l){if(!X)return;m=l.type.includes("touch")?l.touches[0].clientX:l.clientX;const a=m-o;x.value.style.transform=`translateX(${a}px) rotate(${a/10}deg)`,x.value.style.opacity=1-Math.abs(a)/300}function A(){if(!X)return;X=!1;const l=m-o;if(Math.abs(l)>20&&m!=o)if(Math.abs(l)>100){const a=l>0?"R":"L";c.value=!1;const C=y.value[0];ce.value={direction:a,card:C},a=="R"?k.addLikedUser(C.id):k.rmvLikedUser(C.id),x.value.style.transition="transform 0.3s, opacity 0.3s",x.value.style.transform=`translateX(${l>0?500:-500}px)`,x.value.style.opacity=0,setTimeout(()=>{y.value.shift(),c.value=!1,a=="R"&&fe(C)},200)}else x.value.style.transition="transform 0.3s, opacity 0.3s",x.value.style.transform="translateX(0)",x.value.style.opacity=1;else x.value.style.transition="transform 0.3s, opacity 0.3s",x.value.style.transform="translateX(0)",x.value.style.opacity=1;document.removeEventListener("mousemove",z),document.removeEventListener("touchmove",z),document.removeEventListener("mouseup",A),document.removeEventListener("touchend",A)}function de(l,a,C,N){const M=(C-l)*Math.PI/180,u=(N-a)*Math.PI/180,f=Math.sin(M/2)*Math.sin(M/2)+Math.cos(l*Math.PI/180)*Math.cos(C*Math.PI/180)*Math.sin(u/2)*Math.sin(u/2);return 6371*(2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f)))}function me(){y.value=I.value}const fe=l=>{Q.value=l,U.createChat(l),s.value=!0},pe=()=>{n.value=!0},ve=()=>{y.value=I.value,n.value=!1},ge=()=>{s.value=!1,Q.value=null};return(l,a)=>{const C=Le,N=De,g=Ne,M=Ie;return i(),w(q,null,[e(B,{onClick:pe,variant:"text",class:"filters-btn",icon:""},{default:t(()=>[e(P,{color:"#fff"},{default:t(()=>a[6]||(a[6]=[R("mdi-tune-variant")])),_:1})]),_:1}),p("div",Pe,[e(J,{modelValue:d(s),"onUpdate:modelValue":a[0]||(a[0]=u=>E(s)?s.value=u:null),fullscreen:"",persistent:""},{default:t(()=>[d(s)?(i(),L(C,{key:0,"match-info":d(Q),onClose:ge},null,8,["match-info"])):T("",!0)]),_:1},8,["modelValue"]),e(J,{modelValue:d(n),"onUpdate:modelValue":a[1]||(a[1]=u=>E(n)?n.value=u:null),persistent:"","content-class":"d-flex justify-center align-center"},{default:t(()=>[e(N,{onClose:ve})]),_:1},8,["modelValue"]),e(je,{"hide-on-leave":""},{default:t(()=>[d(y).length?T("",!0):(i(),w("div",qe,[e(B,{class:"ma-2",size:"120",variant:"tonal",icon:"",color:"purple-darken-4",onClick:a[2]||(a[2]=u=>me())},{default:t(()=>a[7]||(a[7]=[R("Resetar "),p("br",null,null,-1),R("Stack")])),_:1})]))]),_:1}),(i(!0),w(q,null,Y(d(y),(u,f)=>(i(),w("div",{class:O(["card",{"card-active":f===0}]),key:u.id,onMousedown:b=>ne(b,f),onTouchstart:b=>ne(b,f)},[e(ie,null,{default:t(()=>[f===0?(i(),w("div",Ke,[e(g,{id:"innerCardRef",onClick:a[3]||(a[3]=b=>ue()),card:u,"show-bio":d(c)},null,8,["card","show-bio"]),e(J,{modelValue:d(c),"onUpdate:modelValue":a[5]||(a[5]=b=>E(c)?c.value=b:null),transition:"dialog-bottom-transition","content-class":"bg-surface fill-height justify-center align-center",class:"justify-center align-center",fullscreen:""},{default:t(()=>[f===0?(i(),L(te,{key:0,fluid:"",class:O(["d-flex align-center flex-column pa-0 fill-height overflow-y-scroll",{"justify-center":d(v)}])},{default:t(()=>[e(D,{cols:"12",sm:"8",md:"8",lg:"5",xl:"4",class:"d-flex align-center px-1 pt-0 justify-center flex-column"},{default:t(()=>[e(M,{matchedUser:u,onClose:a[4]||(a[4]=b=>c.value=!1)},null,8,["matchedUser"])]),_:2},1024)]),_:2},1032,["class"])):T("",!0)]),_:2},1032,["modelValue"])])):T("",!0)]),_:2},1024)],42,Oe))),128))])],64)}}}),He=K(Qe,[["__scopeId","data-v-abbf25fa"]]),ut=G({__name:"home",setup(_){return(h,v)=>{const r=He;return i(),L(te,{fluid:"",class:"fill-height"},{default:t(()=>[e($,{align:"center",justify:"center",class:"fill-height"},{default:t(()=>[e(D,{cols:"12",sm:"8",md:"6",lg:"4",xl:"3",class:"fill-height justify-center align-center d-flex"},{default:t(()=>[e(r)]),_:1})]),_:1})]),_:1})}}});export{ut as default};

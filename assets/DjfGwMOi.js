import{d as D,H as N,M as A,I as U,aR as K,aS as M,j as R,r as j,t as x,z as a,A as s,O as k,v as d,B as m,y as p,P as F,L as c,K as w,$ as O,N as E,aT as H,_ as P}from"./D4JXF2sJ.js";import{V as $,a as q}from"./CHTZnsN6.js";import{V as G,a as S}from"./D8JAzSM3.js";import{V as J}from"./kzRvWBmu.js";import{V as Q}from"./Y2KT9Go2.js";import{V as C}from"./CnxHxsUS.js";import{V as W}from"./qDZEqo13.js";import{V as X,a as Y,b as Z,c as ee}from"./B3IVK8K3.js";import{V as te}from"./C_KIPhRg.js";import"./CMGEaCVa.js";import"./BTpQzyxz.js";import"./CzLmbUJS.js";import"./DWts9D4v.js";import"./DdH46LJX.js";const ae=D({__name:"[chatId]",setup(se){const i=N(),b=A(),y=U(),T=K(),f=M(),B=Number(T.params.chatId),o=y.chats.find(n=>n.id===B);o||f.push("/matches");const l=R(()=>{var e;const n=(e=i.user)==null?void 0:e.id,r=o==null?void 0:o.participants.find(t=>t!==n);return b.users.find(t=>t.id===r)}),u=j("");function L(n){return new Date(n).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}function V(){var r;if(!u.value.trim()||!o)return;const n={id:Date.now(),chatId:o.id,sender:((r=i==null?void 0:i.user)==null?void 0:r.id)||0,text:u.value.trim(),timestamp:new Date().toISOString()};o.messages.push(n),u.value=""}function z(){f.back()}return(n,r)=>(d(),x(k,null,[a($,{dark:"",app:"",flat:""},{default:s(()=>[a(J,{icon:"",size:"large",onClick:z},{default:s(()=>[a(Q,null,{default:s(()=>r[1]||(r[1]=[m("mdi-arrow-left")])),_:1})]),_:1}),a(S,{size:"40",class:"ml-3 mr-2"},{default:s(()=>{var e,t;return[a(C,{contain:"",src:((e=l.value)==null?void 0:e.profileImage)||"",alt:(t=l.value)==null?void 0:t.name},null,8,["src","alt"])]}),_:1}),a(q,{class:"font-weight-light"},{default:s(()=>{var e;return[m(p(((e=l.value)==null?void 0:e.name)||"Chat"),1)]}),_:1})]),_:1}),a(G,{fluid:"",class:"overflow-y-auto h-100 d-flex flex-column align-center pa-0"},{default:s(()=>[a(W,{cols:"12",lg:"6",md:"8",sm:"10",class:"d-flex justify-center"},{default:s(()=>[a(X,{class:"pa-0 bg-transparent w-100","two-line":""},{default:s(()=>{var e;return[(d(!0),x(k,null,F(((e=c(o))==null?void 0:e.messages)||[],t=>{var _,g;return d(),w(Y,{key:t.id,class:O([{sent:t.sender===((_=c(i).user)==null?void 0:_.id),received:t.sender!==((g=c(i).user)==null?void 0:g.id)},"message-item"])},{default:s(()=>{var h;return[t.sender!==((h=c(i).user)==null?void 0:h.id)?(d(),w(S,{key:0,size:"30",class:"mr-1"},{default:s(()=>{var I,v;return[a(C,{contain:"",src:((I=l.value)==null?void 0:I.profileImage)||"",alt:(v=l.value)==null?void 0:v.name},null,8,["src","alt"])]}),_:1})):E("",!0),a(Z,{class:"message-text"},{default:s(()=>[m(p(t.text),1)]),_:2},1024),a(ee,{class:"message-time"},{default:s(()=>[m(p(L(t.timestamp)),1)]),_:2},1024)]}),_:2},1032,["class"])}),128))]}),_:1}),a(te,{modelValue:u.value,"onUpdate:modelValue":r[0]||(r[0]=e=>u.value=e),placeholder:"Digite sua mensagem...",variant:"solo-filled",density:"comfortable",rounded:"xl",class:"container-input",height:"30","hide-details":"",color:"purple-darken-3",onKeyup:H(V,["enter"]),"append-inner-icon":"mdi-send","onClick:appendInner":V},null,8,["modelValue"])]),_:1})]),_:1})],64))}}),he=P(ae,[["__scopeId","data-v-5b0b764f"]]);export{he as default};

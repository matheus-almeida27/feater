import{d as q,H as ae,I as ve,t as M,v,z as e,A as s,T as ke,x as b,J as Ce,K as B,L as x,y as A,B as P,n as xe,_ as ne,M as be,N as we,O as Se,P as re,r as w,Q as Ie,j as ee,R as Me,S as $e,U as ie,V as W,W as oe,X as Q,Y as U,Z as ge,$ as pe}from"./cUe4mTCf.js";import{V as he,a as ce}from"./C9RQEfCV.js";import{V as z,u as Le,L as je,a as Be}from"./THLEgpz9.js";import{V as j,a as T,u as De,b as ue,m as Pe,c as Fe,d as Ge,e as Re}from"./DfN7agZ3.js";import{V as te,a as Te,b as _e,c as de}from"./BAfAneul.js";import{V as Ue}from"./Clp16afx.js";import{V as H}from"./DZuc5hJg.js";import{V as me,m as ze,a as Ee,b as Ne}from"./Cc-TrS38.js";import{u as Xe}from"./TPuJQ0JC.js";import{V as fe}from"./CbSqqrhY.js";import"./B8sux8k-.js";import"./BaYPCYCK.js";import"./CIogKmCZ.js";import"./BVnzG4XD.js";const Ae={class:"match-dialog"},qe=q({__name:"MatchDialogContent",props:{matchInfo:{type:Object,default:()=>null}},emits:["close"],setup(t,{emit:I}){var l,m,k;const r=ae(),o=ve(),f=t;o.chats.find(p=>{var i;return p.participants.includes(Number(f.matchInfo.id))&&p.participants.includes(Number((i=r==null?void 0:r.user)==null?void 0:i.id))});const u=((l=r.user)==null?void 0:l.profileImage)||"",g=I,_=((k=(m=f.matchInfo)==null?void 0:m.name)==null?void 0:k.split(" ")[0])+" tambÃ©m curtiu vocÃª!";function S(){const p=o.chats.find(i=>{var C;return i.participants.includes(Number(f.matchInfo.id))&&i.participants.includes(Number((C=r==null?void 0:r.user)==null?void 0:C.id))});g("close"),xe(`/messages/${p==null?void 0:p.id}`)}return(p,i)=>(v(),M("div",Ae,[e(he,{"fill-height":""},{default:s(()=>[e(z,{variant:"text",rounded:"xl",class:"position-absolute top-0 right-0 mr-3 mt-3",icon:"mdi-close",onClick:i[0]||(i[0]=C=>p.$emit("close"))}),e(j,{align:"center",justify:"center"},{default:s(()=>[e(T,{cols:"12",class:"text-center"},{default:s(()=>[e(ke,{name:"fade"},{default:s(()=>i[1]||(i[1]=[b("div",{class:"match-header"},[b("h2",null,"Ã‰ um feat!")],-1)])),_:1})]),_:1})]),_:1}),e(j,{align:"center",justify:"center"},{default:s(()=>[e(T,{cols:"12",md:"6",class:"d-flex justify-center"},{default:s(()=>[e(Ce,{name:"slide-fade",mode:"out-in",tag:"div",class:"avatars"},{default:s(()=>[(v(),B(ce,{size:"150",class:"mx-2",key:"userPhoto"},{default:s(()=>[e(te,{contain:"",transition:"slide-x-transition",height:"150",width:"150",src:x(u),alt:"Sua foto"},null,8,["src"])]),_:1})),(v(),B(ce,{size:"150",class:"mx-2",key:"matchPhoto"},{default:s(()=>{var C;return[e(te,{contain:"",transition:"slide-x-reverse-transition",height:"150",width:"150",src:(C=t.matchInfo)==null?void 0:C.profileImage,alt:"Foto do match"},null,8,["src"])]}),_:1}))]),_:1})]),_:1})]),_:1}),e(j,{align:"center",justify:"center"},{default:s(()=>[e(T,{cols:"12",class:"text-center"},{default:s(()=>[b("p",{class:"collaboration-text"},A(_)),i[2]||(i[2]=b("p",{class:"collaboration-text"},"Que tal criar uma mÃºsica juntos?",-1))]),_:1})]),_:1}),e(j,{align:"center",justify:"center"},{default:s(()=>[e(T,{cols:"12",class:"text-center"},{default:s(()=>[e(z,{class:"ma-4 border",style:{color:"#fff",background:"#170015"},variant:"elevated",rounded:"xl",size:"x-large",onClick:S},{default:s(()=>i[3]||(i[3]=[P(" Enviar Mensagem ")])),_:1})]),_:1})]),_:1})]),_:1})]))}}),Oe=ne(qe,[["__scopeId","data-v-9303c494"]]),se=be("filters",{state:()=>({nearbyUsers:!0,genres:[]}),actions:{}}),We=Se({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...Pe(),...ze()},"VSwitch"),Qe=we()({name:"VSwitch",inheritAttrs:!1,props:We(),emits:{"update:focused":t=>!0,"update:modelValue":t=>!0,"update:indeterminate":t=>!0},setup(t,I){let{attrs:r,slots:o}=I;const f=re(t,"indeterminate"),u=re(t,"modelValue"),{loaderClasses:g}=Le(t),{isFocused:_,focus:S,blur:l}=De(t),m=w(),k=Ie&&window.matchMedia("(forced-colors: active)").matches,p=ee(()=>typeof t.loading=="string"&&t.loading!==""?t.loading:t.color),i=Me(),C=ee(()=>t.id||`switch-${i}`);function y(){f.value&&(f.value=!1)}function E(F){var G,D;F.stopPropagation(),F.preventDefault(),(D=(G=m.value)==null?void 0:G.input)==null||D.click()}return Xe(()=>{const[F,G]=$e(r),D=ue.filterProps(t),R=me.filterProps(t);return e(ue,ie({class:["v-switch",{"v-switch--flat":t.flat},{"v-switch--inset":t.inset},{"v-switch--indeterminate":f.value},g.value,t.class]},F,D,{modelValue:u.value,"onUpdate:modelValue":$=>u.value=$,id:C.value,focused:_.value,style:t.style}),{...o,default:$=>{let{id:J,messagesId:K,isDisabled:Y,isReadonly:Z,isValid:O}=$;const N={model:u,isValid:O};return e(me,ie({ref:m},R,{modelValue:u.value,"onUpdate:modelValue":[a=>u.value=a,y],id:J.value,"aria-describedby":K.value,type:"checkbox","aria-checked":f.value?"mixed":void 0,disabled:Y.value,readonly:Z.value,onFocus:S,onBlur:l},G),{...o,default:a=>{let{backgroundColorClasses:n,backgroundColorStyles:d}=a;return e("div",{class:["v-switch__track",k?void 0:n.value],style:d.value,onClick:E},[o["track-true"]&&e("div",{key:"prepend",class:"v-switch__track-true"},[o["track-true"](N)]),o["track-false"]&&e("div",{key:"append",class:"v-switch__track-false"},[o["track-false"](N)])])},input:a=>{let{inputNode:n,icon:d,backgroundColorClasses:L,backgroundColorStyles:X}=a;return e(W,null,[n,e("div",{class:["v-switch__thumb",{"v-switch__thumb--filled":d||t.loading},t.inset||k?void 0:L.value],style:t.inset?void 0:X.value},[o.thumb?e(Te,{defaults:{VIcon:{icon:d,size:"x-small"}}},{default:()=>[o.thumb({...N,icon:d})]}):e(_e,null,{default:()=>[t.loading?e(je,{name:"v-switch",active:!0,color:O.value===!1?void 0:p.value},{default:h=>o.loader?o.loader(h):e(Be,{active:h.isActive,color:h.color,indeterminate:!0,size:"16",width:"2"},null)}):d&&e(H,{key:String(d),icon:d,size:"x-small"},null)]})])])}})}})}),{}}}),He=q({__name:"FiltersDialogContent",emits:["close"],setup(t,{emit:I}){const r=I,o=w(se().nearbyUsers),f=w([]),u=oe(),g=se(),_=()=>{g.nearbyUsers=o.value,g.genres=f.value,r("close")};return(S,l)=>(v(),B(T,{cols:"12",md:"8",lg:"6",xl:"4",class:"d-flex ma-0 pa-0 justify-center align-center"},{default:s(()=>[e(Fe,{class:"w-100 rounded-xl"},{default:s(()=>[e(Ge,{class:"pt-3 pl-5 font-weight-light text-h5 mb-2 d-flex align-center"},{default:s(()=>[l[5]||(l[5]=b("span",{class:"text-truncate"}," Filtros ",-1)),e(Ue),e(z,{onClick:l[0]||(l[0]=m=>r("close")),icon:"",rounded:"xl",size:"small",variant:"elevated",color:""},{default:s(()=>[e(H,{size:"30",class:""},{default:s(()=>l[4]||(l[4]=[P(" mdi-close ")])),_:1})]),_:1})]),_:1}),e(Re,{class:"pb-1 px-0 d-flex flex-column justify-center align-center"},{default:s(()=>[e(j,{"no-gutters":"",class:"justify-center align-center mb-2"},{default:s(()=>[e(Qe,{modelValue:x(o),"onUpdate:modelValue":l[1]||(l[1]=m=>Q(o)?o.value=m:null),"label-class":x(o)?"text-purple":"text-grey",class:"mb-4","hide-details":"",color:"purple-darken-1",label:"Filtrar por usuÃ¡rios mais prÃ³ximos"},null,8,["modelValue","label-class"])]),_:1}),e(j,{"no-gutters":"",class:"w-100 justify-center align-center mb-6 px-6"},{default:s(()=>{var m;return[e(Ee,{modelValue:x(f),"onUpdate:modelValue":l[2]||(l[2]=k=>Q(f)?f.value=k:null),items:(m=x(u))==null?void 0:m.genres,label:"GÃªneros Musicais",multiple:"",rounded:"xl","hide-details":"","return-object":"","item-title":"name",variant:"solo",chips:"",outlined:"",dense:""},null,8,["modelValue","items"])]}),_:1}),e(j,{"no-gutters":"",class:"w-100 justify-center align-center mb-4 px-6"},{default:s(()=>[e(z,{onClick:l[3]||(l[3]=m=>_()),block:"",rounded:"xl",variant:"elevated",color:"purple-darken-1"},{default:s(()=>l[6]||(l[6]=[P(" Aplicar ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}}),Je={class:"inner-card"},Ke={class:"card-content"},Ye={class:"card-name"},Ze={class:"card-address"},et={class:"card-genres"},tt={key:0,class:"card-bio"},st=q({__name:"InnerCardStack",props:{card:{type:Object,required:!0},showBio:{type:Boolean,default:!1}},setup(t){oe();const I=t,r=ae().user,o=ee(()=>I.card.favoriteGenres||[]),f=u=>(console.log("ðŸš€ ~ isFavoriteGenre ~ user?.favoriteGenres.some((g: any) => g.id === genre.id):",r==null?void 0:r.favoriteGenres.some(g=>g.id===u.id)),(r==null?void 0:r.favoriteGenres.some(g=>g.name.includes(u.name)||u.name.includes(g.name)))||!1);return(u,g)=>(v(),M("div",Je,[b("div",Ke,[t.card.profileImage?(v(),B(te,{key:0,draggable:"false",cover:"",src:t.card.profileImage,alt:"Imagem",class:"card-img"},null,8,["src"])):U("",!0),b("p",Ye,A(t.card.name),1),b("p",Ze,A(t.card.location.address),1),b("div",et,[(v(!0),M(W,null,ge(x(o),(_,S)=>(v(),M("span",{key:S,class:pe(["genre-tag border mb-2 ",{"is-favorite":f(_)}])},A(_.name),3))),128))])]),e(de,null,{default:s(()=>[t.showBio?U("",!0):(v(),B(H,{key:0,size:"20"},{default:s(()=>g[0]||(g[0]=[P("mdi-chevron-down")])),_:1}))]),_:1}),e(de,null,{default:s(()=>[t.showBio?(v(),M("div",tt,[b("p",null,A(t.card.bio),1)])):U("",!0)]),_:1})]))}}),at=ne(st,[["__scopeId","data-v-4f99aa23"]]),nt={class:"card-stack w-100"},ot={key:0,class:"text-center justify-center align-center d-flex"},lt=["onMousedown","onTouchstart"],rt=q({__name:"SwiperStack",emits:["swipe"],setup(t,{emit:I}){const r=oe(),o=ae(),f=ve(),u=se(),g=w(r.users),_=w(!1),S=()=>{const a=o.user;if(!a)return[];const n=a.location.latitude,d=a.location.longitude,L=g.value.filter(c=>c.id!==a.id).map(c=>{const V=J(n,d,c.location.latitude,c.location.longitude),le=u.genres.length>0?c.favoriteGenres.filter(ye=>u.genres.some(Ve=>Ve.id===ye.id)).length:0;return{...c,distance:V,commonGenresCount:le}});return console.log("Cards com distÃ¢ncia calculada:",L),L.filter(c=>u.genres.length>0?c.commonGenresCount>0:!0).sort((c,V)=>u.nearbyUsers?c.distance!==V.distance?c.distance-V.distance:V.commonGenresCount-c.commonGenresCount:u.genres.length>0?V.commonGenresCount-c.commonGenresCount:0)},l=w([...S()]),m=w(!1),k=w(!1);let p=0,i=0,C=!1,y=w();const E=w(),F=w(),G=()=>{_.value=!_.value};function D(a,n){n===0&&(y.value=document.querySelector("#innerCardRef"),C=!0,p=a.type.includes("touch")?a.touches[0].clientX:a.clientX,i=p,document.addEventListener("mousemove",R),document.addEventListener("touchmove",R),document.addEventListener("mouseup",$),document.addEventListener("touchend",$))}function R(a){if(!C)return;i=a.type.includes("touch")?a.touches[0].clientX:a.clientX;const n=i-p;y.value.style.transform=`translateX(${n}px) rotate(${n/10}deg)`,y.value.style.opacity=1-Math.abs(n)/300}function $(){if(!C)return;C=!1;const a=i-p;if(Math.abs(a)>20&&i!=p)if(Math.abs(a)>100){const n=a>0?"R":"L";_.value=!1;const d=l.value[0];F.value={direction:n,card:d},n=="R"?o.addLikedUser(d.id):o.rmvLikedUser(d.id),y.value.style.transition="transform 0.3s, opacity 0.3s",y.value.style.transform=`translateX(${a>0?500:-500}px)`,y.value.style.opacity=0,setTimeout(()=>{l.value.shift(),_.value=!1,n=="R"&&Y(d)},200)}else y.value.style.transition="transform 0.3s, opacity 0.3s",y.value.style.transform="translateX(0)",y.value.style.opacity=1;else y.value.style.transition="transform 0.3s, opacity 0.3s",y.value.style.transform="translateX(0)",y.value.style.opacity=1;document.removeEventListener("mousemove",R),document.removeEventListener("touchmove",R),document.removeEventListener("mouseup",$),document.removeEventListener("touchend",$)}function J(a,n,d,L){const h=(d-a)*Math.PI/180,c=(L-n)*Math.PI/180,V=Math.sin(h/2)*Math.sin(h/2)+Math.cos(a*Math.PI/180)*Math.cos(d*Math.PI/180)*Math.sin(c/2)*Math.sin(c/2);return 6371*(2*Math.atan2(Math.sqrt(V),Math.sqrt(1-V)))}function K(){l.value=S()}const Y=a=>{E.value=a,f.createChat(a),m.value=!0},Z=()=>{k.value=!0},O=()=>{l.value=S(),k.value=!1},N=()=>{m.value=!1,E.value=null};return(a,n)=>{const d=Oe,L=He,X=at;return v(),M(W,null,[e(z,{onClick:Z,variant:"text",class:"filters-btn",icon:""},{default:s(()=>[e(H,{color:"#fff"},{default:s(()=>n[4]||(n[4]=[P("mdi-tune-variant")])),_:1})]),_:1}),b("div",nt,[e(fe,{modelValue:x(m),"onUpdate:modelValue":n[0]||(n[0]=h=>Q(m)?m.value=h:null),fullscreen:"",persistent:""},{default:s(()=>[x(m)?(v(),B(d,{key:0,"match-info":x(E),onClose:N},null,8,["match-info"])):U("",!0)]),_:1},8,["modelValue"]),e(fe,{modelValue:x(k),"onUpdate:modelValue":n[1]||(n[1]=h=>Q(k)?k.value=h:null),persistent:"","content-class":"d-flex justify-center align-center"},{default:s(()=>[e(L,{onClose:O})]),_:1},8,["modelValue"]),e(_e,{"hide-on-leave":""},{default:s(()=>[x(l).length?U("",!0):(v(),M("div",ot,[e(z,{class:"ma-2",size:"120",variant:"tonal",icon:"",color:"purple-darken-4",onClick:n[2]||(n[2]=h=>K())},{default:s(()=>n[5]||(n[5]=[P("Resetar "),b("br",null,null,-1),P("Stack")])),_:1})]))]),_:1}),(v(!0),M(W,null,ge(x(l),(h,c)=>(v(),M("div",{class:pe(["card",{"card-active":c===0}]),key:h.id,onMousedown:V=>D(V,c),onTouchstart:V=>D(V,c)},[e(Ne,null,{default:s(()=>[c===0?(v(),B(X,{key:0,id:"innerCardRef",onClick:n[3]||(n[3]=V=>G()),card:h,"show-bio":x(_)},null,8,["card","show-bio"])):U("",!0)]),_:2},1024)],42,lt))),128))])],64)}}}),it=ne(rt,[["__scopeId","data-v-13ede897"]]),xt=q({__name:"home",setup(t){return(I,r)=>{const o=it;return v(),B(he,{fluid:"",class:"fill-height"},{default:s(()=>[e(j,{align:"center",justify:"center",class:"fill-height"},{default:s(()=>[e(T,{cols:"12",sm:"8",md:"6",lg:"4",xl:"3",class:"fill-height justify-center align-center d-flex"},{default:s(()=>[e(o)]),_:1})]),_:1})]),_:1})}}});export{xt as default};

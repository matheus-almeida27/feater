import{Q as k,R as F,r as f,z as a,d as R,H as P,M as j,j as B,K as T,A as o,v as L,B as h,y,L as s,x as M,a0 as N,Z as w,n as x,_ as z}from"./D4JXF2sJ.js";import{v as D}from"./Co0LjnBq.js";import{V as q}from"./D8JAzSM3.js";import{V as U}from"./BTwDB7GK.js";import{f as A,V as E}from"./qDZEqo13.js";import{V as $,a as H,b as I}from"./CY0E8gRj.js";import{V as _}from"./kzRvWBmu.js";import{u as K,m as Q}from"./CMGEaCVa.js";import{c as Z,m as G,V as S}from"./C_KIPhRg.js";import"./CnxHxsUS.js";import"./Y2KT9Go2.js";import"./DdH46LJX.js";import"./CzLmbUJS.js";const J=F({...Q(),...G()},"VForm"),O=k()({name:"VForm",props:J(),emits:{"update:modelValue":p=>!0,submit:p=>!0},setup(p,V){let{slots:c,emit:n}=V;const r=Z(p),l=f();function v(d){d.preventDefault(),r.reset()}function g(d){const i=d,u=r.validate();i.then=u.then.bind(u),i.catch=u.catch.bind(u),i.finally=u.finally.bind(u),n("submit",i),i.defaultPrevented||u.then(m=>{var e;let{valid:t}=m;t&&((e=l.value)==null||e.submit())}),i.preventDefault()}return K(()=>{var d;return a("form",{ref:l,class:["v-form",p.class],style:p.style,novalidate:!0,onReset:v,onSubmit:g},[(d=c.default)==null?void 0:d.call(c,r)])}),A(r,l)}}),W=R({__name:"login",setup(p){const V=P(),c=j(),n=f("signup"),r=f(""),l=f(""),v=f(!1),g=f(!1),d=f(null),i=B(()=>{if(n.value==="login")return{header:"Login",btn:"Criar Conta"};if(n.value==="signup")return{header:"Criar Conta",btn:"Fazer Login"}}),u=async()=>{try{g.value=!0;const m=c.users;if(n.value==="signup"){if(m.find(b=>b.username===r.value)){alert("Usuário já existe. Escolha outro nome de usuário.");return}let e;do e=Math.floor(1e3+Math.random()*9e3).toString();while(m.some(b=>b.id==e));const C={username:r.value,password:l.value,id:Number(e),likedUsers:[]};V.setUser(C),c.addUser(C),await x("/profile")}else if(n.value==="login"){const t=m.find(e=>e.username==r.value);if(!t){alert("Usuário não encontrado.");return}if(t.password!==l.value){alert("Senha incorreta.");return}if(V.setUser(t),!D(t)){await x("/profile");return}await x("/home")}}catch(m){console.error("login err:",m)}finally{g.value=!1}};return(m,t)=>(L(),T(q,{fluid:"",class:"fill-height login-container"},{default:o(()=>[a(U,{align:"center",justify:"center"},{default:o(()=>[a(E,{cols:"12",sm:"8",md:"6",lg:"4"},{default:o(()=>[a($,{class:"elevation-5 pa-4"},{default:o(()=>[a(H,{class:"text-h4 font-weight-thin text-center"},{default:o(()=>{var e;return[h(y((e=s(i))==null?void 0:e.header),1)]}),_:1}),a(U,{"no-gutters":"",class:"justify-center mb-4 opacity-60"},{default:o(()=>[t[4]||(t[4]=M("span",{class:"d-flex justify-center align-center mr-1"}," ou ",-1)),a(_,{onClick:t[0]||(t[0]=e=>n.value=s(n)==="login"?"signup":"login"),variant:"text",rounded:"xl",size:"small","max-height":"30"},{default:o(()=>{var e;return[h(y((e=s(i))==null?void 0:e.btn),1)]}),_:1})]),_:1}),a(I,null,{default:o(()=>[a(O,{onSubmit:N(u,["prevent"]),ref_key:"form",ref:d},{default:o(()=>[a(S,{variant:"plain",modelValue:s(r),"onUpdate:modelValue":t[1]||(t[1]=e=>w(r)?r.value=e:null),label:"Username",rules:[e=>!!e||"Username é obrigatório"],required:"",class:"mb-4"},null,8,["modelValue","rules"]),a(S,{variant:"plain",modelValue:s(l),"onUpdate:modelValue":t[2]||(t[2]=e=>w(l)?l.value=e:null),label:"Senha","append-icon":s(v)?"mdi-eye":"mdi-eye-off",type:s(v)?"text":"password",rules:[e=>!!e||"Senha é obrigatória"],"onClick:append":t[3]||(t[3]=e=>v.value=!s(v)),required:""},null,8,["modelValue","append-icon","type","rules"]),a(_,{type:"submit",color:"purple-darken-3",block:"",rounded:"xl",large:"",class:"mt-6",loading:s(g)},{default:o(()=>[h(y(s(n)==="login"?"Entrar":"Criar Conta"),1)]),_:1},8,["loading"])]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}}),me=z(W,[["__scopeId","data-v-3534545c"]]);export{me as default};

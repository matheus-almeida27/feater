import{d as q,H as ae,I as ve,t as M,v,z as e,A as s,T as ke,x as b,J as xe,K as j,L as C,y as A,B,n as Ce,_ as ne,M as be,N as we,O as Se,P as re,r as w,Q as Ie,j as ee,R as Me,S as $e,U as ie,V as W,W as oe,X as Q,Y as G,Z as pe,$ as ge}from"./zZ1_VbZv.js";import{V as he,a as ce}from"./B4RNrVu4.js";import{V as z,u as Le,L as je,a as De}from"./D1JSJmyc.js";import{V as L,a as U,u as Be,b as ue,m as Pe,c as Re,d as Te,e as Fe}from"./DPfWTWva.js";import{V as te,a as Ue,b as _e,c as de}from"./CaiKIhae.js";import{V as Ge}from"./uBF53bEj.js";import{V as H}from"./Dq3kAsVT.js";import{V as me,m as ze,a as Ee,b as Ne}from"./BPVbgeU1.js";import{u as Xe}from"./BxK2avnh.js";import{V as fe}from"./wYhgj_IB.js";import"./DkUMNEO2.js";import"./Oa0JKB0S.js";import"./3ibFEwr2.js";import"./BT5QbYB6.js";const Ae={class:"match-dialog"},qe=q({__name:"MatchDialogContent",props:{matchInfo:{type:Object,default:()=>null}},emits:["close"],setup(t,{emit:I}){var l,d,k;const u=ae(),o=ve(),f=t;o.chats.find(p=>{var r;return p.participants.includes(Number(f.matchInfo.id))&&p.participants.includes(Number((r=u==null?void 0:u.user)==null?void 0:r.id))});const m=((l=u.user)==null?void 0:l.profileImage)||"",V=I,h=((k=(d=f.matchInfo)==null?void 0:d.name)==null?void 0:k.split(" ")[0])+" também curtiu você!";function S(){const p=o.chats.find(r=>{var x;return r.participants.includes(Number(f.matchInfo.id))&&r.participants.includes(Number((x=u==null?void 0:u.user)==null?void 0:x.id))});V("close"),Ce(`/messages/${p==null?void 0:p.id}`)}return(p,r)=>(v(),M("div",Ae,[e(he,{"fill-height":""},{default:s(()=>[e(z,{variant:"text",rounded:"xl",class:"position-absolute top-0 right-0 mr-3 mt-3",icon:"mdi-close",onClick:r[0]||(r[0]=x=>p.$emit("close"))}),e(L,{align:"center",justify:"center"},{default:s(()=>[e(U,{cols:"12",class:"text-center"},{default:s(()=>[e(ke,{name:"fade"},{default:s(()=>r[1]||(r[1]=[b("div",{class:"match-header"},[b("h2",null,"É um feat!")],-1)])),_:1})]),_:1})]),_:1}),e(L,{align:"center",justify:"center"},{default:s(()=>[e(U,{cols:"12",md:"6",class:"d-flex justify-center"},{default:s(()=>[e(xe,{name:"slide-fade",mode:"out-in",tag:"div",class:"avatars"},{default:s(()=>[(v(),j(ce,{size:"150",class:"mx-2",key:"userPhoto"},{default:s(()=>[e(te,{contain:"",transition:"slide-x-transition",height:"150",width:"150",src:C(m),alt:"Sua foto"},null,8,["src"])]),_:1})),(v(),j(ce,{size:"150",class:"mx-2",key:"matchPhoto"},{default:s(()=>{var x;return[e(te,{contain:"",transition:"slide-x-reverse-transition",height:"150",width:"150",src:(x=t.matchInfo)==null?void 0:x.profileImage,alt:"Foto do match"},null,8,["src"])]}),_:1}))]),_:1})]),_:1})]),_:1}),e(L,{align:"center",justify:"center"},{default:s(()=>[e(U,{cols:"12",class:"text-center"},{default:s(()=>[b("p",{class:"collaboration-text"},A(h)),r[2]||(r[2]=b("p",{class:"collaboration-text"},"Que tal criar uma música juntos?",-1))]),_:1})]),_:1}),e(L,{align:"center",justify:"center"},{default:s(()=>[e(U,{cols:"12",class:"text-center"},{default:s(()=>[e(z,{class:"ma-4 border",style:{color:"#fff",background:"#170015"},variant:"elevated",rounded:"xl",size:"x-large",onClick:S},{default:s(()=>r[3]||(r[3]=[B(" Enviar Mensagem ")])),_:1})]),_:1})]),_:1})]),_:1})]))}}),Oe=ne(qe,[["__scopeId","data-v-9303c494"]]),se=be("filters",{state:()=>({nearbyUsers:!0,genres:[]}),actions:{}}),We=Se({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...Pe(),...ze()},"VSwitch"),Qe=we()({name:"VSwitch",inheritAttrs:!1,props:We(),emits:{"update:focused":t=>!0,"update:modelValue":t=>!0,"update:indeterminate":t=>!0},setup(t,I){let{attrs:u,slots:o}=I;const f=re(t,"indeterminate"),m=re(t,"modelValue"),{loaderClasses:V}=Le(t),{isFocused:h,focus:S,blur:l}=Be(t),d=w(),k=Ie&&window.matchMedia("(forced-colors: active)").matches,p=ee(()=>typeof t.loading=="string"&&t.loading!==""?t.loading:t.color),r=Me(),x=ee(()=>t.id||`switch-${r}`);function _(){f.value&&(f.value=!1)}function E(P){var R,D;P.stopPropagation(),P.preventDefault(),(D=(R=d.value)==null?void 0:R.input)==null||D.click()}return Xe(()=>{const[P,R]=$e(u),D=ue.filterProps(t),T=me.filterProps(t);return e(ue,ie({class:["v-switch",{"v-switch--flat":t.flat},{"v-switch--inset":t.inset},{"v-switch--indeterminate":f.value},V.value,t.class]},P,D,{modelValue:m.value,"onUpdate:modelValue":$=>m.value=$,id:x.value,focused:h.value,style:t.style}),{...o,default:$=>{let{id:J,messagesId:K,isDisabled:Y,isReadonly:Z,isValid:O}=$;const N={model:m,isValid:O};return e(me,ie({ref:d},T,{modelValue:m.value,"onUpdate:modelValue":[a=>m.value=a,_],id:J.value,"aria-describedby":K.value,type:"checkbox","aria-checked":f.value?"mixed":void 0,disabled:Y.value,readonly:Z.value,onFocus:S,onBlur:l},R),{...o,default:a=>{let{backgroundColorClasses:n,backgroundColorStyles:c}=a;return e("div",{class:["v-switch__track",k?void 0:n.value],style:c.value,onClick:E},[o["track-true"]&&e("div",{key:"prepend",class:"v-switch__track-true"},[o["track-true"](N)]),o["track-false"]&&e("div",{key:"append",class:"v-switch__track-false"},[o["track-false"](N)])])},input:a=>{let{inputNode:n,icon:c,backgroundColorClasses:F,backgroundColorStyles:X}=a;return e(W,null,[n,e("div",{class:["v-switch__thumb",{"v-switch__thumb--filled":c||t.loading},t.inset||k?void 0:F.value],style:t.inset?void 0:X.value},[o.thumb?e(Ue,{defaults:{VIcon:{icon:c,size:"x-small"}}},{default:()=>[o.thumb({...N,icon:c})]}):e(_e,null,{default:()=>[t.loading?e(je,{name:"v-switch",active:!0,color:O.value===!1?void 0:p.value},{default:g=>o.loader?o.loader(g):e(De,{active:g.isActive,color:g.color,indeterminate:!0,size:"16",width:"2"},null)}):c&&e(H,{key:String(c),icon:c,size:"x-small"},null)]})])])}})}})}),{}}}),He=q({__name:"FiltersDialogContent",emits:["close"],setup(t,{emit:I}){const u=I,o=w(se().nearbyUsers),f=w([]),m=oe(),V=se(),h=()=>{V.nearbyUsers=o.value,V.genres=f.value,u("close")};return(S,l)=>(v(),j(U,{cols:"12",md:"8",lg:"6",xl:"4",class:"d-flex ma-0 pa-0 justify-center align-center"},{default:s(()=>[e(Re,{class:"w-100 rounded-xl"},{default:s(()=>[e(Te,{class:"pt-3 pl-5 font-weight-light text-h5 mb-2 d-flex align-center"},{default:s(()=>[l[5]||(l[5]=b("span",{class:"text-truncate"}," Filtros ",-1)),e(Ge),e(z,{onClick:l[0]||(l[0]=d=>u("close")),icon:"",rounded:"xl",size:"small",variant:"elevated",color:""},{default:s(()=>[e(H,{size:"30",class:""},{default:s(()=>l[4]||(l[4]=[B(" mdi-close ")])),_:1})]),_:1})]),_:1}),e(Fe,{class:"pb-1 px-0 d-flex flex-column justify-center align-center"},{default:s(()=>[e(L,{"no-gutters":"",class:"justify-center align-center mb-2"},{default:s(()=>[e(Qe,{modelValue:C(o),"onUpdate:modelValue":l[1]||(l[1]=d=>Q(o)?o.value=d:null),"label-class":C(o)?"text-purple":"text-grey",class:"mb-4","hide-details":"",color:"purple-darken-1",label:"Filtrar por usuários mais próximos"},null,8,["modelValue","label-class"])]),_:1}),e(L,{"no-gutters":"",class:"w-100 justify-center align-center mb-6 px-6"},{default:s(()=>{var d;return[e(Ee,{modelValue:C(f),"onUpdate:modelValue":l[2]||(l[2]=k=>Q(f)?f.value=k:null),items:(d=C(m))==null?void 0:d.genres,label:"Gêneros Musicais",multiple:"",rounded:"xl","hide-details":"","return-object":"","item-title":"name",variant:"solo",chips:"",outlined:"",dense:""},null,8,["modelValue","items"])]}),_:1}),e(L,{"no-gutters":"",class:"w-100 justify-center align-center mb-4 px-6"},{default:s(()=>[e(z,{onClick:l[3]||(l[3]=d=>h()),block:"",rounded:"xl",variant:"elevated",color:"purple-darken-1"},{default:s(()=>l[6]||(l[6]=[B(" Aplicar ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}}),Je={class:"inner-card"},Ke={class:"card-content"},Ye={class:"card-name"},Ze={class:"card-address"},et={class:"card-genres"},tt={key:0,class:"card-bio"},st=q({__name:"InnerCardStack",props:{card:{type:Object,required:!0},showBio:{type:Boolean,default:!1}},setup(t){oe();const I=t,u=ae().user,o=ee(()=>I.card.favoriteGenres||[]),f=m=>u==null?void 0:u.favoriteGenres.some(V=>V.id==m.id);return(m,V)=>(v(),M("div",Je,[b("div",Ke,[t.card.profileImage?(v(),j(te,{key:0,draggable:"false",cover:"",src:t.card.profileImage,alt:"Imagem",class:"card-img"},null,8,["src"])):G("",!0),b("p",Ye,A(t.card.name),1),b("p",Ze,A(t.card.location.address),1),b("div",et,[(v(!0),M(W,null,pe(C(o),(h,S)=>(v(),M("span",{key:S,class:ge(["genre-tag border mb-2 ",{"is-favorite":f(h)}])},A(h.name),3))),128))])]),e(de,null,{default:s(()=>[t.showBio?G("",!0):(v(),j(H,{key:0,size:"20"},{default:s(()=>V[0]||(V[0]=[B("mdi-chevron-down")])),_:1}))]),_:1}),e(de,null,{default:s(()=>[t.showBio?(v(),M("div",tt,[b("p",null,A(t.card.bio),1)])):G("",!0)]),_:1})]))}}),at=ne(st,[["__scopeId","data-v-701f507e"]]),nt={class:"card-stack w-100"},ot={key:0,class:"text-center justify-center align-center d-flex"},lt=["onMousedown","onTouchstart"],rt=q({__name:"SwiperStack",emits:["swipe"],setup(t,{emit:I}){const u=oe(),o=ae(),f=ve(),m=se(),V=w(u.users),h=w(!1),S=()=>{const a=o.user;if(!a)return[];const n=a.location.latitude,c=a.location.longitude;return V.value.filter(i=>i.id!==a.id).map(i=>{const y=J(n,c,i.location.latitude,i.location.longitude),le=m.genres.length>0?i.favoriteGenres.filter(ye=>m.genres.some(Ve=>Ve.id===ye.id)).length:0;return{...i,distance:y,commonGenresCount:le}}).filter(i=>m.genres.length>0?i.commonGenresCount>0:!0).sort((i,y)=>m.nearbyUsers?i.distance!==y.distance?i.distance-y.distance:y.commonGenresCount-i.commonGenresCount:m.genres.length>0?y.commonGenresCount-i.commonGenresCount:0)},l=w([...S()]),d=w(!1),k=w(!1);let p=0,r=0,x=!1,_=w();const E=w(),P=w(),R=()=>{h.value=!h.value};function D(a,n){n===0&&(_.value=document.querySelector("#innerCardRef"),x=!0,p=a.type.includes("touch")?a.touches[0].clientX:a.clientX,r=p,document.addEventListener("mousemove",T),document.addEventListener("touchmove",T),document.addEventListener("mouseup",$),document.addEventListener("touchend",$))}function T(a){if(!x)return;r=a.type.includes("touch")?a.touches[0].clientX:a.clientX;const n=r-p;_.value.style.transform=`translateX(${n}px) rotate(${n/10}deg)`,_.value.style.opacity=1-Math.abs(n)/300}function $(){if(!x)return;x=!1;const a=r-p;if(Math.abs(a)>20&&r!=p)if(Math.abs(a)>100){const n=a>0?"R":"L";h.value=!1;const c=l.value[0];P.value={direction:n,card:c},n=="R"?o.addLikedUser(c.id):o.rmvLikedUser(c.id),_.value.style.transition="transform 0.3s, opacity 0.3s",_.value.style.transform=`translateX(${a>0?500:-500}px)`,_.value.style.opacity=0,setTimeout(()=>{l.value.shift(),h.value=!1,n=="R"&&Y(c)},200)}else _.value.style.transition="transform 0.3s, opacity 0.3s",_.value.style.transform="translateX(0)",_.value.style.opacity=1;else _.value.style.transition="transform 0.3s, opacity 0.3s",_.value.style.transform="translateX(0)",_.value.style.opacity=1;document.removeEventListener("mousemove",T),document.removeEventListener("touchmove",T),document.removeEventListener("mouseup",$),document.removeEventListener("touchend",$)}function J(a,n,c,F){const g=(c-a)*Math.PI/180,i=(F-n)*Math.PI/180,y=Math.sin(g/2)*Math.sin(g/2)+Math.cos(a*Math.PI/180)*Math.cos(c*Math.PI/180)*Math.sin(i/2)*Math.sin(i/2);return 6371*(2*Math.atan2(Math.sqrt(y),Math.sqrt(1-y)))}function K(){l.value=S()}const Y=a=>{E.value=a,f.createChat(a),d.value=!0},Z=()=>{k.value=!0},O=()=>{l.value=S(),k.value=!1},N=()=>{d.value=!1,E.value=null};return(a,n)=>{const c=Oe,F=He,X=at;return v(),M(W,null,[e(z,{onClick:Z,variant:"text",class:"filters-btn",icon:""},{default:s(()=>[e(H,{color:"#fff"},{default:s(()=>n[4]||(n[4]=[B("mdi-tune-variant")])),_:1})]),_:1}),b("div",nt,[e(fe,{modelValue:C(d),"onUpdate:modelValue":n[0]||(n[0]=g=>Q(d)?d.value=g:null),fullscreen:"",persistent:""},{default:s(()=>[C(d)?(v(),j(c,{key:0,"match-info":C(E),onClose:N},null,8,["match-info"])):G("",!0)]),_:1},8,["modelValue"]),e(fe,{modelValue:C(k),"onUpdate:modelValue":n[1]||(n[1]=g=>Q(k)?k.value=g:null),persistent:"","content-class":"d-flex justify-center align-center"},{default:s(()=>[e(F,{onClose:O})]),_:1},8,["modelValue"]),e(_e,{"hide-on-leave":""},{default:s(()=>[C(l).length?G("",!0):(v(),M("div",ot,[e(z,{class:"ma-2",size:"120",variant:"tonal",icon:"",color:"purple-darken-4",onClick:n[2]||(n[2]=g=>K())},{default:s(()=>n[5]||(n[5]=[B("Resetar "),b("br",null,null,-1),B("Stack")])),_:1})]))]),_:1}),(v(!0),M(W,null,pe(C(l),(g,i)=>(v(),M("div",{class:ge(["card",{"card-active":i===0}]),key:g.id,onMousedown:y=>D(y,i),onTouchstart:y=>D(y,i)},[e(Ne,null,{default:s(()=>[i===0?(v(),j(X,{key:0,id:"innerCardRef",onClick:n[3]||(n[3]=y=>R()),card:g,"show-bio":C(h)},null,8,["card","show-bio"])):G("",!0)]),_:2},1024)],42,lt))),128))])],64)}}}),it=ne(rt,[["__scopeId","data-v-a3e3e5eb"]]),Ct=q({__name:"home",setup(t){return(I,u)=>{const o=it;return v(),j(he,{fluid:"",class:"fill-height"},{default:s(()=>[e(L,{align:"center",justify:"center",class:"fill-height"},{default:s(()=>[e(U,{cols:"12",sm:"8",md:"6",lg:"4",xl:"3",class:"fill-height justify-center align-center d-flex"},{default:s(()=>[e(o)]),_:1})]),_:1})]),_:1})}}});export{Ct as default};

import{c as de,I as Be,V as ze}from"./lZMjZEwB.js";import{a as ce,i as he,u as ye,b as ne,j as oe,g as be,k as xe,m as pe,l as Ve,d as De,e as Ne,V as fe,c as $e}from"./ChWetMKM.js";import{V as q}from"./oUzMfKMI.js";import{V as ue}from"./u__e0LdV.js";import{r as c,j as w,t as re,v as U,z as n,A as m,K as j,Y as z,L as b,B as G,y as ke,N as we,O as Ce,a9 as Te,P as Ie,aa as Ue,ab as me,a7 as O,S as Pe,U as J,V as E,a4 as le,ac as Se,ad as Me,ae as je,o as Fe,e as Ge,af as He,ag as Ee,a5 as ve,ah as Le,ai as Oe,_ as qe,H as Je,W as Ke,x as Qe,$ as We,X as Z,n as Xe}from"./Bl3r4upV.js";import{v as Ye}from"./-dFfTL2n.js";import{V as Ze}from"./EZ4cc5MS.js";import{e as _e,a as ge}from"./BcMC0oom.js";import{u as Re}from"./BkQ820Tb.js";const et={key:0,class:"text-truncate d-flex justify-center"},tt={__name:"AddressInput",props:{location:{type:Object,default:()=>({})},blocked:{default:!1}},emits:["updateLocation"],setup(e,{emit:A}){var h,C,p;const P=A,v=e,u=c(!1),i=c(((h=v.location)==null?void 0:h.address)||""),l=c(""),x=c(((C=v.location)==null?void 0:C.latitude)||""),S=c(((p=v.location)==null?void 0:p.longitude)||""),F=w(()=>{var f,r;return(f=v.location)!=null&&f.address?`${(r=v.location)==null?void 0:r.address}`:i.value?`${i.value.city}, ${i.value.state}, ${i.value.country}`:""}),V=()=>{u.value=!0,navigator.geolocation?navigator.geolocation.getCurrentPosition(async f=>{x.value=f.coords.latitude.toFixed(6),S.value=f.coords.longitude.toFixed(6),l.value="",await R()},f=>{console.error(f),i.value="",l.value="Não foi possível obter a localização.",u.value=!1},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0}):(l.value="A API de Geolocalização não é suportada pelo seu navegador.",g())};async function R(){if(x.value&&S.value)try{const f=`https://nominatim.openstreetmap.org/reverse?lat=${x.value}&lon=${S.value}&format=json`,k=await(await fetch(f,{headers:{"User-Agent":"FeaterApp/1.0 (matheus.fdealmeida@hotmail.com)"}})).json();k&&k.address?(i.value={city:k.address.city||k.address.town||k.address.village||"Desconhecida",state:k.address.state||"Desconhecido",country:k.address.country||"Desconhecido"},P("updateLocation",{latitude:x.value,longitude:S.value,address:F.value}),l.value=""):(l.value="Endereço não encontrado",g())}catch{l.value="Erro ao obter o endereço",g()}else l.value="Por favor, insira a latitude e longitude",g();u.value=!1}const g=()=>{i.value="",x.value="",S.value="",u.value=!1,P("updateLocation",null)};return(f,r)=>(U(),re("div",null,[n(de,null,{default:m(()=>[b(i)?z("",!0):(U(),j(ce,{key:0,cols:"12",class:"ma-0 pa-0"},{default:m(()=>[n(q,{loading:b(u),onClick:V,block:"",rounded:"xl",color:"purple-darken-3"},{default:m(()=>[n(ue,{class:"mr-2"},{default:m(()=>r[0]||(r[0]=[G(" mdi-map-marker ")])),_:1}),r[1]||(r[1]=G(" OBTER LOCALIZAÇÃO"))]),_:1},8,["loading"])]),_:1}))]),_:1}),n(de,{"hide-on-leave":""},{default:m(()=>[b(i)?(U(),j(ce,{key:0,cols:"12",class:"ma-0 pa-0"},{default:m(()=>[v.blocked?(U(),re("span",et,ke(b(F)),1)):z("",!0),v.blocked?z("",!0):(U(),j(he,{key:1,variant:v.blocked?"plain":"solo",disabled:"",class:"mb-3",rounded:"xl","hide-details":"",value:b(F),dense:""},null,8,["variant","value"])),v.blocked?z("",!0):(U(),j(q,{key:2,onClick:g,block:"",rounded:"xl",variant:"tonal",color:"error"},{default:m(()=>[n(ue,{class:"mr-2"},{default:m(()=>r[2]||(r[2]=[G(" mdi-map-marker ")])),_:1}),r[3]||(r[3]=G(" remover localização"))]),_:1}))]),_:1})):z("",!0)]),_:1})]))}},at=Ce({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,showSize:{type:[Boolean,Number,String],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(Number(e))},...pe({prependIcon:"$file"}),modelValue:{type:[Array,Object],default:e=>e.multiple?[]:null,validator:e=>Ue(e).every(A=>A!=null&&typeof A=="object")},...xe({clearable:!0})},"VFileInput"),lt=we()({name:"VFileInput",inheritAttrs:!1,props:at(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,A){let{attrs:P,emit:v,slots:u}=A;const{t:i}=Te(),l=Ie(e,"modelValue",e.modelValue,t=>Ue(t),t=>!e.multiple&&Array.isArray(t)?t[0]:t),{isFocused:x,focus:S,blur:F}=ye(e),V=w(()=>typeof e.showSize!="boolean"?e.showSize:void 0),R=w(()=>(l.value??[]).reduce((t,o)=>{let{size:d=0}=o;return t+d},0)),g=w(()=>me(R.value,V.value)),h=w(()=>(l.value??[]).map(t=>{const{name:o="",size:d=0}=t;return e.showSize?`${o} (${me(d,V.value)})`:o})),C=w(()=>{var o;const t=((o=l.value)==null?void 0:o.length)??0;return e.showSize?i(e.counterSizeString,t,g.value):i(e.counterString,t)}),p=c(),f=c(),r=c(),k=w(()=>x.value||e.active),L=w(()=>["plain","underlined"].includes(e.variant));function H(){var t;r.value!==document.activeElement&&((t=r.value)==null||t.focus()),x.value||S()}function K(t){var o;(o=r.value)==null||o.click()}function B(t){v("mousedown:control",t)}function D(t){var o;(o=r.value)==null||o.click(),v("click:control",t)}function $(t){t.stopPropagation(),H(),le(()=>{l.value=[],Se(e["onClick:clear"],t)})}function y(t){t.preventDefault()}function a(t){t.preventDefault(),t.dataTransfer&&(l.value=[...t.dataTransfer.files??[]])}return O(l,t=>{(!Array.isArray(t)||!t.length)&&r.value&&(r.value.value="")}),Re(()=>{const t=!!(u.counter||e.counter),o=!!(t||u.details),[d,s]=Pe(P),{modelValue:Q,...W}=ne.filterProps(e),X=oe.filterProps(e);return n(ne,J({ref:p,modelValue:e.multiple?l.value:l.value[0],class:["v-file-input",{"v-file-input--chips":!!e.chips,"v-file-input--hide":e.hideInput,"v-input--plain-underlined":L.value},e.class],style:e.style,"onClick:prepend":K},d,W,{centerAffix:!L.value,focused:x.value}),{...u,default:I=>{let{id:N,isDisabled:T,isDirty:Y,isReadonly:_,isValid:ie}=I;return n(oe,J({ref:f,"prepend-icon":e.prependIcon,onMousedown:B,onClick:D,"onClick:clear":$,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},X,{id:N.value,active:k.value||Y.value,dirty:Y.value||e.dirty,disabled:T.value,focused:x.value,error:ie.value===!1,onDragover:y,onDrop:a}),{...u,default:se=>{var ae;let{props:{class:ee,...te}}=se;return n(E,null,[n("input",J({ref:r,type:"file",readonly:_.value,disabled:T.value,multiple:e.multiple,name:e.name,onClick:M=>{M.stopPropagation(),_.value&&M.preventDefault(),H()},onChange:M=>{if(!M.target)return;const Ae=M.target;l.value=[...Ae.files??[]]},onFocus:H,onBlur:F},te,s),null),n("div",{class:ee},[!!((ae=l.value)!=null&&ae.length)&&!e.hideInput&&(u.selection?u.selection({fileNames:h.value,totalBytes:R.value,totalBytesReadable:g.value}):e.chips?h.value.map(M=>n(_e,{key:M,size:"small",text:M},null)):h.value.join(", "))])])}})},details:o?I=>{var N,T;return n(E,null,[(N=u.details)==null?void 0:N.call(u,I),t&&n(E,null,[n("span",null,null),n(Ve,{active:!!((T=l.value)!=null&&T.length),value:C.value,disabled:e.disabled},u.counter)])])}:void 0})}),be({},p,f,r)}}),nt=Ce({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...pe(),...xe()},"VTextarea"),ot=we()({name:"VTextarea",directives:{Intersect:Be},inheritAttrs:!1,props:nt(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,A){let{attrs:P,emit:v,slots:u}=A;const i=Ie(e,"modelValue"),{isFocused:l,focus:x,blur:S}=ye(e),F=w(()=>typeof e.counterValue=="function"?e.counterValue(i.value):(i.value||"").toString().length),V=w(()=>{if(P.maxlength)return P.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function R(t,o){var d,s;!e.autofocus||!t||(s=(d=o[0].target)==null?void 0:d.focus)==null||s.call(d)}const g=c(),h=c(),C=Me(""),p=c(),f=w(()=>e.persistentPlaceholder||l.value||e.active);function r(){var t;p.value!==document.activeElement&&((t=p.value)==null||t.focus()),l.value||x()}function k(t){r(),v("click:control",t)}function L(t){v("mousedown:control",t)}function H(t){t.stopPropagation(),r(),le(()=>{i.value="",Se(e["onClick:clear"],t)})}function K(t){var d;const o=t.target;if(i.value=o.value,(d=e.modelModifiers)!=null&&d.trim){const s=[o.selectionStart,o.selectionEnd];le(()=>{o.selectionStart=s[0],o.selectionEnd=s[1]})}}const B=c(),D=c(Number(e.rows)),$=w(()=>["plain","underlined"].includes(e.variant));je(()=>{e.autoGrow||(D.value=Number(e.rows))});function y(){e.autoGrow&&le(()=>{if(!B.value||!h.value)return;const t=getComputedStyle(B.value),o=getComputedStyle(h.value.$el),d=parseFloat(t.getPropertyValue("--v-field-padding-top"))+parseFloat(t.getPropertyValue("--v-input-padding-top"))+parseFloat(t.getPropertyValue("--v-field-padding-bottom")),s=B.value.scrollHeight,Q=parseFloat(t.lineHeight),W=Math.max(parseFloat(e.rows)*Q+d,parseFloat(o.getPropertyValue("--v-input-control-height"))),X=parseFloat(e.maxRows)*Q+d||1/0,I=Ee(s??0,W,X);D.value=Math.floor((I-d)/Q),C.value=He(I)})}Fe(y),O(i,y),O(()=>e.rows,y),O(()=>e.maxRows,y),O(()=>e.density,y);let a;return O(B,t=>{t?(a=new ResizeObserver(y),a.observe(B.value)):a==null||a.disconnect()}),Ge(()=>{a==null||a.disconnect()}),Re(()=>{const t=!!(u.counter||e.counter||e.counterValue),o=!!(t||u.details),[d,s]=Pe(P),{modelValue:Q,...W}=ne.filterProps(e),X=oe.filterProps(e);return n(ne,J({ref:g,modelValue:i.value,"onUpdate:modelValue":I=>i.value=I,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-input--plain-underlined":$.value},e.class],style:e.style},d,W,{centerAffix:D.value===1&&!$.value,focused:l.value}),{...u,default:I=>{let{id:N,isDisabled:T,isDirty:Y,isReadonly:_,isValid:ie}=I;return n(oe,J({ref:h,style:{"--v-textarea-control-height":C.value},onClick:k,onMousedown:L,"onClick:clear":H,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},X,{id:N.value,active:f.value||Y.value,centerAffix:D.value===1&&!$.value,dirty:Y.value||e.dirty,disabled:T.value,focused:l.value,error:ie.value===!1}),{...u,default:se=>{let{props:{class:ee,...te}}=se;return n(E,null,[e.prefix&&n("span",{class:"v-text-field__prefix"},[e.prefix]),ve(n("textarea",J({ref:p,class:ee,value:i.value,onInput:K,autofocus:e.autofocus,readonly:_.value,disabled:T.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:r,onBlur:S},te,s),null),[[Le("intersect"),{handler:R},null,{once:!0}]]),e.autoGrow&&ve(n("textarea",{class:[ee,"v-textarea__sizer"],id:`${te.id}-sizer`,"onUpdate:modelValue":ae=>i.value=ae,ref:B,readonly:!0,"aria-hidden":"true"},null),[[Oe,i.value]]),e.suffix&&n("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:o?I=>{var N;return n(E,null,[(N=u.details)==null?void 0:N.call(u,I),t&&n(E,null,[n("span",null,null),n(Ve,{active:e.persistentCounter||l.value,value:F.value,max:V.value,disabled:e.disabled},u.counter)])])}:void 0})}),be({},g,h,p)}}),ut={key:0,class:"text-truncate"},rt={__name:"ProfileCard",props:{matchedUser:{type:Object,required:!1}},emits:["close"],setup(e,{emit:A}){var D,$;const P=e,v=A,u=Je(),i=Ke(),l=P.matchedUser||u.user,x=((D=P.matchedUser)==null?void 0:D.id)||(($=u.user)==null?void 0:$.id),S=c(),F=c({id:x}),V=c(),R=c(""),g=c((l==null?void 0:l.name)||"Future Hendrix"),h=c((l==null?void 0:l.bio)||"Bora fazer um som?"),C=c((l==null?void 0:l.favoriteRoles)||[{id:3,name:"Produtor(a) Musical"},{id:6,name:"DJ"}]),p=c((l==null?void 0:l.favoriteGenres)||[{id:3,name:"Hip Hop"},{id:4,name:"R&B"},{id:19,name:"Trap"}]),f=c((l==null?void 0:l.location)||{}),r=w(()=>R.value||l.profileImage||"https://media.gq.com/photos/6255cb439aa7a6f3a12583da/master/w_1600%2Cc_limit/GQ0522_Future_11.jpg");Fe(()=>{});const k=y=>{const a=y.target.files[0];if(!a){R.value="";return}L(a)},L=async y=>{const a=new FileReader;a.onload=t=>{R.value=t.target.result},a.readAsDataURL(y)},H=y=>{f.value=y};function K(){v("close")}function B(){if(F.value={id:x,location:f.value,name:g.value,bio:h.value,profileImage:r.value,favoriteRoles:C.value,favoriteGenres:p.value},!Ye(F.value)){alert("Preencha todos os campos");return}i.updateUser(F.value),alert("Perfil salvo com sucesso!"),Xe("/home")}return(y,a)=>{const t=tt;return U(),re(E,null,[e.matchedUser?z("",!0):(U(),j(q,{key:0,color:"deep-purple-darken-1",onClick:B,variant:"tonal",class:"save-btn text-white",rounded:"xl"},{default:m(()=>[n(ue,{class:"mr-2",color:"#fff"},{default:m(()=>a[8]||(a[8]=[G("mdi-check")])),_:1}),a[9]||(a[9]=Qe("span",{class:"text-white"}," Salvar ",-1))]),_:1})),n($e,{class:"w-100 rounded-xl"},{default:m(()=>[n(De,{class:"pt-3 pl-5 font-weight-light text-h4 mb-2 d-flex align-center"},{default:m(()=>{var o;return[e.matchedUser?(U(),re("span",ut,ke(((o=e.matchedUser.name)==null?void 0:o.split(" ")[0])||"Perfil"),1)):z("",!0),n(Ze),e.matchedUser?(U(),j(q,{key:1,onClick:a[0]||(a[0]=d=>K()),icon:"",rounded:"xl",class:"border",size:"small",variant:"elevated",color:"surface"},{default:m(()=>[n(ue,{class:""},{default:m(()=>a[10]||(a[10]=[G(" mdi-chevron-down ")])),_:1})]),_:1})):z("",!0)]}),_:1}),n(Ne,{class:"pb-5 px-0"},{default:m(()=>{var o,d;return[n(fe,{"no-gutters":"",class:"mb-4"},{default:m(()=>[n(ze,{src:b(r),contain:"",transition:"slide-y-reverse-transition",rounded:"xl","max-height":"400","min-height":"200"},null,8,["src"])]),_:1}),e.matchedUser?z("",!0):(U(),j(fe,{key:0,"no-gutters":"",class:"mb-4 justify-center"},{default:m(()=>[b(V)?z("",!0):(U(),j(q,{key:0,onClick:a[1]||(a[1]=s=>y.$refs.fileInputRef.click()),block:"",variant:"tonal",rounded:"xl",color:"purple-darken-3"},{default:m(()=>a[11]||(a[11]=[G(" Alterar foto ")])),_:1})),n(q,{onClick:a[2]||(a[2]=()=>{V.value=null,R.value=null}),variant:"tonal",class:We({"d-none":!b(V)}),rounded:"xl",color:"error",block:""},{default:m(()=>a[12]||(a[12]=[G("Remover foto")])),_:1},8,["class"]),n(lt,{readonly:!!e.matchedUser,class:"d-none",ref_key:"fileInputRef",ref:S,"hide-details":"",variant:"solo",flat:"",onChange:k,density:"compact",clearable:!1,modelValue:b(V),"onUpdate:modelValue":a[3]||(a[3]=s=>Z(V)?V.value=s:null),accept:"image/*","prepend-icon":""},null,8,["readonly","modelValue"])]),_:1})),n(he,{modelValue:b(g),"onUpdate:modelValue":a[4]||(a[4]=s=>Z(g)?g.value=s:null),readonly:!!e.matchedUser,variant:"solo",label:e.matchedUser?"":"Nome",rounded:"xl",class:"mb-3","hide-details":"",outlined:"",dense:""},null,8,["modelValue","readonly","label"]),n(ot,{label:e.matchedUser?"":"Biografia",rounded:"xl",modelValue:b(h),"onUpdate:modelValue":a[5]||(a[5]=s=>Z(h)?h.value=s:null),rules:[s=>s.length<=200||"Máximo: 200 caracteres"],"auto-grow":"",readonly:!!e.matchedUser,variant:"solo",rows:"3",outlined:""},null,8,["label","modelValue","rules","readonly"]),n(ge,{modelValue:b(C),"onUpdate:modelValue":a[6]||(a[6]=s=>Z(C)?C.value=s:null),items:(o=b(i))==null?void 0:o.roles,label:e.matchedUser?"":"Ramos Artísticos",multiple:"",clearable:!e.matchedUser,rounded:"xl","menu-icon":e.matchedUser?"":"$dropdown ",readonly:!!e.matchedUser,"return-object":"","item-title":"name","closable-chips":!e.matchedUser,variant:"solo",chips:"",outlined:"",dense:""},null,8,["modelValue","items","label","clearable","menu-icon","readonly","closable-chips"]),n(ge,{modelValue:b(p),"onUpdate:modelValue":a[7]||(a[7]=s=>Z(p)?p.value=s:null),items:(d=b(i))==null?void 0:d.genres,label:e.matchedUser?"":"Gêneros Musicais",multiple:"",clearable:!e.matchedUser,rounded:"xl","menu-icon":e.matchedUser?"":"$dropdown ",readonly:!!e.matchedUser,"return-object":"","item-title":"name","closable-chips":!e.matchedUser,variant:"solo",chips:"",outlined:"",dense:""},null,8,["modelValue","items","label","clearable","menu-icon","readonly","closable-chips"]),n(t,{onUpdateLocation:H,location:b(f),blocked:!!e.matchedUser},null,8,["location","blocked"])]}),_:1})]),_:1})],64)}}},yt=qe(rt,[["__scopeId","data-v-a2f6cf8b"]]);export{yt as _};

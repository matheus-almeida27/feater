import{_ as A}from"./ClHqY5Lv.js";import{d as L,H as $,M as E,I as F,r as g,X as O,Y as H,j as K,o as P,Z as C,t as c,z as a,A as s,O as k,v as p,$ as X,B as h,y as _,P as Y,L as x,R as Z,x as b,N as q,a0 as G,n as J,_ as Q}from"./C0cOhS28.js";import{V as W,a as ee}from"./6uCTjBnV.js";import{V as te,a as ae}from"./DTXd13Q1.js";import{V as se}from"./DVQsnzh5.js";import{V as oe,a as ne}from"./Bvy3i0Oa.js";import{V as re}from"./DTs8fpVY.js";import{V as le}from"./BYPtW6mL.js";import{V as ie,R as de}from"./DxTOh4cf.js";import{a as B}from"./d5VrgsK0.js";import{V as me}from"./iOMLqC3k.js";import{d as ue}from"./m49m8DjS.js";import"./Co0LjnBq.js";import"./C9UZkIJG.js";import"./BHqi5ak4.js";import"./e_9N_LhS.js";import"./CvS21Uqf.js";import"./CNlQkuAU.js";import"./ZO44NG7P.js";import"./H3E36PwH.js";const ce={key:0,class:"message-time"},pe={class:"input-wrapper"},fe=L({__name:"[chatId]",setup(ge){const d=$(),S=E(),T=F(),f=g(!1),v=g(!1),D=g(),M=O(),U=H(),N=Number(M.params.chatId),n=T.chats.find(l=>l.id===N);n||U.push("/matches");const i=K(()=>{var r;const l=(r=d.user)==null?void 0:r.id,t=n==null?void 0:n.participants.find(e=>e!==l);return S.users.find(e=>e.id===t)}),m=g("");let u;function R(l){const t=new Date(l),r={day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"};return t.toLocaleString("pt-BR",r)}function I(){var r;if(!m.value.trim()||!n)return;const l={id:Date.now(),chatId:n.id,sender:((r=d==null?void 0:d.user)==null?void 0:r.id)||0,text:m.value.trim(),timestamp:new Date().toISOString()};n.messages.push(l),m.value="";let t=["Sim, concordo!","Beleza, bora f1 então!","Claro, bora!","Com certeza meu mano","vambora cpx!","Vamos lá!"];setTimeout(()=>{var o;const e={id:Date.now()+1,chatId:n.id,sender:((o=i.value)==null?void 0:o.id)||0,text:t[Math.floor(Math.random()*t.length)],timestamp:new Date().toISOString()};n.messages.push(e),V()},1200),V()}function V(){C(()=>{u&&u.scrollTo(0,u.scrollHeight)})}function z(){i.value&&(D.value=i.value.id,f.value=!0)}function j(){J("/messages")}return P(()=>{C(()=>{u=document.getElementById("message_container"),V()})}),(l,t)=>{const r=A;return p(),c(k,null,[a(te,{dark:"",app:"",flat:"",style:{background:"transparent",backdropFilter:"blur(5px)"}},{default:s(()=>[a(le,{icon:"",size:"large",onClick:j},{default:s(()=>[a(ie,null,{default:s(()=>t[4]||(t[4]=[h("mdi-arrow-left")])),_:1})]),_:1}),X((p(),c("div",{onClick:z,class:"d-flex w-100 h-100 align-center cursor-pointer rounde-pill"},[a(ne,{size:"40",class:"ml-0 mr-3"},{default:s(()=>{var e,o;return[a(W,{contain:"",src:((e=i.value)==null?void 0:e.profileImage)||"",alt:(o=i.value)==null?void 0:o.name},null,8,["src","alt"])]}),_:1}),a(ae,{class:"font-weight-light"},{default:s(()=>{var e;return[h(_(((e=i.value)==null?void 0:e.name)||"Chat"),1)]}),_:1})])),[[de,!0]])]),_:1}),a(se,{modelValue:f.value,"onUpdate:modelValue":t[1]||(t[1]=e=>f.value=e),transition:"dialog-bottom-transition","content-class":"bg-surface d-flex justify-center align-center",class:"d-flex justify-center align-center",fullscreen:""},{default:s(()=>[a(B,{cols:"12",sm:"7",md:"6",lg:"4",xl:"3",class:"d-flex justify-center align-center ma-0 pa-0"},{default:s(()=>[a(r,{matchedUser:i.value,onClose:t[0]||(t[0]=e=>f.value=!1)},null,8,["matchedUser"])]),_:1})]),_:1},8,["modelValue"]),a(oe,{id:"message_container",fluid:"",class:"overflow-y-auto d-flex align-center flex-column pa-0 message-container",ref_key:"messageContainer",ref:u},{default:s(()=>[a(B,{cols:"12",lg:"6",md:"8",sm:"10",class:"d-flex justify-center"},{default:s(()=>[a(me,{class:"pa-0 bg-transparent w-100","two-line":""},{default:s(()=>{var e;return[(p(!0),c(k,null,Y(((e=x(n))==null?void 0:e.messages)||[],o=>{var w,y;return p(),c("div",{key:o.id,class:Z([{sent:o.sender===((w=x(d).user)==null?void 0:w.id),received:o.sender!==((y=x(d).user)==null?void 0:y.id)},"message-item"])},[b("div",{class:"message-text",onClick:t[2]||(t[2]=ve=>v.value=!v.value)},[h(_(o.text)+" ",1),a(ee,null,{default:s(()=>[v.value?(p(),c("div",ce,_(R(o.timestamp)),1)):q("",!0)]),_:2},1024)])],2)}),128))]}),_:1})]),_:1})]),_:1},512),a(re,{app:"",class:"glass-effect",height:"auto"},{default:s(()=>[b("div",pe,[a(ue,{modelValue:m.value,"onUpdate:modelValue":t[3]||(t[3]=e=>m.value=e),placeholder:"Digite sua mensagem...",variant:"solo-filled",density:"comfortable",rounded:"xl",class:"container-input",height:"30","hide-details":"",color:"purple-darken-3",onKeyup:G(I,["enter"]),"append-inner-icon":"mdi-send","onClick:appendInner":I},null,8,["modelValue"])])]),_:1})],64)}}}),Ae=Q(fe,[["__scopeId","data-v-3b149611"]]);export{Ae as default};

import{H as U,I as k,r as f,z as o,d as F,J as N,j as R,K as j,A as n,v as B,B as y,y as h,L as l,x as L,M as P,N as x,n as C,_ as T}from"./BufbmH5c.js";import{c as I,f as M,m as z,V as D,a as w,b as E,d as J,e as q,g as A,h as S}from"./ctwST-zX.js";import{V as _}from"./B_kU800D.js";import{u as O,m as $}from"./D8oMGO5H.js";import"./CIw7i-Kz.js";const H=k({...$(),...z()},"VForm"),K=U()({name:"VForm",props:H(),emits:{"update:modelValue":c=>!0,submit:c=>!0},setup(c,v){let{slots:s,emit:u}=v;const r=I(c),d=f();function g(i){i.preventDefault(),r.reset()}function V(i){const m=i,a=r.validate();m.then=a.then.bind(a),m.catch=a.catch.bind(a),m.finally=a.finally.bind(a),u("submit",m),m.defaultPrevented||a.then(t=>{var p;let{valid:e}=t;e&&((p=d.value)==null||p.submit())}),m.preventDefault()}return O(()=>{var i;return o("form",{ref:d,class:["v-form",c.class],style:c.style,novalidate:!0,onReset:g,onSubmit:V},[(i=s.default)==null?void 0:i.call(s,r)])}),M(r,d)}}),G=F({__name:"login",setup(c){const v=N(),s=f("signup"),u=f(""),r=f(""),d=f(!1),g=f(!1),V=f(null),i=R(()=>{if(s.value==="login")return{header:"Login",btn:"Criar Conta"};if(s.value==="signup")return{header:"Criar Conta",btn:"Fazer Login"}}),m=async()=>{try{g.value=!0;const a=JSON.parse(localStorage.getItem("users")||"[]");if(s.value==="signup"){if(a.find(b=>b.username===u.value)){alert("Usuário já existe. Escolha outro nome de usuário.");return}let e;do e=Math.floor(1e3+Math.random()*9e3).toString();while(a.some(b=>b.id===e));const p={username:u.value,password:r.value,id:e};a.push(p),localStorage.setItem("users",JSON.stringify(a)),console.log("Novo usuário criado:",p),v.setUser(p),await C("/home")}else if(s.value==="login"){const t=a.find(e=>e.username===u.value);if(!t){alert("Usuário não encontrado.");return}if(t.password!==r.value){alert("Senha incorreta.");return}console.log("Login bem-sucedido:",t),v.setUser(t),await C("/home")}}catch(a){console.error("Erro:",a)}finally{g.value=!1}};return(a,t)=>(B(),j(D,{fluid:"",class:"fill-height login-container"},{default:n(()=>[o(w,{align:"center",justify:"center"},{default:n(()=>[o(E,{cols:"12",sm:"8",md:"6",lg:"4"},{default:n(()=>[o(J,{class:"elevation-5 pa-4"},{default:n(()=>[o(q,{class:"text-h4 font-weight-thin text-center"},{default:n(()=>{var e;return[y(h((e=l(i))==null?void 0:e.header),1)]}),_:1}),o(w,{"no-gutters":"",class:"justify-center mb-4 opacity-60"},{default:n(()=>[t[4]||(t[4]=L("span",{class:"d-flex justify-center align-center mr-1"}," ou ",-1)),o(_,{onClick:t[0]||(t[0]=e=>s.value=l(s)==="login"?"signup":"login"),variant:"text",size:"small"},{default:n(()=>{var e;return[y(h((e=l(i))==null?void 0:e.btn),1)]}),_:1})]),_:1}),o(A,null,{default:n(()=>[o(K,{onSubmit:P(m,["prevent"]),ref_key:"form",ref:V},{default:n(()=>[o(S,{variant:"plain",modelValue:l(u),"onUpdate:modelValue":t[1]||(t[1]=e=>x(u)?u.value=e:null),label:"Username","prepend-icon":"mdi-account",rules:[e=>!!e||"Username é obrigatório"],required:"",class:"mb-4"},null,8,["modelValue","rules"]),o(S,{variant:"plain",modelValue:l(r),"onUpdate:modelValue":t[2]||(t[2]=e=>x(r)?r.value=e:null),label:"Senha","prepend-icon":"mdi-lock","append-icon":l(d)?"mdi-eye":"mdi-eye-off",type:l(d)?"text":"password",rules:[e=>!!e||"Senha é obrigatória"],"onClick:append":t[3]||(t[3]=e=>d.value=!l(d)),required:""},null,8,["modelValue","append-icon","type","rules"]),o(_,{type:"submit",color:"purple",block:"",large:"",class:"mt-6",loading:l(g)},{default:n(()=>[y(h(l(s)==="login"?"Entrar":"Criar Conta"),1)]),_:1},8,["loading"])]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}}),ee=T(G,[["__scopeId","data-v-98009556"]]);export{ee as default};

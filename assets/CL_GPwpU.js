import{a as ge,I as Te,V as $e}from"./CBKenbfh.js";import{a as be,u as Ce,g as oe,h as se,i as we,j as Ie,k as Se,c as De,d as Me,V as he,f as je,l as Le,b as Ge}from"./lewhVoD7.js";import{x as fe,y as me,U as He,W as ye,X as Ee,Y as Pe,Z as Oe,$ as qe,a0 as Xe,z as ve,a1 as Ye,b as l,Q as E,a2 as Je,a3 as Qe,a4 as We,a5 as Ze,A as Ke,a6 as _e,J as ue,a7 as et,l as _,r as f,p as R,c as de,o as A,w as c,g as G,q as D,h as w,V as X,i as H,e as ce,t as Ue,L as Re,a8 as pe,a9 as xe,O as Q,aa as Fe,F as Y,I as ne,ab as Be,ac as tt,ad as at,H as Ae,M as lt,ae as nt,af as ot,ag as st,ah as it,_ as rt,u as ut,k as dt,ai as ct,v as ft,m as K,n as ke,a as mt}from"./CcTqgOqe.js";import{m as vt,M as gt}from"./wfaVquSh.js";import{v as bt}from"./DFj-8-jc.js";import{V as ht}from"./DSBdaTuV.js";import{f as Ne}from"./B931MWyl.js";import{b as yt,V as Ve}from"./DH6blgSW.js";const xt=me({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:_e,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...Ke(),...Ze({location:"top end"}),...We(),...Qe(),...Je(),...vt({transition:"scale-rotate-transition"})},"VBadge"),kt=fe()({name:"VBadge",inheritAttrs:!1,props:xt(),setup(e,k){const{backgroundColorClasses:P,backgroundColorStyles:y}=He(ye(e,"color")),{roundedClasses:r}=Ee(e),{t:s}=Pe(),{textColorClasses:u,textColorStyles:i}=Oe(ye(e,"textColor")),{themeClasses:I}=qe(),{locationStyles:N}=Xe(e,!0,m=>(e.floating?e.dot?2:4:e.dot?8:12)+(["top","bottom"].includes(m)?Number(e.offsetY??0):["left","right"].includes(m)?Number(e.offsetX??0):0));return ve(()=>{const m=Number(e.content),x=!e.max||isNaN(m)?e.content:m<=Number(e.max)?m:`${e.max}+`,[v,g]=Ye(k.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return l(e.tag,E({class:["v-badge",{"v-badge--bordered":e.bordered,"v-badge--dot":e.dot,"v-badge--floating":e.floating,"v-badge--inline":e.inline},e.class]},g,{style:e.style}),{default:()=>{var V,b;return[l("div",{class:"v-badge__wrapper"},[(b=(V=k.slots).default)==null?void 0:b.call(V),l(gt,{transition:e.transition},{default:()=>{var d,o;return[ue(l("span",E({class:["v-badge__badge",I.value,P.value,r.value,u.value],style:[y.value,i.value,e.inline?{}:N.value],"aria-atomic":"true","aria-label":s(e.label,m),"aria-live":"polite",role:"status"},v),[e.dot?void 0:k.slots.badge?(o=(d=k.slots).badge)==null?void 0:o.call(d):e.icon?l(_,{icon:e.icon},null):x]),[[et,e.modelValue]])]}})])]}})}),{}}}),Vt={style:{"font-size":"1rem"},class:"text-truncate d-flex justify-center font-weight-light"},Ct={__name:"AddressInput",props:{location:{type:Object,default:()=>({})},blocked:{default:!1}},emits:["updateLocation"],setup(e,{emit:k}){var g,V,b;const P=k,y=e,r=f(!1),s=f(((g=y.location)==null?void 0:g.address)||""),u=f(""),i=f(((V=y.location)==null?void 0:V.latitude)||""),I=f(((b=y.location)==null?void 0:b.longitude)||""),N=R(()=>{var d,o;return(d=y.location)!=null&&d.address?`${(o=y.location)==null?void 0:o.address}`:s.value?`${s.value.city}, ${s.value.state}, ${s.value.country}`:""}),m=()=>{r.value=!0,navigator.geolocation?navigator.geolocation.getCurrentPosition(async d=>{i.value=d.coords.latitude.toFixed(6),I.value=d.coords.longitude.toFixed(6),u.value="",await x()},d=>{console.error(d),s.value="",u.value="Não foi possível obter a localização.",r.value=!1},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0}):(u.value="A API de Geolocalização não é suportada pelo seu navegador.",v())};async function x(){if(i.value&&I.value)try{const d=`https://nominatim.openstreetmap.org/reverse?lat=${i.value}&lon=${I.value}&format=json`,S=await(await fetch(d,{headers:{"User-Agent":"FeaterApp/1.0 (matheus.fdealmeida@hotmail.com)"}})).json();S&&S.address?(s.value={city:S.address.city||S.address.town||S.address.village||"Desconhecida",state:S.address.state||"Desconhecido",country:S.address.country||"Desconhecido"},P("updateLocation",{latitude:i.value,longitude:I.value,address:N.value}),u.value=""):(u.value="Endereço não encontrado",v())}catch{u.value="Erro ao obter o endereço",v()}else u.value="Por favor, insira a latitude e longitude",v();r.value=!1}const v=()=>{s.value="",i.value="",I.value="",r.value=!1,P("updateLocation",{latitude:"",longitude:"",address:""})};return(d,o)=>(A(),de("div",null,[l(ge,null,{default:c(()=>[w(s)?D("",!0):(A(),G(be,{key:0,cols:"12",class:"ma-0 pa-0 w-100 d-flex justify-center"},{default:c(()=>[l(kt,{color:"warning",class:"w-100","offset-x":"8"},{default:c(()=>[l(X,{loading:w(r),onClick:m,block:"",rounded:"xl",class:"w-100",color:"purple-darken-3"},{default:c(()=>[l(_,{class:"mr-2"},{default:c(()=>o[0]||(o[0]=[H(" mdi-map-marker ")])),_:1}),o[1]||(o[1]=H(" OBTER LOCALIZAÇÃO"))]),_:1},8,["loading"])]),_:1})]),_:1}))]),_:1}),l(ge,{"hide-on-leave":""},{default:c(()=>[w(s)?(A(),G(be,{key:0,cols:"12",class:"ma-0 pa-0"},{default:c(()=>[ce("span",Vt,Ue(w(N)),1),y.blocked?D("",!0):(A(),G(X,{key:0,onClick:v,block:"",class:"mt-2",rounded:"xl",variant:"plain",color:"error"},{default:c(()=>[l(_,{class:"mr-2"},{default:c(()=>o[2]||(o[2]=[H(" mdi-map-marker ")])),_:1}),o[3]||(o[3]=H(" remover localização"))]),_:1}))]),_:1})):D("",!0)]),_:1})]))}},wt=me({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,showSize:{type:[Boolean,Number,String],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(Number(e))},...Ie({prependIcon:"$file"}),modelValue:{type:[Array,Object],default:e=>e.multiple?[]:null,validator:e=>pe(e).every(k=>k!=null&&typeof k=="object")},...we({clearable:!0})},"VFileInput"),It=fe()({name:"VFileInput",inheritAttrs:!1,props:wt(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,k){let{attrs:P,emit:y,slots:r}=k;const{t:s}=Pe(),u=Re(e,"modelValue",e.modelValue,t=>pe(t),t=>!e.multiple&&Array.isArray(t)?t[0]:t),{isFocused:i,focus:I,blur:N}=Ce(e),m=R(()=>typeof e.showSize!="boolean"?e.showSize:void 0),x=R(()=>(u.value??[]).reduce((t,n)=>{let{size:a=0}=n;return t+a},0)),v=R(()=>xe(x.value,m.value)),g=R(()=>(u.value??[]).map(t=>{const{name:n="",size:a=0}=t;return e.showSize?`${n} (${xe(a,m.value)})`:n})),V=R(()=>{var n;const t=((n=u.value)==null?void 0:n.length)??0;return e.showSize?s(e.counterSizeString,t,v.value):s(e.counterString,t)}),b=f(),d=f(),o=f(),S=R(()=>i.value||e.active),J=R(()=>["plain","underlined"].includes(e.variant));function O(){var t;o.value!==document.activeElement&&((t=o.value)==null||t.focus()),i.value||I()}function W(t){var n;(n=o.value)==null||n.click()}function z(t){y("mousedown:control",t)}function M(t){var n;(n=o.value)==null||n.click(),y("click:control",t)}function q(t){t.stopPropagation(),O(),ne(()=>{u.value=[],Be(e["onClick:clear"],t)})}function F(t){t.preventDefault()}function U(t){t.preventDefault(),t.dataTransfer&&(u.value=[...t.dataTransfer.files??[]])}return Q(u,t=>{(!Array.isArray(t)||!t.length)&&o.value&&(o.value.value="")}),ve(()=>{const t=!!(r.counter||e.counter),n=!!(t||r.details),[a,C]=Fe(P),{modelValue:B,...T}=oe.filterProps(e),h=se.filterProps(e);return l(oe,E({ref:b,modelValue:e.multiple?u.value:u.value[0],class:["v-file-input",{"v-file-input--chips":!!e.chips,"v-file-input--hide":e.hideInput,"v-input--plain-underlined":J.value},e.class],style:e.style,"onClick:prepend":W},a,T,{centerAffix:!J.value,focused:i.value}),{...r,default:p=>{let{id:$,isDisabled:j,isDirty:Z,isReadonly:ee,isValid:ie}=p;return l(se,E({ref:d,"prepend-icon":e.prependIcon,onMousedown:z,onClick:M,"onClick:clear":q,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},h,{id:$.value,active:S.value||Z.value,dirty:Z.value||e.dirty,disabled:j.value,focused:i.value,error:ie.value===!1,onDragover:F,onDrop:U}),{...r,default:re=>{var le;let{props:{class:te,...ae}}=re;return l(Y,null,[l("input",E({ref:o,type:"file",readonly:ee.value,disabled:j.value,multiple:e.multiple,name:e.name,onClick:L=>{L.stopPropagation(),ee.value&&L.preventDefault(),O()},onChange:L=>{if(!L.target)return;const ze=L.target;u.value=[...ze.files??[]]},onFocus:O,onBlur:N},ae,C),null),l("div",{class:te},[!!((le=u.value)!=null&&le.length)&&!e.hideInput&&(r.selection?r.selection({fileNames:g.value,totalBytes:x.value,totalBytesReadable:v.value}):e.chips?g.value.map(L=>l(yt,{key:L,size:"small",text:L},null)):g.value.join(", "))])])}})},details:n?p=>{var $,j;return l(Y,null,[($=r.details)==null?void 0:$.call(r,p),t&&l(Y,null,[l("span",null,null),l(Se,{active:!!((j=u.value)!=null&&j.length),value:V.value,disabled:e.disabled},r.counter)])])}:void 0})}),Ne({},b,d,o)}}),St=me({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...Ie(),...we()},"VTextarea"),Pt=fe()({name:"VTextarea",directives:{Intersect:Te},inheritAttrs:!1,props:St(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,k){let{attrs:P,emit:y,slots:r}=k;const s=Re(e,"modelValue"),{isFocused:u,focus:i,blur:I}=Ce(e),N=R(()=>typeof e.counterValue=="function"?e.counterValue(s.value):(s.value||"").toString().length),m=R(()=>{if(P.maxlength)return P.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function x(t,n){var a,C;!e.autofocus||!t||(C=(a=n[0].target)==null?void 0:a.focus)==null||C.call(a)}const v=f(),g=f(),V=tt(""),b=f(),d=R(()=>e.persistentPlaceholder||u.value||e.active);function o(){var t;b.value!==document.activeElement&&((t=b.value)==null||t.focus()),u.value||i()}function S(t){o(),y("click:control",t)}function J(t){y("mousedown:control",t)}function O(t){t.stopPropagation(),o(),ne(()=>{s.value="",Be(e["onClick:clear"],t)})}function W(t){var a;const n=t.target;if(s.value=n.value,(a=e.modelModifiers)!=null&&a.trim){const C=[n.selectionStart,n.selectionEnd];ne(()=>{n.selectionStart=C[0],n.selectionEnd=C[1]})}}const z=f(),M=f(Number(e.rows)),q=R(()=>["plain","underlined"].includes(e.variant));at(()=>{e.autoGrow||(M.value=Number(e.rows))});function F(){e.autoGrow&&ne(()=>{if(!z.value||!g.value)return;const t=getComputedStyle(z.value),n=getComputedStyle(g.value.$el),a=parseFloat(t.getPropertyValue("--v-field-padding-top"))+parseFloat(t.getPropertyValue("--v-input-padding-top"))+parseFloat(t.getPropertyValue("--v-field-padding-bottom")),C=z.value.scrollHeight,B=parseFloat(t.lineHeight),T=Math.max(parseFloat(e.rows)*B+a,parseFloat(n.getPropertyValue("--v-input-control-height"))),h=parseFloat(e.maxRows)*B+a||1/0,p=ot(C??0,T,h);M.value=Math.floor((p-a)/B),V.value=nt(p)})}Ae(F),Q(s,F),Q(()=>e.rows,F),Q(()=>e.maxRows,F),Q(()=>e.density,F);let U;return Q(z,t=>{t?(U=new ResizeObserver(F),U.observe(z.value)):U==null||U.disconnect()}),lt(()=>{U==null||U.disconnect()}),ve(()=>{const t=!!(r.counter||e.counter||e.counterValue),n=!!(t||r.details),[a,C]=Fe(P),{modelValue:B,...T}=oe.filterProps(e),h=se.filterProps(e);return l(oe,E({ref:v,modelValue:s.value,"onUpdate:modelValue":p=>s.value=p,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-input--plain-underlined":q.value},e.class],style:e.style},a,T,{centerAffix:M.value===1&&!q.value,focused:u.value}),{...r,default:p=>{let{id:$,isDisabled:j,isDirty:Z,isReadonly:ee,isValid:ie}=p;return l(se,E({ref:g,style:{"--v-textarea-control-height":V.value},onClick:S,onMousedown:J,"onClick:clear":O,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},h,{id:$.value,active:d.value||Z.value,centerAffix:M.value===1&&!q.value,dirty:Z.value||e.dirty,disabled:j.value,focused:u.value,error:ie.value===!1}),{...r,default:re=>{let{props:{class:te,...ae}}=re;return l(Y,null,[e.prefix&&l("span",{class:"v-text-field__prefix"},[e.prefix]),ue(l("textarea",E({ref:b,class:te,value:s.value,onInput:W,autofocus:e.autofocus,readonly:ee.value,disabled:j.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:o,onBlur:I},ae,C),null),[[st("intersect"),{handler:x},null,{once:!0}]]),e.autoGrow&&ue(l("textarea",{class:[te,"v-textarea__sizer"],id:`${ae.id}-sizer`,"onUpdate:modelValue":le=>s.value=le,ref:z,readonly:!0,"aria-hidden":"true"},null),[[it,s.value]]),e.suffix&&l("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:n?p=>{var $;return l(Y,null,[($=r.details)==null?void 0:$.call(r,p),t&&l(Y,null,[l("span",null,null),l(Se,{active:e.persistentCounter||u.value,value:N.value,max:m.value,disabled:e.disabled},r.counter)])])}:void 0})}),Ne({},v,g,b)}}),Ut={key:0,class:"text-truncate"},Rt={__name:"ProfileCard",props:{matchedUser:{type:Object,required:!1}},emits:["close"],setup(e,{emit:k}){var F,U,t;const P=e,y=k,r=ut(),s=dt(),u=(F=ct().params)==null?void 0:F.chatId,i=P.matchedUser||r.user,I=((U=P.matchedUser)==null?void 0:U.id)||((t=r.user)==null?void 0:t.id),N=f(),m=f({id:I}),x=f(),v=f(""),g=f((i==null?void 0:i.name)||"Future Hendrix"),V=f((i==null?void 0:i.bio)||"Bora fazer um som?"),b=f((i==null?void 0:i.favoriteRoles)||[{id:3,name:"Produtor(a) Musical"},{id:6,name:"DJ"}]),d=f((i==null?void 0:i.favoriteGenres)||[{id:3,name:"Hip Hop"},{id:4,name:"R&B"},{id:19,name:"Trap"}]),o=f((i==null?void 0:i.location)||{}),S=R(()=>v.value||i.profileImage||"https://media.gq.com/photos/6255cb439aa7a6f3a12583da/master/w_1600%2Cc_limit/GQ0522_Future_11.jpg");Ae(()=>{});const J=n=>{const a=n.target.files[0];if(!a){v.value="";return}O(a)},O=async n=>{const a=new FileReader;a.onload=C=>{v.value=C.target.result},a.readAsDataURL(n)},W=n=>{o.value=n};function z(){y("close")}function M(){if(m.value={id:I,location:o.value,name:g.value,bio:V.value,profileImage:S.value,favoriteRoles:b.value,favoriteGenres:d.value},!bt(m.value)){s.alertSnackbar("Preencha todos os campos");return}s.updateUser(m.value),s.alertSnackbar("Perfil salvo com sucesso!"),ke("/home")}function q(){ke("/messages"),mt().removeChat(u)}return(n,a)=>{const C=Ct;return A(),de(Y,null,[e.matchedUser?D("",!0):(A(),G(X,{key:0,color:"deep-purple-darken-1",onClick:M,variant:"tonal",class:"save-btn text-white",rounded:"xl"},{default:c(()=>a[8]||(a[8]=[ce("span",{class:"text-white"}," Salvar ",-1)])),_:1})),l(Ge,{class:"w-100 rounded-xl"},{default:c(()=>[l(De,{class:"pt-3 pl-5 font-weight-light text-h4 mb-2 d-flex align-center"},{default:c(()=>{var B;return[e.matchedUser?(A(),de("span",Ut,Ue(((B=e.matchedUser.name)==null?void 0:B.split(" ")[0])||"Perfil"),1)):D("",!0),l(ht),e.matchedUser?(A(),G(X,{key:1,onClick:a[0]||(a[0]=T=>z()),icon:"",rounded:"xl",class:"border",size:"small",variant:"elevated",color:"surface"},{default:c(()=>[l(_,{class:""},{default:c(()=>a[9]||(a[9]=[H(" mdi-chevron-down ")])),_:1})]),_:1})):D("",!0)]}),_:1}),l(Me,{class:"pb-5 px-0"},{default:c(()=>{var B,T;return[l(he,{"no-gutters":"",class:"mb-4"},{default:c(()=>[l($e,{src:w(S),contain:"",transition:"slide-y-reverse-transition",rounded:"xl","max-height":"400","min-height":"200"},null,8,["src"])]),_:1}),e.matchedUser?D("",!0):(A(),G(he,{key:0,"no-gutters":"",class:"mb-4 justify-center"},{default:c(()=>[w(x)?D("",!0):(A(),G(X,{key:0,onClick:a[1]||(a[1]=h=>n.$refs.fileInputRef.click()),block:"",variant:"tonal",rounded:"xl",color:"purple-darken-3"},{default:c(()=>a[10]||(a[10]=[H(" Alterar foto ")])),_:1})),l(X,{onClick:a[2]||(a[2]=()=>{x.value=null,v.value=null}),variant:"tonal",class:ft({"d-none":!w(x)}),rounded:"xl",color:"error",block:""},{default:c(()=>a[11]||(a[11]=[H("Remover foto")])),_:1},8,["class"]),l(It,{readonly:!!e.matchedUser,class:"d-none",ref_key:"fileInputRef",ref:N,"hide-details":"",variant:"solo",flat:"",onChange:J,density:"compact",clearable:!1,modelValue:w(x),"onUpdate:modelValue":a[3]||(a[3]=h=>K(x)?x.value=h:null),accept:"image/*","prepend-icon":""},null,8,["readonly","modelValue"])]),_:1})),l(je,{modelValue:w(g),"onUpdate:modelValue":a[4]||(a[4]=h=>K(g)?g.value=h:null),readonly:!!e.matchedUser,variant:"solo",label:e.matchedUser?"":"Nome",rounded:"xl",class:"mb-3","hide-details":"",outlined:"",dense:""},null,8,["modelValue","readonly","label"]),l(Pt,{label:e.matchedUser?"":"Biografia",rounded:"xl",modelValue:w(V),"onUpdate:modelValue":a[5]||(a[5]=h=>K(V)?V.value=h:null),rules:[h=>h.length<=200||"Máximo: 200 caracteres"],"auto-grow":"",readonly:!!e.matchedUser,variant:"solo",rows:"3",outlined:""},null,8,["label","modelValue","rules","readonly"]),l(Ve,{modelValue:w(b),"onUpdate:modelValue":a[6]||(a[6]=h=>K(b)?b.value=h:null),items:(B=w(s))==null?void 0:B.roles,label:e.matchedUser?"":"Ramos Artísticos",multiple:"",clearable:!e.matchedUser,rounded:"xl","menu-icon":e.matchedUser?"":"$dropdown ",readonly:!!e.matchedUser,"return-object":"","item-title":"name","closable-chips":!e.matchedUser,variant:"solo",chips:"",outlined:"",dense:""},null,8,["modelValue","items","label","clearable","menu-icon","readonly","closable-chips"]),l(Ve,{modelValue:w(d),"onUpdate:modelValue":a[7]||(a[7]=h=>K(d)?d.value=h:null),items:(T=w(s))==null?void 0:T.genres,label:e.matchedUser?"":"Gêneros Musicais",multiple:"",clearable:!e.matchedUser,rounded:"xl","menu-icon":e.matchedUser?"":"$dropdown ",readonly:!!e.matchedUser,"return-object":"","item-title":"name","closable-chips":!e.matchedUser,variant:"solo",chips:"",outlined:"",dense:""},null,8,["modelValue","items","label","clearable","menu-icon","readonly","closable-chips"]),l(C,{onUpdateLocation:W,location:w(o),blocked:!!e.matchedUser},null,8,["location","blocked"])]}),_:1}),e.matchedUser?(A(),G(Le,{key:0},{default:c(()=>[l(X,{block:"",color:"red",variant:"tonal",rounded:"xl",onClick:q},{default:c(()=>[l(_,{class:"mr-2",color:"red"},{default:c(()=>a[12]||(a[12]=[H("mdi-leaf-off")])),_:1}),a[13]||(a[13]=ce("span",null," Remover Feat ",-1))]),_:1})]),_:1})):D("",!0)]),_:1})],64)}}},Dt=rt(Rt,[["__scopeId","data-v-f80f5249"]]);export{Dt as _};

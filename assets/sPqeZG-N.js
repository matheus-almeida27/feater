import{d as z,H as D,M as N,I as A,aR as U,aS as K,j as M,r as R,K as f,A as a,v as d,z as s,B as c,y as p,t as j,O as F,P as O,L as m,$ as E,N as H,aT as P,_ as $}from"./B-haekj4.js";import{V as k,a as w}from"./Ogo7Rtt8.js";import{V as q,a as G}from"./BZ-NPWj9.js";import{V as J}from"./DQwfj6aW.js";import{V as Q}from"./C-ojXM-K.js";import{V as S}from"./CI60m_iN.js";import{V as W}from"./DFN0DKfH.js";import{V as X,a as Y,b as Z,c as ee}from"./B_DntKQQ.js";import{V as te}from"./BtNKlUlo.js";import"./DP4A1fb_.js";import"./oalIv_2G.js";import"./DlWTxv-k.js";import"./DeYrWc4u.js";import"./Cr_TDodh.js";const ae=z({__name:"[chatId]",setup(se){const n=D(),C=N(),y=A(),T=U(),V=K(),b=Number(T.params.chatId),o=y.chats.find(l=>l.id===b);o||V.push("/matches");const i=M(()=>{var e;const l=(e=n.user)==null?void 0:e.id,r=o==null?void 0:o.participants.find(t=>t!==l);return C.users.find(t=>t.id===r)}),u=R("");function B(l){return new Date(l).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}function _(){var r;if(!u.value.trim()||!o)return;const l={id:Date.now(),chatId:o.id,sender:((r=n==null?void 0:n.user)==null?void 0:r.id)||0,text:u.value.trim(),timestamp:new Date().toISOString()};o.messages.push(l),u.value=""}function L(){V.back()}return(l,r)=>(d(),f(k,{fluid:"",class:"fill-height d-flex flex-column pa-0 mx-auto"},{default:a(()=>[s(q,{dark:"",app:"",flat:""},{default:a(()=>[s(J,{icon:"",size:"large",onClick:L},{default:a(()=>[s(Q,null,{default:a(()=>r[1]||(r[1]=[c("mdi-arrow-left")])),_:1})]),_:1}),s(w,{size:"40",class:"ml-3 mr-2"},{default:a(()=>{var e,t;return[s(S,{contain:"",src:((e=i.value)==null?void 0:e.profileImage)||"",alt:(t=i.value)==null?void 0:t.name},null,8,["src","alt"])]}),_:1}),s(G,{class:"font-weight-light"},{default:a(()=>{var e;return[c(p(((e=i.value)==null?void 0:e.name)||"Chat"),1)]}),_:1})]),_:1}),s(W,{cols:"12",lg:"6",md:"8",class:"d-flex justify-center"},{default:a(()=>[s(k,{fluid:"",class:"overflow-y-auto h-100 d-flex flex-column align-center"},{default:a(()=>[s(X,{class:"pa-0 bg-transparent w-100","two-line":""},{default:a(()=>{var e;return[(d(!0),j(F,null,O(((e=m(o))==null?void 0:e.messages)||[],t=>{var g,h;return d(),f(Y,{key:t.id,class:E([{sent:t.sender===((g=m(n).user)==null?void 0:g.id),received:t.sender!==((h=m(n).user)==null?void 0:h.id)},"message-item"])},{default:a(()=>{var I;return[t.sender!==((I=m(n).user)==null?void 0:I.id)?(d(),f(w,{key:0,size:"30",class:"mr-1"},{default:a(()=>{var v,x;return[s(S,{contain:"",src:((v=i.value)==null?void 0:v.profileImage)||"",alt:(x=i.value)==null?void 0:x.name},null,8,["src","alt"])]}),_:1})):H("",!0),s(Z,{class:"message-text"},{default:a(()=>[c(p(t.text),1)]),_:2},1024),s(ee,{class:"message-time"},{default:a(()=>[c(p(B(t.timestamp)),1)]),_:2},1024)]}),_:2},1032,["class"])}),128))]}),_:1}),s(te,{modelValue:u.value,"onUpdate:modelValue":r[0]||(r[0]=e=>u.value=e),placeholder:"Digite sua mensagem...",variant:"solo-filled",density:"comfortable",rounded:"xl",class:"container-input",height:"30","hide-details":"",color:"purple-darken-3",onKeyup:P(_,["enter"]),"append-inner-icon":"mdi-send","onClick:appendInner":_},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}))}}),he=$(ae,[["__scopeId","data-v-f8458777"]]);export{he as default};

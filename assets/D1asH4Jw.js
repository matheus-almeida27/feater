import{_ as q}from"./CZ6O-Z0i.js";import{d as J,y as P,u as G,k as Q,a as W,r as v,H as X,I as Y,q as Z,J as ee,K as b,c as u,b as s,w as a,p as B,h as n,F as D,o as c,L as te,V as se,m as S,i as _,t as w,R as ae,x as M,v as oe,s as k,e as f,M as ne,n as le,_ as ie}from"./3IrZD_pa.js";import{V as re,a as U}from"./4ZpjlLR7.js";import{V as de,a as ue}from"./Fp9XT2w7.js";import{V as ce}from"./BuN1Z4Vo.js";import{V as N,a as me}from"./CH7B2uz2.js";import{V as pe}from"./BoHltSv_.js";import{a as R,f as fe}from"./_zjfe_JH.js";import{V as ge}from"./NUaZe0XA.js";import"./C_jzxlMg.js";import"./BSdXjkqF.js";import"./CUDmOMGI.js";import"./DOsxrUzH.js";import"./B931MWyl.js";import"./B6DE5s67.js";import"./C48K1Q1o.js";import"./QVnX6Ndp.js";const ve=["id"],he={key:0,class:"message-time"},_e={key:0,class:"typing-indicator received"},Ve={class:"input-wrapper"},xe=J({__name:"[chatId]",setup(ye){const{smAndUp:z}=P(),m=G(),j=Q(),A=W(),g=v(!1),V=v(!1),F=v(),L=X(),E=Y(),K=Number(L.params.chatId),x=v(!1),l=A.chats.find(r=>r.id===K);l||E.push("/matches");const d=Z(()=>{var i;const r=(i=m.user)==null?void 0:i.id,e=l==null?void 0:l.participants.find(t=>t!==r);return j.users.find(t=>t.id===e)}),p=v("");let h;function $(r){const e=new Date(r),i={day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"};return e.toLocaleString("pt-BR",i)}function I(){var e;if(!p.value.trim()||!l)return;const r={id:Date.now(),chatId:l.id,sender:((e=m==null?void 0:m.user)==null?void 0:e.id)||0,text:p.value.trim(),timestamp:new Date().toISOString()};l.messages.push(r),p.value="",setTimeout(()=>{x.value=!0,setTimeout(()=>{x.value=!1,setTimeout(()=>{var o;const i=["Não sei mano","Beleza, bora então","Mas antes bora f1 então","Claro!","Com certeza meu mano","vambora cpx!"],t={id:Date.now()+1,chatId:l.id,sender:((o=d.value)==null?void 0:o.id)||0,text:i[Math.floor(Math.random()*i.length)],timestamp:new Date().toISOString()};l.messages.push(t)},1e3),y()},3e3)},1e3),y()}function y(){b(()=>{h&&h.scrollTo(0,h.scrollHeight)})}function H(){d.value&&(F.value=d.value.id,g.value=!0)}function O(){le("/messages")}return ee(()=>{b(()=>{h=document.getElementById("message_container"),y()})}),(r,e)=>{const i=q;return c(),u(D,null,[s(de,{dark:"",app:"",flat:"",style:{background:"transparent",backdropFilter:"blur(15px)"}},{default:a(()=>[s(se,{icon:"",size:"large",onClick:O},{default:a(()=>[s(S,null,{default:a(()=>e[4]||(e[4]=[_("mdi-arrow-left")])),_:1})]),_:1}),te((c(),u("div",{onClick:H,class:"d-flex w-100 h-100 align-center cursor-pointer rounde-pill"},[s(me,{size:"40",class:"ml-0 mr-3"},{default:a(()=>{var t,o;return[s(re,{contain:"",src:((t=n(d))==null?void 0:t.profileImage)||"",alt:(o=n(d))==null?void 0:o.name},null,8,["src","alt"])]}),_:1}),s(ue,{class:"font-weight-light"},{default:a(()=>{var t;return[_(w(((t=n(d))==null?void 0:t.name)||"Chat"),1)]}),_:1})])),[[ae,!0]])]),_:1}),s(ce,{modelValue:n(g),"onUpdate:modelValue":e[1]||(e[1]=t=>B(g)?g.value=t:null),transition:"dialog-bottom-transition","content-class":"bg-surface fill-height justify-center align-center",class:"justify-center align-center",fullscreen:""},{default:a(()=>[s(N,{fluid:"",class:M(["d-flex align-center flex-column pa-0 fill-height overflow-y-scroll",{"justify-center":n(z)}])},{default:a(()=>[s(R,{cols:"12",sm:"8",md:"8",lg:"5",xl:"4",class:"d-flex align-center px-1 pt-0 justify-center flex-column"},{default:a(()=>[s(i,{matchedUser:n(d),onClose:e[0]||(e[0]=t=>g.value=!1)},null,8,["matchedUser"])]),_:1})]),_:1},8,["class"])]),_:1},8,["modelValue"]),s(N,{fluid:"",class:"d-flex align-center flex-column pa-0 message-container"},{default:a(()=>[s(R,{cols:"12",lg:"6",md:"8",sm:"10",class:"d-flex justify-center"},{default:a(()=>[s(ge,{class:"pa-0 bg-transparent w-100","two-line":""},{default:a(()=>{var t;return[(c(!0),u(D,null,oe(((t=n(l))==null?void 0:t.messages)||[],o=>{var C,T;return c(),u("div",{key:o.id,id:`${o.id}`,class:M([{sent:o.sender===((C=n(m).user)==null?void 0:C.id),received:o.sender!==((T=n(m).user)==null?void 0:T.id)},"message-item"])},[o.text?(c(),u("div",{key:0,class:"message-text",onClick:e[2]||(e[2]=we=>V.value=!n(V))},[_(w(o.text)+" ",1),s(U,null,{default:a(()=>[n(V)?(c(),u("div",he,w($(o.timestamp)),1)):k("",!0)]),_:2},1024)])):k("",!0)],10,ve)}),128)),s(U,null,{default:a(()=>[n(x)?(c(),u("div",_e,e[5]||(e[5]=[f("div",{class:"dots"},[f("span"),f("span"),f("span")],-1)]))):k("",!0)]),_:1})]}),_:1})]),_:1})]),_:1}),s(pe,{app:"",class:"glass-effect",height:"auto"},{default:a(()=>[f("div",Ve,[s(fe,{modelValue:n(p),"onUpdate:modelValue":e[3]||(e[3]=t=>B(p)?p.value=t:null),placeholder:"Digite sua mensagem...",variant:"solo-filled",density:"comfortable",rounded:"xl",class:"container-input",height:"30","hide-details":"",color:"purple-darken-3",onKeyup:ne(I,["enter"])},{append:a(()=>[f("div",{onClick:I,class:"d-flex pa-2 rounded-circle bg-purple"},[s(S,{size:"23",color:"#fff"},{default:a(()=>e[6]||(e[6]=[_("mdi-send")])),_:1})])]),_:1},8,["modelValue"])])]),_:1})],64)}}}),Ee=ie(xe,[["__scopeId","data-v-9d2ac43f"]]);export{Ee as default};

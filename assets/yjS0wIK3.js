import{d as G,u as ee,a as le,c as j,o as c,b as e,w as t,V as B,T as _e,e as v,f as he,g as L,h as d,t as T,i as R,n as ye,_ as K,j as re,r as C,k as P,l as E,m as W,p as U,F as q,q as Y,s as O,v as xe}from"./C75BwEh1.js";import{V as te,a as ae}from"./BeEibhVZ.js";import{V as S,a as F,b as be,c as Ve,d as ke}from"./98J4ltyg.js";import{V as Z,a as ie,b as Ce}from"./_IDFdliH.js";import{u as se,V as oe,_ as we}from"./DdSaGA4g.js";import{V as je}from"./vbEh1GO7.js";import{g as Ie}from"./CnGFKR8i.js";import{V as J}from"./BmChwtep.js";import"./61Bw-Vqo.js";import"./CJLmjtDf.js";import"./B931MWyl.js";import"./BEpTXW0F.js";import"./DWRZsj9s.js";import"./2yX8GmLc.js";const Me={class:"match-dialog"},Se=G({__name:"MatchDialogContent",props:{matchInfo:{type:Object,default:()=>null}},emits:["close"],setup(y,{emit:x}){var $,n,o;const g=ee(),i=le(),b=y,D=(($=g.user)==null?void 0:$.profileImage)||"",h=x,I=((o=(n=b.matchInfo)==null?void 0:n.name)==null?void 0:o.split(" ")[0])+" também curtiu você!";function f(){const a=i.chats.find(l=>{var m;return l.participants.includes(Number(b.matchInfo.id))&&l.participants.includes(Number((m=g==null?void 0:g.user)==null?void 0:m.id))});h("close"),ye(`/messages/${a==null?void 0:a.id}`)}return(a,l)=>(c(),j("div",Me,[e(te,{"fill-height":""},{default:t(()=>[e(B,{variant:"text",rounded:"xl",class:"position-absolute top-0 right-0 mr-3 mt-3",icon:"mdi-close",onClick:l[0]||(l[0]=m=>a.$emit("close"))}),e(S,{align:"center",justify:"center"},{default:t(()=>[e(F,{cols:"12",class:"text-center"},{default:t(()=>[e(_e,{name:"fade"},{default:t(()=>l[1]||(l[1]=[v("div",{class:"match-header"},[v("h2",null,"É um feat!")],-1)])),_:1})]),_:1})]),_:1}),e(S,{align:"center",justify:"center"},{default:t(()=>[e(F,{cols:"12",md:"6",class:"d-flex justify-center"},{default:t(()=>[e(he,{name:"slide-fade",mode:"out-in",tag:"div",class:"avatars"},{default:t(()=>[(c(),L(ae,{size:"150",class:"mx-2",key:"userPhoto"},{default:t(()=>[e(Z,{contain:"",transition:"slide-x-transition",height:"150",width:"150",src:d(D),alt:"Sua foto"},null,8,["src"])]),_:1})),(c(),L(ae,{size:"150",class:"mx-2",key:"matchPhoto"},{default:t(()=>{var m;return[e(Z,{contain:"",transition:"slide-x-reverse-transition",height:"150",width:"150",src:(m=y.matchInfo)==null?void 0:m.profileImage,alt:"Foto do match"},null,8,["src"])]}),_:1}))]),_:1})]),_:1})]),_:1}),e(S,{align:"center",justify:"center"},{default:t(()=>[e(F,{cols:"12",class:"text-center"},{default:t(()=>[v("p",{class:"collaboration-text"},T(I)),l[2]||(l[2]=v("p",{class:"collaboration-text"},"Que tal criar uma música juntos?",-1))]),_:1})]),_:1}),e(S,{align:"center",justify:"center"},{default:t(()=>[e(F,{cols:"12",class:"text-center"},{default:t(()=>[e(B,{class:"ma-4 border",style:{color:"#fff",background:"#170015"},variant:"elevated",rounded:"xl",size:"x-large",onClick:f},{default:t(()=>l[3]||(l[3]=[R(" Enviar Mensagem ")])),_:1})]),_:1})]),_:1})]),_:1})]))}}),$e=K(Se,[["__scopeId","data-v-d73bf81b"]]),Re=G({__name:"FiltersDialogContent",emits:["close"],setup(y,{emit:x}){const g=x,i=se(),b=re(),D=C(i.nearbyUsers),h=C(i.genres),I=C(i.roles),f=()=>{i.nearbyUsers=D.value,i.genres=h.value,i.roles=I.value,g("close"),b.alertSnackbar("Filtros aplicados!")};return($,n)=>(c(),L(F,{cols:"12",md:"8",lg:"6",xl:"4",class:"d-flex ma-0 pa-0 justify-center align-center"},{default:t(()=>[e(be,{class:"w-100 rounded-xl"},{default:t(()=>[e(Ve,{class:"pt-3 pl-5 font-weight-light text-h5 mb-2 d-flex align-center"},{default:t(()=>[n[5]||(n[5]=v("span",{class:"text-truncate"}," Filtros ",-1)),e(je),e(B,{onClick:n[0]||(n[0]=o=>g("close")),icon:"",rounded:"xl",size:"small",variant:"elevated",color:""},{default:t(()=>[e(P,{size:"30",class:""},{default:t(()=>n[4]||(n[4]=[R(" mdi-close ")])),_:1})]),_:1})]),_:1}),e(ke,{class:"pb-1 px-0 d-flex flex-column justify-center align-center"},{default:t(()=>[e(S,{"no-gutters":"",class:"justify-center align-center mb-2"},{default:t(()=>n[6]||(n[6]=[v("div",{class:"d-flex w-100 align-center justify-center pa-3 mx-8 nearby_warn"},[v("span",{class:"text-center font-weight-light"}," Por padrão, nós mostramos primeiro os usuários mais próximos em relação à você")],-1)])),_:1}),e(S,{"no-gutters":"",class:"w-100 justify-center align-center mb-6 px-6"},{default:t(()=>{var o;return[e(oe,{modelValue:d(I),"onUpdate:modelValue":n[1]||(n[1]=a=>E(I)?I.value=a:null),items:(o=d(b))==null?void 0:o.roles,label:"Ramos Artísticos",multiple:"",rounded:"xl","hide-details":"","return-object":"",clearable:"","item-title":"name",variant:"solo",chips:"",outlined:"",dense:""},null,8,["modelValue","items"])]}),_:1}),e(S,{"no-gutters":"",class:"w-100 justify-center align-center mb-6 px-6"},{default:t(()=>{var o;return[e(oe,{modelValue:d(h),"onUpdate:modelValue":n[2]||(n[2]=a=>E(h)?h.value=a:null),items:(o=d(b))==null?void 0:o.genres,label:"Gêneros Musicais",multiple:"",rounded:"xl","hide-details":"",clearable:"","return-object":"","item-title":"name",variant:"solo",chips:"",outlined:"",dense:""},null,8,["modelValue","items"])]}),_:1}),e(S,{"no-gutters":"",class:"w-100 justify-center align-center mb-4 px-6"},{default:t(()=>[e(B,{onClick:n[3]||(n[3]=o=>f()),block:"",rounded:"xl",variant:"elevated",color:"purple-darken-1"},{default:t(()=>n[7]||(n[7]=[R(" Aplicar ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}}),Le=K(Re,[["__scopeId","data-v-4b7d083d"]]),De={class:"inner-card"},Fe={class:"card-content"},Te={class:"card-name"},Ue={class:"card-address font-weight-regular"},Be={class:"card-address text-purple-accent-2 font-weight-light mt-1 mb-2"},Ee={class:"card-genres"},Ge={class:"card-genres"},Xe=G({__name:"InnerCardStack",props:{card:{type:Object,required:!0},showBio:{type:Boolean,default:!1}},setup(y){const x=se(),g=y,i=ee().user,b=W(()=>g.card.favoriteRoles||[]),D=W(()=>g.card.favoriteGenres||[]),h=o=>i==null?void 0:i.favoriteRoles.some(a=>a.id==o.id),I=o=>i==null?void 0:i.favoriteGenres.some(a=>a.id==o.id),f=o=>x==null?void 0:x.roles.some(a=>a.id==o.id),$=o=>x==null?void 0:x.genres.some(a=>a.id==o.id),n=Ie(g.card);return(o,a)=>(c(),j("div",De,[v("div",Fe,[y.card.profileImage?(c(),L(Z,{key:0,draggable:"false",src:y.card.profileImage,cover:"",alt:"Imagem",class:"card-img"},null,8,["src"])):U("",!0),v("p",Te,T(y.card.name),1),v("p",Ue,T(y.card.location.address),1),v("p",Be,[e(P,{size:"20",class:"mr-1 mt-n1"},{default:t(()=>a[0]||(a[0]=[R(" mdi-airplane ")])),_:1}),R(T(d(n)),1)]),v("div",Ee,[(c(!0),j(q,null,Y(d(b),(l,m)=>(c(),j("span",{key:m,class:O(["genre-tag border mb-2 ",{"is-favorite":h(l),"in-filter":f(l)}])},T(l.name),3))),128))]),v("div",Ge,[(c(!0),j(q,null,Y(d(D),(l,m)=>(c(),j("span",{key:m,class:O(["genre-tag border mb-2 ",{"is-favorite":I(l),"in-filter":$(l)}])},T(l.name),3))),128))])]),e(ie,null,{default:t(()=>[y.showBio?U("",!0):(c(),L(S,{key:0,"no-gutters":"",class:"justify-center"},{default:t(()=>[e(P,{class:"mt-1",size:"25"},{default:t(()=>a[1]||(a[1]=[R("mdi-chevron-up")])),_:1})]),_:1}))]),_:1})]))}}),ze=K(Xe,[["__scopeId","data-v-889810ba"]]),Ae={class:"card-stack w-100"},Ne={key:0,class:"text-center justify-center align-center d-flex"},Pe=["onMousedown","onTouchstart"],qe={key:0,class:"d-flex w-100 justify-center align-center"},Oe=G({__name:"SwiperStack",emits:["swipe"],setup(y,{emit:x}){const{smAndUp:g}=xe(),i=re(),b=ee(),D=le(),h=se(),I=C(i.users),f=C(!1);C(!1);const $=W(()=>{const r=b.user;if(!r)return[];const{latitude:s,longitude:w}=r.location;return I.value.filter(_=>_.id!==r.id).map(_=>{const M=de(s,w,_.location.latitude,_.location.longitude),u=h.genres.length?_.favoriteGenres.filter(k=>h.genres.some(H=>H.id===k.id)).length:0,p=h.roles.length?_.favoriteRoles.filter(k=>h.roles.some(H=>H.id===k.id)).length:0;return{..._,distance:M,commonGenresCount:u,commonRolesCount:p}}).sort((_,M)=>{const u=_.commonGenresCount+_.commonRolesCount,p=M.commonGenresCount+M.commonRolesCount;return u>0!=p>0?p>0?1:-1:u!==p?p-u:_.distance-M.distance})}),n=C([...$.value]),o=C(!1),a=C(!1);let l=0,m=0,X=!1,V=C();const Q=C(),ce=C(),ue=()=>{f.value=!f.value};function ne(r,s){s===0&&(V.value=document.querySelector("#innerCardRef"),X=!0,l=r.type.includes("touch")?r.touches[0].clientX:r.clientX,m=l,document.addEventListener("mousemove",z),document.addEventListener("touchmove",z),document.addEventListener("mouseup",A),document.addEventListener("touchend",A))}function z(r){if(!X)return;m=r.type.includes("touch")?r.touches[0].clientX:r.clientX;const s=m-l;V.value.style.transform=`translateX(${s}px) rotate(${s/10}deg)`,V.value.style.opacity=1-Math.abs(s)/300}function A(){if(!X)return;X=!1;const r=m-l;if(Math.abs(r)>20&&m!=l)if(Math.abs(r)>100){const s=r>0?"R":"L";f.value=!1;const w=n.value[0];ce.value={direction:s,card:w},s=="R"?b.addLikedUser(w.id):b.rmvLikedUser(w.id),V.value.style.transition="transform 0.3s, opacity 0.3s",V.value.style.transform=`translateX(${r>0?500:-500}px)`,V.value.style.opacity=0,setTimeout(()=>{n.value.shift(),f.value=!1,s=="R"&&fe(w)},200)}else V.value.style.transition="transform 0.3s, opacity 0.3s",V.value.style.transform="translateX(0)",V.value.style.opacity=1;else V.value.style.transition="transform 0.3s, opacity 0.3s",V.value.style.transform="translateX(0)",V.value.style.opacity=1;document.removeEventListener("mousemove",z),document.removeEventListener("touchmove",z),document.removeEventListener("mouseup",A),document.removeEventListener("touchend",A)}function de(r,s,w,N){const M=(w-r)*Math.PI/180,u=(N-s)*Math.PI/180,p=Math.sin(M/2)*Math.sin(M/2)+Math.cos(r*Math.PI/180)*Math.cos(w*Math.PI/180)*Math.sin(u/2)*Math.sin(u/2);return 6371*(2*Math.atan2(Math.sqrt(p),Math.sqrt(1-p)))}function me(){n.value=$.value}const fe=r=>{Q.value=r,D.createChat(r),o.value=!0},pe=()=>{a.value=!0},ve=()=>{n.value=$.value,a.value=!1},ge=()=>{o.value=!1,Q.value=null};return(r,s)=>{const w=$e,N=Le,_=ze,M=we;return c(),j(q,null,[e(B,{onClick:pe,variant:"text",class:"filters-btn",icon:""},{default:t(()=>[e(P,{color:"#fff"},{default:t(()=>s[6]||(s[6]=[R("mdi-tune-variant")])),_:1})]),_:1}),v("div",Ae,[e(J,{modelValue:d(o),"onUpdate:modelValue":s[0]||(s[0]=u=>E(o)?o.value=u:null),fullscreen:"",persistent:""},{default:t(()=>[d(o)?(c(),L(w,{key:0,"match-info":d(Q),onClose:ge},null,8,["match-info"])):U("",!0)]),_:1},8,["modelValue"]),e(J,{modelValue:d(a),"onUpdate:modelValue":s[1]||(s[1]=u=>E(a)?a.value=u:null),persistent:"","content-class":"d-flex justify-center align-center"},{default:t(()=>[e(N,{onClose:ve})]),_:1},8,["modelValue"]),e(Ce,{"hide-on-leave":""},{default:t(()=>[d(n).length?U("",!0):(c(),j("div",Ne,[e(B,{class:"ma-2",size:"120",variant:"tonal",icon:"",color:"purple-darken-4",onClick:s[2]||(s[2]=u=>me())},{default:t(()=>s[7]||(s[7]=[R("Resetar "),v("br",null,null,-1),R("Stack")])),_:1})]))]),_:1}),(c(!0),j(q,null,Y(d(n),(u,p)=>(c(),j("div",{class:O(["card",{"card-active":p===0}]),key:u.id,onMousedown:k=>ne(k,p),onTouchstart:k=>ne(k,p)},[e(ie,null,{default:t(()=>[p===0?(c(),j("div",qe,[e(_,{id:"innerCardRef",onClick:s[3]||(s[3]=k=>ue()),card:u,"show-bio":d(f)},null,8,["card","show-bio"]),e(J,{modelValue:d(f),"onUpdate:modelValue":s[5]||(s[5]=k=>E(f)?f.value=k:null),transition:"dialog-bottom-transition","content-class":"bg-surface fill-height justify-center align-center",class:"justify-center align-center",fullscreen:""},{default:t(()=>[p===0?(c(),L(te,{key:0,fluid:"",class:O(["d-flex align-center flex-column pa-0 fill-height overflow-y-scroll",{"justify-center":d(g)}])},{default:t(()=>[e(F,{cols:"12",sm:"8",md:"8",lg:"5",xl:"4",class:"d-flex align-center px-1 pt-0 justify-center flex-column"},{default:t(()=>[e(M,{matchedUser:u,onClose:s[4]||(s[4]=k=>f.value=!1)},null,8,["matchedUser"])]),_:2},1024)]),_:2},1032,["class"])):U("",!0)]),_:2},1032,["modelValue"])])):U("",!0)]),_:2},1024)],42,Pe))),128))])],64)}}}),Ke=K(Oe,[["__scopeId","data-v-352fc01f"]]),it=G({__name:"home",setup(y){return(x,g)=>{const i=Ke;return c(),L(te,{fluid:"",class:"fill-height"},{default:t(()=>[e(S,{align:"center",justify:"center",class:"fill-height"},{default:t(()=>[e(F,{cols:"12",sm:"8",md:"6",lg:"4",xl:"3",class:"fill-height justify-center align-center d-flex"},{default:t(()=>[e(i)]),_:1})]),_:1})]),_:1})}}});export{it as default};

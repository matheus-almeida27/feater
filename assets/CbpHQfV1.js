import{d as Q,H as ie,I as he,t as I,v as m,z as e,A as t,T as ke,x as w,J as xe,K as L,L as k,y as z,B as P,n as be,_ as ce,M as Ve,N as Ce,O as we,P as de,r as S,Q as Se,j as q,R as Ie,S as Me,U as me,V as O,W as ue,X as J,Y as A,Z as ae,$ as ne}from"./Bl3r4upV.js";import{V as _e,a as fe}from"./DQfsoG5G.js";import{V as X,u as je,L as Re,a as $e}from"./oUzMfKMI.js";import{V as R,a as E,u as Le,b as ve,m as Be,c as Pe,d as De,e as Fe}from"./ChWetMKM.js";import{V as oe,a as Te,b as ye,c as le}from"./lZMjZEwB.js";import{V as Ue}from"./EZ4cc5MS.js";import{V as K}from"./u__e0LdV.js";import{V as ge,m as ze,a as Ee}from"./BcMC0oom.js";import{u as Ae}from"./BkQ820Tb.js";import{V as pe}from"./0tzVhvNA.js";import"./DBpTZaCV.js";import"./DhafjAVd.js";import"./DnGHFESK.js";import"./BNeT_lld.js";const Xe={class:"match-dialog"},Ge=Q({__name:"MatchDialogContent",props:{matchInfo:{type:Object,default:()=>null}},emits:["close"],setup(s,{emit:M}){var a,r,x;const u=ie(),l=he(),f=s,v=((a=u.user)==null?void 0:a.profileImage)||"",j=M,g=((x=(r=f.matchInfo)==null?void 0:r.name)==null?void 0:x.split(" ")[0])+" também curtiu você!";function h(){const b=l.chats.find(d=>{var V;return d.participants.includes(Number(f.matchInfo.id))&&d.participants.includes(Number((V=u==null?void 0:u.user)==null?void 0:V.id))});j("close"),be(`/messages/${b==null?void 0:b.id}`)}return(b,d)=>(m(),I("div",Xe,[e(_e,{"fill-height":""},{default:t(()=>[e(X,{variant:"text",rounded:"xl",class:"position-absolute top-0 right-0 mr-3 mt-3",icon:"mdi-close",onClick:d[0]||(d[0]=V=>b.$emit("close"))}),e(R,{align:"center",justify:"center"},{default:t(()=>[e(E,{cols:"12",class:"text-center"},{default:t(()=>[e(ke,{name:"fade"},{default:t(()=>d[1]||(d[1]=[w("div",{class:"match-header"},[w("h2",null,"É um feat!")],-1)])),_:1})]),_:1})]),_:1}),e(R,{align:"center",justify:"center"},{default:t(()=>[e(E,{cols:"12",md:"6",class:"d-flex justify-center"},{default:t(()=>[e(xe,{name:"slide-fade",mode:"out-in",tag:"div",class:"avatars"},{default:t(()=>[(m(),L(fe,{size:"150",class:"mx-2",key:"userPhoto"},{default:t(()=>[e(oe,{contain:"",transition:"slide-x-transition",height:"150",width:"150",src:k(v),alt:"Sua foto"},null,8,["src"])]),_:1})),(m(),L(fe,{size:"150",class:"mx-2",key:"matchPhoto"},{default:t(()=>{var V;return[e(oe,{contain:"",transition:"slide-x-reverse-transition",height:"150",width:"150",src:(V=s.matchInfo)==null?void 0:V.profileImage,alt:"Foto do match"},null,8,["src"])]}),_:1}))]),_:1})]),_:1})]),_:1}),e(R,{align:"center",justify:"center"},{default:t(()=>[e(E,{cols:"12",class:"text-center"},{default:t(()=>[w("p",{class:"collaboration-text"},z(g)),d[2]||(d[2]=w("p",{class:"collaboration-text"},"Que tal criar uma música juntos?",-1))]),_:1})]),_:1}),e(R,{align:"center",justify:"center"},{default:t(()=>[e(E,{cols:"12",class:"text-center"},{default:t(()=>[e(X,{class:"ma-4 border",style:{color:"#fff",background:"#170015"},variant:"elevated",rounded:"xl",size:"x-large",onClick:h},{default:t(()=>d[3]||(d[3]=[P(" Enviar Mensagem ")])),_:1})]),_:1})]),_:1})]),_:1})]))}}),Ne=ce(Ge,[["__scopeId","data-v-d73bf81b"]]),re=Ve("filters",{state:()=>({nearbyUsers:!0,genres:[],roles:[]}),actions:{}}),qe=we({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...Be(),...ze()},"VSwitch"),Oe=Ce()({name:"VSwitch",inheritAttrs:!1,props:qe(),emits:{"update:focused":s=>!0,"update:modelValue":s=>!0,"update:indeterminate":s=>!0},setup(s,M){let{attrs:u,slots:l}=M;const f=de(s,"indeterminate"),v=de(s,"modelValue"),{loaderClasses:j}=je(s),{isFocused:g,focus:h,blur:a}=Le(s),r=S(),x=Se&&window.matchMedia("(forced-colors: active)").matches,b=q(()=>typeof s.loading=="string"&&s.loading!==""?s.loading:s.color),d=Ie(),V=q(()=>s.id||`switch-${d}`);function _(){f.value&&(f.value=!1)}function G(D){var F,B;D.stopPropagation(),D.preventDefault(),(B=(F=r.value)==null?void 0:F.input)==null||B.click()}return Ae(()=>{const[D,F]=Me(u),B=ve.filterProps(s),T=ge.filterProps(s);return e(ve,me({class:["v-switch",{"v-switch--flat":s.flat},{"v-switch--inset":s.inset},{"v-switch--indeterminate":f.value},j.value,s.class]},D,B,{modelValue:v.value,"onUpdate:modelValue":$=>v.value=$,id:V.value,focused:g.value,style:s.style}),{...l,default:$=>{let{id:Y,messagesId:Z,isDisabled:ee,isReadonly:te,isValid:W}=$;const N={model:v,isValid:W};return e(ge,me({ref:r},T,{modelValue:v.value,"onUpdate:modelValue":[o=>v.value=o,_],id:Y.value,"aria-describedby":Z.value,type:"checkbox","aria-checked":f.value?"mixed":void 0,disabled:ee.value,readonly:te.value,onFocus:h,onBlur:a},F),{...l,default:o=>{let{backgroundColorClasses:n,backgroundColorStyles:i}=o;return e("div",{class:["v-switch__track",x?void 0:n.value],style:i.value,onClick:G},[l["track-true"]&&e("div",{key:"prepend",class:"v-switch__track-true"},[l["track-true"](N)]),l["track-false"]&&e("div",{key:"append",class:"v-switch__track-false"},[l["track-false"](N)])])},input:o=>{let{inputNode:n,icon:i,backgroundColorClasses:U,backgroundColorStyles:p}=o;return e(O,null,[n,e("div",{class:["v-switch__thumb",{"v-switch__thumb--filled":i||s.loading},s.inset||x?void 0:U.value],style:s.inset?void 0:p.value},[l.thumb?e(Te,{defaults:{VIcon:{icon:i,size:"x-small"}}},{default:()=>[l.thumb({...N,icon:i})]}):e(ye,null,{default:()=>[s.loading?e(Re,{name:"v-switch",active:!0,color:W.value===!1?void 0:b.value},{default:c=>l.loader?l.loader(c):e($e,{active:c.isActive,color:c.color,indeterminate:!0,size:"16",width:"2"},null)}):i&&e(K,{key:String(i),icon:i,size:"x-small"},null)]})])])}})}})}),{}}}),Qe=Q({__name:"FiltersDialogContent",emits:["close"],setup(s,{emit:M}){const u=M,l=S(re().nearbyUsers),f=S([]),v=ue(),j=re(),g=()=>{j.nearbyUsers=l.value,j.genres=f.value,u("close")};return(h,a)=>(m(),L(E,{cols:"12",md:"8",lg:"6",xl:"4",class:"d-flex ma-0 pa-0 justify-center align-center"},{default:t(()=>[e(Pe,{class:"w-100 rounded-xl"},{default:t(()=>[e(De,{class:"pt-3 pl-5 font-weight-light text-h5 mb-2 d-flex align-center"},{default:t(()=>[a[5]||(a[5]=w("span",{class:"text-truncate"}," Filtros ",-1)),e(Ue),e(X,{onClick:a[0]||(a[0]=r=>u("close")),icon:"",rounded:"xl",size:"small",variant:"elevated",color:""},{default:t(()=>[e(K,{size:"30",class:""},{default:t(()=>a[4]||(a[4]=[P(" mdi-close ")])),_:1})]),_:1})]),_:1}),e(Fe,{class:"pb-1 px-0 d-flex flex-column justify-center align-center"},{default:t(()=>[e(R,{"no-gutters":"",class:"justify-center align-center mb-2"},{default:t(()=>[e(Oe,{modelValue:k(l),"onUpdate:modelValue":a[1]||(a[1]=r=>J(l)?l.value=r:null),"label-class":k(l)?"text-purple":"text-grey",class:"mb-4","hide-details":"",color:"purple-darken-1",label:"Filtrar por usuários mais próximos"},null,8,["modelValue","label-class"])]),_:1}),e(R,{"no-gutters":"",class:"w-100 justify-center align-center mb-6 px-6"},{default:t(()=>{var r;return[e(Ee,{modelValue:k(f),"onUpdate:modelValue":a[2]||(a[2]=x=>J(f)?f.value=x:null),items:(r=k(v))==null?void 0:r.genres,label:"Gêneros Musicais",multiple:"",rounded:"xl","hide-details":"","return-object":"","item-title":"name",variant:"solo",chips:"",outlined:"",dense:""},null,8,["modelValue","items"])]}),_:1}),e(R,{"no-gutters":"",class:"w-100 justify-center align-center mb-4 px-6"},{default:t(()=>[e(X,{onClick:a[3]||(a[3]=r=>g()),block:"",rounded:"xl",variant:"elevated",color:"purple-darken-1"},{default:t(()=>a[6]||(a[6]=[P(" Aplicar ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}}),We={class:"inner-card"},He={class:"card-content"},Je={class:"card-name"},Ke={class:"card-address"},Ye={class:"card-genres"},Ze={class:"card-genres"},et={class:"d-flex justify-center align-center card-bio"},tt=Q({__name:"InnerCardStack",props:{card:{type:Object,required:!0},showBio:{type:Boolean,default:!1}},setup(s){ue();const M=s,u=ie().user,l=q(()=>M.card.favoriteRoles||[]),f=q(()=>M.card.favoriteGenres||[]),v=g=>u==null?void 0:u.favoriteRoles.some(h=>h.id==g.id),j=g=>u==null?void 0:u.favoriteGenres.some(h=>h.id==g.id);return(g,h)=>(m(),I("div",We,[w("div",He,[s.card.profileImage?(m(),L(oe,{key:0,draggable:"false",src:s.card.profileImage,cover:"",alt:"Imagem",class:"card-img"},null,8,["src"])):A("",!0),w("p",Je,z(s.card.name),1),w("p",Ke,z(s.card.location.address),1),w("div",Ye,[(m(!0),I(O,null,ae(k(l),(a,r)=>(m(),I("span",{key:r,class:ne(["genre-tag border mb-2 ",{"is-favorite":v(a)}])},z(a.name),3))),128))]),w("div",Ze,[(m(!0),I(O,null,ae(k(f),(a,r)=>(m(),I("span",{key:r,class:ne(["genre-tag border mb-2 ",{"is-favorite":j(a)}])},z(a.name),3))),128))])]),e(le,null,{default:t(()=>[s.showBio?A("",!0):(m(),L(R,{key:0,"no-gutters":"",class:"justify-center"},{default:t(()=>[e(K,{class:"my-3",size:"25"},{default:t(()=>h[0]||(h[0]=[P("mdi-chevron-down")])),_:1})]),_:1}))]),_:1}),e(le,null,{default:t(()=>[s.showBio?(m(),L(R,{key:0,"no-gutters":"",class:"justify-center"},{default:t(()=>[w("div",et,z(s.card.bio),1)]),_:1})):A("",!0)]),_:1})]))}}),st=ce(tt,[["__scopeId","data-v-ba9d413f"]]),at={class:"card-stack w-100"},nt={key:0,class:"text-center justify-center align-center d-flex"},ot=["onMousedown","onTouchstart"],lt={key:0,class:"d-flex w-100 justify-center align-center"},rt=Q({__name:"SwiperStack",emits:["swipe"],setup(s,{emit:M}){const u=ue(),l=ie(),f=he(),v=re(),j=S(u.users),g=S(!1),h=q(()=>{const o=l.user;if(!o)return[];const{latitude:n,longitude:i}=o.location;return j.value.filter(p=>p.id!==o.id).map(p=>{const c=Y(n,i,p.location.latitude,p.location.longitude),C=v.genres.length?p.favoriteGenres.filter(H=>v.genres.some(se=>se.id===H.id)).length:0,y=v.roles.length?p.favoriteRoles.filter(H=>v.roles.some(se=>se.id===H.id)).length:0;return{...p,distance:c,commonGenresCount:C,commonRolesCount:y}}).sort((p,c)=>{const C=p.commonGenresCount+p.commonRolesCount,y=c.commonGenresCount+c.commonRolesCount;return C>0!=y>0?y>0?1:-1:C!==y?y-C:p.distance-c.distance})}),a=S([...h.value]),r=S(!1),x=S(!1);let b=0,d=0,V=!1,_=S();const G=S(),D=S(),F=()=>{g.value=!g.value};function B(o,n){n===0&&(_.value=document.querySelector("#innerCardRef"),V=!0,b=o.type.includes("touch")?o.touches[0].clientX:o.clientX,d=b,document.addEventListener("mousemove",T),document.addEventListener("touchmove",T),document.addEventListener("mouseup",$),document.addEventListener("touchend",$))}function T(o){if(!V)return;d=o.type.includes("touch")?o.touches[0].clientX:o.clientX;const n=d-b;_.value.style.transform=`translateX(${n}px) rotate(${n/10}deg)`,_.value.style.opacity=1-Math.abs(n)/300}function $(){if(!V)return;V=!1;const o=d-b;if(Math.abs(o)>20&&d!=b)if(Math.abs(o)>100){const n=o>0?"R":"L";g.value=!1;const i=a.value[0];D.value={direction:n,card:i},n=="R"?l.addLikedUser(i.id):l.rmvLikedUser(i.id),_.value.style.transition="transform 0.3s, opacity 0.3s",_.value.style.transform=`translateX(${o>0?500:-500}px)`,_.value.style.opacity=0,setTimeout(()=>{a.value.shift(),g.value=!1,n=="R"&&ee(i)},200)}else _.value.style.transition="transform 0.3s, opacity 0.3s",_.value.style.transform="translateX(0)",_.value.style.opacity=1;else _.value.style.transition="transform 0.3s, opacity 0.3s",_.value.style.transform="translateX(0)",_.value.style.opacity=1;document.removeEventListener("mousemove",T),document.removeEventListener("touchmove",T),document.removeEventListener("mouseup",$),document.removeEventListener("touchend",$)}function Y(o,n,i,U){const c=(i-o)*Math.PI/180,C=(U-n)*Math.PI/180,y=Math.sin(c/2)*Math.sin(c/2)+Math.cos(o*Math.PI/180)*Math.cos(i*Math.PI/180)*Math.sin(C/2)*Math.sin(C/2);return 6371*(2*Math.atan2(Math.sqrt(y),Math.sqrt(1-y)))}function Z(){a.value=h.value}const ee=o=>{G.value=o,f.createChat(o),r.value=!0},te=()=>{x.value=!0},W=()=>{a.value=h.value,x.value=!1},N=()=>{r.value=!1,G.value=null};return(o,n)=>{const i=Ne,U=Qe,p=st;return m(),I(O,null,[e(X,{onClick:te,variant:"text",class:"filters-btn",icon:""},{default:t(()=>[e(K,{color:"#fff"},{default:t(()=>n[4]||(n[4]=[P("mdi-tune-variant")])),_:1})]),_:1}),w("div",at,[e(pe,{modelValue:k(r),"onUpdate:modelValue":n[0]||(n[0]=c=>J(r)?r.value=c:null),fullscreen:"",persistent:""},{default:t(()=>[k(r)?(m(),L(i,{key:0,"match-info":k(G),onClose:N},null,8,["match-info"])):A("",!0)]),_:1},8,["modelValue"]),e(pe,{modelValue:k(x),"onUpdate:modelValue":n[1]||(n[1]=c=>J(x)?x.value=c:null),persistent:"","content-class":"d-flex justify-center align-center"},{default:t(()=>[e(U,{onClose:W})]),_:1},8,["modelValue"]),e(ye,{"hide-on-leave":""},{default:t(()=>[k(a).length?A("",!0):(m(),I("div",nt,[e(X,{class:"ma-2",size:"120",variant:"tonal",icon:"",color:"purple-darken-4",onClick:n[2]||(n[2]=c=>Z())},{default:t(()=>n[5]||(n[5]=[P("Resetar "),w("br",null,null,-1),P("Stack")])),_:1})]))]),_:1}),(m(!0),I(O,null,ae(k(a),(c,C)=>(m(),I("div",{class:ne(["card",{"card-active":C===0}]),key:c.id,onMousedown:y=>B(y,C),onTouchstart:y=>B(y,C)},[e(le,null,{default:t(()=>[C===0?(m(),I("div",lt,[e(p,{id:"innerCardRef",onClick:n[3]||(n[3]=y=>F()),card:c,"show-bio":k(g)},null,8,["card","show-bio"])])):A("",!0)]),_:2},1024)],42,ot))),128))])],64)}}}),it=ce(rt,[["__scopeId","data-v-7b7e0c0a"]]),Vt=Q({__name:"home",setup(s){return(M,u)=>{const l=it;return m(),L(_e,{fluid:"",class:"fill-height"},{default:t(()=>[e(R,{align:"center",justify:"center",class:"fill-height"},{default:t(()=>[e(E,{cols:"12",sm:"8",md:"6",lg:"4",xl:"3",class:"fill-height justify-center align-center d-flex"},{default:t(()=>[e(l)]),_:1})]),_:1})]),_:1})}}});export{Vt as default};

import{d as Ae,e as Ue,I as Be,V as ze}from"./XoDxpbxd.js";import{a as de,i as me,u as ge,b as ne,j as oe,g as ye,k as he,m as pe,l as xe,d as Ne,e as De,V as ce,c as $e}from"./Cj5hpRoL.js";import{V as _}from"./DGYqV23I.js";import{V as re}from"./DWbw3-_Y.js";import{r as d,j as b,t as ue,v as I,z as l,A as f,K as j,X as z,L as x,B as G,y as Ve,M as ke,N as be,a8 as Me,O as we,a9 as Ce,aa as fe,a6 as H,R as Ie,S as q,U as E,a3 as le,ab as Se,ac as Te,ad as je,o as Pe,e as Ge,ae as Le,af as Ee,a4 as ve,ag as Oe,ah as He,_ as _e,H as qe,V as Ye,x as Ze,Z as Ke,W as ae,n as Qe}from"./D8nT3wGE.js";import{v as We}from"./Co0LjnBq.js";import{V as Xe}from"./BS_f7VKq.js";import{e as Je,a as et}from"./B1QhQ1GT.js";import{u as Fe}from"./nZTSxnrh.js";const tt={key:0,class:"text-truncate d-flex justify-center"},at={__name:"AddressInput",props:{location:{type:Object,default:()=>({})},blocked:{default:!1}},emits:["updateLocation"],setup(e,{emit:U}){var y,w,p;const S=U,m=e,u=d(!1),s=d(((y=m.location)==null?void 0:y.address)||""),n=d(""),h=d(((w=m.location)==null?void 0:w.latitude)||""),P=d(((p=m.location)==null?void 0:p.longitude)||""),F=b(()=>{var c,i;return(c=m.location)!=null&&c.address?`${(i=m.location)==null?void 0:i.address}`:s.value?`${s.value.city}, ${s.value.state}, ${s.value.country}`:""}),V=()=>{u.value=!0,navigator.geolocation?navigator.geolocation.getCurrentPosition(async c=>{h.value=c.coords.latitude.toFixed(6),P.value=c.coords.longitude.toFixed(6),n.value="",await R()},c=>{console.error(c),s.value="",n.value="Não foi possível obter a localização.",u.value=!1},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0}):(n.value="A API de Geolocalização não é suportada pelo seu navegador.",g())};async function R(){if(h.value&&P.value)try{const c=`https://nominatim.openstreetmap.org/reverse?lat=${h.value}&lon=${P.value}&format=json`,k=await(await fetch(c,{headers:{"User-Agent":"FeaterApp/1.0 (matheus.fdealmeida@hotmail.com)"}})).json();k&&k.address?(s.value={city:k.address.city||k.address.town||k.address.village||"Desconhecida",state:k.address.state||"Desconhecido",country:k.address.country||"Desconhecido"},S("updateLocation",{latitude:h.value,longitude:P.value,address:F.value}),n.value=""):(n.value="Endereço não encontrado",g())}catch{n.value="Erro ao obter o endereço",g()}else n.value="Por favor, insira a latitude e longitude",g();u.value=!1}const g=()=>{s.value="",h.value="",P.value="",u.value=!1,S("updateLocation",null)};return(c,i)=>(I(),ue("div",null,[l(Ae,{"hide-on-leave":""},{default:f(()=>[x(s)?z("",!0):(I(),j(de,{key:0,cols:"12",class:"ma-0 pa-0"},{default:f(()=>[l(_,{loading:x(u),onClick:V,block:"",rounded:"xl",color:"purple-darken-3"},{default:f(()=>[l(re,{class:"mr-2"},{default:f(()=>i[0]||(i[0]=[G(" mdi-map-marker ")])),_:1}),i[1]||(i[1]=G(" OBTER LOCALIZAÇÃO"))]),_:1},8,["loading"])]),_:1}))]),_:1}),l(Ue,{"hide-on-leave":""},{default:f(()=>[x(s)?(I(),j(de,{key:0,cols:"12",class:"ma-0 pa-0"},{default:f(()=>[m.blocked?(I(),ue("span",tt,Ve(x(F)),1)):z("",!0),m.blocked?z("",!0):(I(),j(me,{key:1,variant:m.blocked?"plain":"solo",disabled:"",class:"mb-3",rounded:"xl","hide-details":"",value:x(F),dense:""},null,8,["variant","value"])),m.blocked?z("",!0):(I(),j(_,{key:2,onClick:g,block:"",rounded:"xl",variant:"tonal",color:"error"},{default:f(()=>[l(re,{class:"mr-2"},{default:f(()=>i[2]||(i[2]=[G(" mdi-map-marker ")])),_:1}),i[3]||(i[3]=G(" remover localização"))]),_:1}))]),_:1})):z("",!0)]),_:1})]))}},lt=be({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,showSize:{type:[Boolean,Number,String],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(Number(e))},...pe({prependIcon:"$file"}),modelValue:{type:[Array,Object],default:e=>e.multiple?[]:null,validator:e=>Ce(e).every(U=>U!=null&&typeof U=="object")},...he({clearable:!0})},"VFileInput"),nt=ke()({name:"VFileInput",inheritAttrs:!1,props:lt(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,U){let{attrs:S,emit:m,slots:u}=U;const{t:s}=Me(),n=we(e,"modelValue",e.modelValue,t=>Ce(t),t=>!e.multiple&&Array.isArray(t)?t[0]:t),{isFocused:h,focus:P,blur:F}=ge(e),V=b(()=>typeof e.showSize!="boolean"?e.showSize:void 0),R=b(()=>(n.value??[]).reduce((t,o)=>{let{size:r=0}=o;return t+r},0)),g=b(()=>fe(R.value,V.value)),y=b(()=>(n.value??[]).map(t=>{const{name:o="",size:r=0}=t;return e.showSize?`${o} (${fe(r,V.value)})`:o})),w=b(()=>{var o;const t=((o=n.value)==null?void 0:o.length)??0;return e.showSize?s(e.counterSizeString,t,g.value):s(e.counterString,t)}),p=d(),c=d(),i=d(),k=b(()=>h.value||e.active),O=b(()=>["plain","underlined"].includes(e.variant));function L(){var t;i.value!==document.activeElement&&((t=i.value)==null||t.focus()),h.value||P()}function Y(t){var o;(o=i.value)==null||o.click()}function B(t){m("mousedown:control",t)}function N(t){var o;(o=i.value)==null||o.click(),m("click:control",t)}function $(t){t.stopPropagation(),L(),le(()=>{n.value=[],Se(e["onClick:clear"],t)})}function v(t){t.preventDefault()}function a(t){t.preventDefault(),t.dataTransfer&&(n.value=[...t.dataTransfer.files??[]])}return H(n,t=>{(!Array.isArray(t)||!t.length)&&i.value&&(i.value.value="")}),Fe(()=>{const t=!!(u.counter||e.counter),o=!!(t||u.details),[r,A]=Ie(S),{modelValue:Z,...K}=ne.filterProps(e),Q=oe.filterProps(e);return l(ne,q({ref:p,modelValue:e.multiple?n.value:n.value[0],class:["v-file-input",{"v-file-input--chips":!!e.chips,"v-file-input--hide":e.hideInput,"v-input--plain-underlined":O.value},e.class],style:e.style,"onClick:prepend":Y},r,K,{centerAffix:!O.value,focused:h.value}),{...u,default:C=>{let{id:D,isDisabled:M,isDirty:W,isReadonly:X,isValid:ie}=C;return l(oe,q({ref:c,"prepend-icon":e.prependIcon,onMousedown:B,onClick:N,"onClick:clear":$,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},Q,{id:D.value,active:k.value||W.value,dirty:W.value||e.dirty,disabled:M.value,focused:h.value,error:ie.value===!1,onDragover:v,onDrop:a}),{...u,default:se=>{var te;let{props:{class:J,...ee}}=se;return l(E,null,[l("input",q({ref:i,type:"file",readonly:X.value,disabled:M.value,multiple:e.multiple,name:e.name,onClick:T=>{T.stopPropagation(),X.value&&T.preventDefault(),L()},onChange:T=>{if(!T.target)return;const Re=T.target;n.value=[...Re.files??[]]},onFocus:L,onBlur:F},ee,A),null),l("div",{class:J},[!!((te=n.value)!=null&&te.length)&&!e.hideInput&&(u.selection?u.selection({fileNames:y.value,totalBytes:R.value,totalBytesReadable:g.value}):e.chips?y.value.map(T=>l(Je,{key:T,size:"small",text:T},null)):y.value.join(", "))])])}})},details:o?C=>{var D,M;return l(E,null,[(D=u.details)==null?void 0:D.call(u,C),t&&l(E,null,[l("span",null,null),l(xe,{active:!!((M=n.value)!=null&&M.length),value:w.value,disabled:e.disabled},u.counter)])])}:void 0})}),ye({},p,c,i)}}),ot=be({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...pe(),...he()},"VTextarea"),rt=ke()({name:"VTextarea",directives:{Intersect:Be},inheritAttrs:!1,props:ot(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,U){let{attrs:S,emit:m,slots:u}=U;const s=we(e,"modelValue"),{isFocused:n,focus:h,blur:P}=ge(e),F=b(()=>typeof e.counterValue=="function"?e.counterValue(s.value):(s.value||"").toString().length),V=b(()=>{if(S.maxlength)return S.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function R(t,o){var r,A;!e.autofocus||!t||(A=(r=o[0].target)==null?void 0:r.focus)==null||A.call(r)}const g=d(),y=d(),w=Te(""),p=d(),c=b(()=>e.persistentPlaceholder||n.value||e.active);function i(){var t;p.value!==document.activeElement&&((t=p.value)==null||t.focus()),n.value||h()}function k(t){i(),m("click:control",t)}function O(t){m("mousedown:control",t)}function L(t){t.stopPropagation(),i(),le(()=>{s.value="",Se(e["onClick:clear"],t)})}function Y(t){var r;const o=t.target;if(s.value=o.value,(r=e.modelModifiers)!=null&&r.trim){const A=[o.selectionStart,o.selectionEnd];le(()=>{o.selectionStart=A[0],o.selectionEnd=A[1]})}}const B=d(),N=d(Number(e.rows)),$=b(()=>["plain","underlined"].includes(e.variant));je(()=>{e.autoGrow||(N.value=Number(e.rows))});function v(){e.autoGrow&&le(()=>{if(!B.value||!y.value)return;const t=getComputedStyle(B.value),o=getComputedStyle(y.value.$el),r=parseFloat(t.getPropertyValue("--v-field-padding-top"))+parseFloat(t.getPropertyValue("--v-input-padding-top"))+parseFloat(t.getPropertyValue("--v-field-padding-bottom")),A=B.value.scrollHeight,Z=parseFloat(t.lineHeight),K=Math.max(parseFloat(e.rows)*Z+r,parseFloat(o.getPropertyValue("--v-input-control-height"))),Q=parseFloat(e.maxRows)*Z+r||1/0,C=Ee(A??0,K,Q);N.value=Math.floor((C-r)/Z),w.value=Le(C)})}Pe(v),H(s,v),H(()=>e.rows,v),H(()=>e.maxRows,v),H(()=>e.density,v);let a;return H(B,t=>{t?(a=new ResizeObserver(v),a.observe(B.value)):a==null||a.disconnect()}),Ge(()=>{a==null||a.disconnect()}),Fe(()=>{const t=!!(u.counter||e.counter||e.counterValue),o=!!(t||u.details),[r,A]=Ie(S),{modelValue:Z,...K}=ne.filterProps(e),Q=oe.filterProps(e);return l(ne,q({ref:g,modelValue:s.value,"onUpdate:modelValue":C=>s.value=C,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-input--plain-underlined":$.value},e.class],style:e.style},r,K,{centerAffix:N.value===1&&!$.value,focused:n.value}),{...u,default:C=>{let{id:D,isDisabled:M,isDirty:W,isReadonly:X,isValid:ie}=C;return l(oe,q({ref:y,style:{"--v-textarea-control-height":w.value},onClick:k,onMousedown:O,"onClick:clear":L,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},Q,{id:D.value,active:c.value||W.value,centerAffix:N.value===1&&!$.value,dirty:W.value||e.dirty,disabled:M.value,focused:n.value,error:ie.value===!1}),{...u,default:se=>{let{props:{class:J,...ee}}=se;return l(E,null,[e.prefix&&l("span",{class:"v-text-field__prefix"},[e.prefix]),ve(l("textarea",q({ref:p,class:J,value:s.value,onInput:Y,autofocus:e.autofocus,readonly:X.value,disabled:M.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:i,onBlur:P},ee,A),null),[[Oe("intersect"),{handler:R},null,{once:!0}]]),e.autoGrow&&ve(l("textarea",{class:[J,"v-textarea__sizer"],id:`${ee.id}-sizer`,"onUpdate:modelValue":te=>s.value=te,ref:B,readonly:!0,"aria-hidden":"true"},null),[[He,s.value]]),e.suffix&&l("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:o?C=>{var D;return l(E,null,[(D=u.details)==null?void 0:D.call(u,C),t&&l(E,null,[l("span",null,null),l(xe,{active:e.persistentCounter||n.value,value:F.value,max:V.value,disabled:e.disabled},u.counter)])])}:void 0})}),ye({},g,y,p)}}),ut={key:0,class:"text-truncate"},it={__name:"ProfileCard",props:{matchedUser:{type:Object,required:!1}},emits:["close"],setup(e,{emit:U}){var N,$;const S=e,m=U,u=qe(),s=Ye(),n=S.matchedUser||u.user,h=((N=S.matchedUser)==null?void 0:N.id)||(($=u.user)==null?void 0:$.id),P=d(),F=d({id:h}),V=d(),R=d(""),g=d((n==null?void 0:n.name)||""),y=d((n==null?void 0:n.bio)||""),w=d((n==null?void 0:n.favoriteGenres)||[]),p=d((n==null?void 0:n.location)||{}),c=b(()=>R.value||n.profileImage||"https://media.gq.com/photos/6255cb439aa7a6f3a12583da/master/w_1600%2Cc_limit/GQ0522_Future_11.jpg"),i=v=>v.length>3?"Máximo: 3 gêneros":!0;Pe(()=>{});const k=v=>{const a=v.target.files[0];if(!a){R.value="";return}O(a)},O=async v=>{const a=new FileReader;a.onload=t=>{R.value=t.target.result},a.readAsDataURL(v)},L=v=>{p.value=v};function Y(){m("close")}function B(){if(F.value={id:h,location:p.value,name:g.value,bio:y.value,profileImage:c.value,favoriteGenres:w.value},!We(F.value)){alert("Preencha todos os campos");return}s.updateUser(F.value),alert("Perfil salvo com sucesso!"),Qe("/home")}return(v,a)=>{const t=at;return I(),ue(E,null,[e.matchedUser?z("",!0):(I(),j(_,{key:0,color:"deep-purple-darken-1",onClick:B,variant:"tonal",class:"save-btn text-white",rounded:"xl"},{default:f(()=>[l(re,{class:"mr-2",color:"#fff"},{default:f(()=>a[7]||(a[7]=[G("mdi-check")])),_:1}),a[8]||(a[8]=Ze("span",{class:"text-white"}," Salvar ",-1))]),_:1})),l($e,{class:"w-100 rounded-xl"},{default:f(()=>[l(Ne,{class:"pt-3 pl-5 font-weight-light text-h4 mb-2 d-flex align-center"},{default:f(()=>{var o;return[e.matchedUser?(I(),ue("span",ut,Ve(((o=e.matchedUser.name)==null?void 0:o.split(" ")[0])||"Perfil"),1)):z("",!0),l(Xe),e.matchedUser?(I(),j(_,{key:1,onClick:a[0]||(a[0]=r=>Y()),icon:"",rounded:"xl",class:"border",size:"small",variant:"elevated",color:"surface"},{default:f(()=>[l(re,{class:""},{default:f(()=>a[9]||(a[9]=[G(" mdi-chevron-down ")])),_:1})]),_:1})):z("",!0)]}),_:1}),l(De,{class:"pb-5 px-0"},{default:f(()=>{var o;return[l(ce,{"no-gutters":"",class:"mb-4"},{default:f(()=>[l(ze,{src:x(c),contain:"",transition:"slide-y-reverse-transition",rounded:"xl","max-height":"400","min-height":"200"},null,8,["src"])]),_:1}),e.matchedUser?z("",!0):(I(),j(ce,{key:0,"no-gutters":"",class:"mb-4 justify-center"},{default:f(()=>[x(V)?z("",!0):(I(),j(_,{key:0,onClick:a[1]||(a[1]=r=>v.$refs.fileInputRef.click()),block:"",variant:"tonal",rounded:"xl",color:"purple-darken-3"},{default:f(()=>a[10]||(a[10]=[G(" Alterar foto ")])),_:1})),l(_,{onClick:a[2]||(a[2]=()=>{V.value=null,R.value=null}),variant:"tonal",class:Ke({"d-none":!x(V)}),rounded:"xl",color:"error",block:""},{default:f(()=>a[11]||(a[11]=[G("Remover foto")])),_:1},8,["class"]),l(nt,{readonly:!!e.matchedUser,class:"d-none",ref_key:"fileInputRef",ref:P,"hide-details":"",variant:"solo",flat:"",onChange:k,density:"compact",clearable:!1,modelValue:x(V),"onUpdate:modelValue":a[3]||(a[3]=r=>ae(V)?V.value=r:null),accept:"image/*","prepend-icon":""},null,8,["readonly","modelValue"])]),_:1})),l(me,{modelValue:x(g),"onUpdate:modelValue":a[4]||(a[4]=r=>ae(g)?g.value=r:null),readonly:!!e.matchedUser,variant:"solo",label:"Nome",rounded:"xl",class:"mb-3","hide-details":"",outlined:"",dense:""},null,8,["modelValue","readonly"]),l(rt,{label:"Biografia",rounded:"xl",modelValue:x(y),"onUpdate:modelValue":a[5]||(a[5]=r=>ae(y)?y.value=r:null),rules:[r=>r.length<=200||"Máximo: 200 caracteres"],"auto-grow":"",readonly:!!e.matchedUser,variant:"solo",rows:"3",outlined:""},null,8,["modelValue","rules","readonly"]),l(et,{modelValue:x(w),"onUpdate:modelValue":a[6]||(a[6]=r=>ae(w)?w.value=r:null),items:(o=x(s))==null?void 0:o.genres,label:"Gêneros Musicais",multiple:"",rounded:"xl","menu-icon":e.matchedUser?!1:"$dropdown ",readonly:!!e.matchedUser,"return-object":"","item-title":"name","closable-chips":!e.matchedUser,variant:"solo",chips:"",outlined:"",dense:"",rules:[i]},null,8,["modelValue","items","menu-icon","readonly","closable-chips","rules"]),l(t,{onUpdateLocation:L,location:x(p),blocked:!!e.matchedUser},null,8,["location","blocked"])]}),_:1})]),_:1})],64)}}},pt=_e(it,[["__scopeId","data-v-beac4792"]]);export{pt as _};

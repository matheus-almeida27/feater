import{d as R,H as U,I as q,t as m,v as r,z as t,A as s,T as ee,x as u,J as te,K as b,L as h,y as L,B as D,n as se,_ as z,M as F,j as ae,N as I,O as G,P as Q,r as k,Q as ne,R as oe}from"./BYmTsse0.js";import{V as H,a as O}from"./BZMDOEvf.js";import{V as X}from"./CMW7376s.js";import{V as S,a as T}from"./CVKS_9Vr.js";import{V as N,a as P,b as re}from"./qha-gg4k.js";import{V as le}from"./CTyaprLE.js";import{V as ie}from"./BC0C-yfG.js";import{V as ce}from"./D42-uipf.js";import"./DgzgfUse.js";import"./BdsQDm72.js";import"./vR5kcR7Q.js";const ue={class:"match-dialog"},de=R({__name:"MatchDialogContent",props:{matchInfo:{type:Object,default:()=>null}},emits:["close"],setup(i,{emit:w}){var v,_,x;const c=U(),l=q(),f=i;l.chats.find(a=>{var o;return a.participants.includes(Number(f.matchInfo.id))&&a.participants.includes(Number((o=c==null?void 0:c.user)==null?void 0:o.id))});const V=((v=c.user)==null?void 0:v.profileImage)||"",d=w,y=((x=(_=f.matchInfo)==null?void 0:_.name)==null?void 0:x.split(" ")[0])+" também curtiu você!";function p(){const a=l.chats.find(o=>{var g;return o.participants.includes(Number(f.matchInfo.id))&&o.participants.includes(Number((g=c==null?void 0:c.user)==null?void 0:g.id))});d("close"),se(`/messages/${a==null?void 0:a.id}`)}return(a,o)=>(r(),m("div",ue,[t(H,{"fill-height":""},{default:s(()=>[t(X,{variant:"text",rounded:"xl",class:"position-absolute top-0 right-0 mr-3 mt-3",icon:"mdi-close",onClick:o[0]||(o[0]=g=>a.$emit("close"))}),t(S,{align:"center",justify:"center"},{default:s(()=>[t(T,{cols:"12",class:"text-center"},{default:s(()=>[t(ee,{name:"fade"},{default:s(()=>o[1]||(o[1]=[u("div",{class:"match-header"},[u("h2",null,"É um feat!")],-1)])),_:1})]),_:1})]),_:1}),t(S,{align:"center",justify:"center"},{default:s(()=>[t(T,{cols:"12",md:"6",class:"d-flex justify-center"},{default:s(()=>[t(te,{name:"slide-fade",mode:"out-in",tag:"div",class:"avatars"},{default:s(()=>[(r(),b(O,{size:"150",class:"mx-2",key:"userPhoto"},{default:s(()=>[t(N,{contain:"",transition:"slide-x-transition",height:"150",width:"150",src:h(V),alt:"Sua foto"},null,8,["src"])]),_:1})),(r(),b(O,{size:"150",class:"mx-2",key:"matchPhoto"},{default:s(()=>{var g;return[t(N,{contain:"",transition:"slide-x-reverse-transition",height:"150",width:"150",src:(g=i.matchInfo)==null?void 0:g.profileImage,alt:"Foto do match"},null,8,["src"])]}),_:1}))]),_:1})]),_:1})]),_:1}),t(S,{align:"center",justify:"center"},{default:s(()=>[t(T,{cols:"12",class:"text-center"},{default:s(()=>[u("p",{class:"collaboration-text"},L(y)),o[2]||(o[2]=u("p",{class:"collaboration-text"},"Que tal criar uma música juntos?",-1))]),_:1})]),_:1}),t(S,{align:"center",justify:"center"},{default:s(()=>[t(T,{cols:"12",class:"text-center"},{default:s(()=>[t(X,{class:"ma-4 border",style:{color:"#fff",background:"#170015"},variant:"elevated",rounded:"xl",size:"x-large",onClick:p},{default:s(()=>o[3]||(o[3]=[D(" Enviar Mensagem ")])),_:1})]),_:1})]),_:1})]),_:1})]))}}),me=z(de,[["__scopeId","data-v-9303c494"]]),fe={class:"inner-card"},pe={class:"card-content"},ve={class:"card-name"},_e={class:"card-address"},ge={class:"card-genres"},he={key:0,class:"card-bio"},ye=R({__name:"InnerCardStack",props:{card:{type:Object,required:!0},showBio:{type:Boolean,default:!1}},setup(i){F();const w=i,c=ae(()=>w.card.favoriteGenres||[]);return(l,f)=>(r(),m("div",fe,[u("div",pe,[i.card.profileImage?(r(),b(N,{key:0,draggable:"false",cover:"",src:i.card.profileImage,alt:"Imagem",class:"card-img"},null,8,["src"])):I("",!0),u("p",ve,L(i.card.name),1),u("p",_e,L(i.card.location.address),1),u("div",ge,[(r(!0),m(G,null,Q(h(c),(V,d)=>(r(),m("span",{key:d,class:"genre-tag border mb-2"},L(V.nome),1))),128))])]),t(P,null,{default:s(()=>[i.showBio?I("",!0):(r(),b(le,{key:0,size:"20"},{default:s(()=>f[0]||(f[0]=[D("mdi-chevron-down")])),_:1}))]),_:1}),t(P,null,{default:s(()=>[i.showBio?(r(),m("div",he,[u("p",null,L(i.card.bio),1)])):I("",!0)]),_:1})]))}}),xe=z(ye,[["__scopeId","data-v-5be81eda"]]),ke={class:"card-stack w-100"},be={key:0,class:"text-center justify-center align-center d-flex"},Ve=["onMousedown","onTouchstart"],Ce=R({__name:"SwiperStack",emits:["swipe"],setup(i,{emit:w}){const c=F(),l=U(),f=q(),V=k(c.users),d=k(!1),y=k([...V.value.filter(n=>{var e;return n.id!==((e=l==null?void 0:l.user)==null?void 0:e.id)})]),p=k(!1);let v=0,_=0,x=!1,a=k();const o=k(),g=k(),J=()=>{d.value=!d.value};function A(n,e){e===0&&(a.value=document.querySelector("#innerCardRef"),x=!0,v=n.type.includes("touch")?n.touches[0].clientX:n.clientX,_=v,document.addEventListener("mousemove",j),document.addEventListener("touchmove",j),document.addEventListener("mouseup",B),document.addEventListener("touchend",B))}function j(n){if(!x)return;_=n.type.includes("touch")?n.touches[0].clientX:n.clientX;const e=_-v;a.value.style.transform=`translateX(${e}px) rotate(${e/10}deg)`,a.value.style.opacity=1-Math.abs(e)/300}function B(){if(!x)return;x=!1;const n=_-v;if(Math.abs(n)>20&&_!=v)if(Math.abs(n)>100){const e=n>0?"R":"L";d.value=!1;const C=y.value[0];g.value={direction:e,card:C},e=="R"?l.addLikedUser(C.id):l.rmvLikedUser(C.id),a.value.style.transition="transform 0.3s, opacity 0.3s",a.value.style.transform=`translateX(${n>0?500:-500}px)`,a.value.style.opacity=0,setTimeout(()=>{y.value.shift(),d.value=!1,e=="R"&&W(C)},200)}else a.value.style.transition="transform 0.3s, opacity 0.3s",a.value.style.transform="translateX(0)",a.value.style.opacity=1;else a.value.style.transition="transform 0.3s, opacity 0.3s",a.value.style.transform="translateX(0)",a.value.style.opacity=1;document.removeEventListener("mousemove",j),document.removeEventListener("touchmove",j),document.removeEventListener("mouseup",B),document.removeEventListener("touchend",B)}function K(){y.value=[...V.value.filter(n=>{var e;return n.id!==((e=l==null?void 0:l.user)==null?void 0:e.id)})]}const W=n=>{o.value=n,f.createChat(n),p.value=!0},Y=()=>{p.value=!1,o.value=null};return(n,e)=>{const C=me,Z=xe;return r(),m("div",ke,[t(ie,{modelValue:h(p),"onUpdate:modelValue":e[0]||(e[0]=$=>ne(p)?p.value=$:null),fullscreen:"",persistent:""},{default:s(()=>[h(p)?(r(),b(C,{key:0,"match-info":h(o),onClose:Y},null,8,["match-info"])):I("",!0)]),_:1},8,["modelValue"]),t(re,{"hide-on-leave":""},{default:s(()=>[h(y).length?I("",!0):(r(),m("div",be,[t(X,{class:"ma-2",size:"120",variant:"tonal",icon:"",color:"purple-darken-4",onClick:e[1]||(e[1]=$=>K())},{default:s(()=>e[3]||(e[3]=[D("Resetar "),u("br",null,null,-1),D("Stack")])),_:1})]))]),_:1}),(r(!0),m(G,null,Q(h(y),($,M)=>(r(),m("div",{class:oe(["card",{"card-active":M===0}]),key:$.id,onMousedown:E=>A(E,M),onTouchstart:E=>A(E,M)},[t(ce,null,{default:s(()=>[M===0?(r(),b(Z,{key:0,id:"innerCardRef",onClick:e[2]||(e[2]=E=>J()),card:$,"show-bio":h(d)},null,8,["card","show-bio"])):I("",!0)]),_:2},1024)],42,Ve))),128))])}}}),Ie=z(Ce,[["__scopeId","data-v-de4f5ac4"]]),Xe=R({__name:"home",setup(i){return(w,c)=>{const l=Ie;return r(),b(H,{fluid:"",class:"fill-height"},{default:s(()=>[t(S,{align:"center",justify:"center",class:"fill-height"},{default:s(()=>[t(T,{cols:"12",sm:"8",md:"6",lg:"4",xl:"3",class:"fill-height justify-center align-center d-flex"},{default:s(()=>[t(l)]),_:1})]),_:1})]),_:1})}}});export{Xe as default};

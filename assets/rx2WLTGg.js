import{_ as O}from"./BkztCg_W.js";import{d as $,H,N as K,I as P,r as g,Y as Q,Z as Y,j as Z,o as q,$ as S,t as u,z as a,A as s,O as b,L as n,Q as B,v as m,a0 as G,B as y,y as I,R as J,S as W,P as w,x as v,a1 as X,n as ee,_ as te}from"./BCok099G.js";import{V as ae,a as D}from"./C3fyQtzT.js";import{V as se,a as oe}from"./SwNHmSlq.js";import{V as ne}from"./yZ8APhv5.js";import{V as re,a as ie}from"./B9Xel-pv.js";import{V as le}from"./BMY2PVKp.js";import{V as de}from"./D8fyvIRj.js";import{V as ue,R as me}from"./6zysYG53.js";import{a as M,g as ce}from"./r3v9-sK7.js";import{V as pe}from"./FOABfP9w.js";import"./BBJfbqJ_.js";import"./D_iSKJEx.js";import"./896BTqng.js";import"./Nwmb7aEf.js";import"./CYKQ3gKf.js";import"./B2JW1x1f.js";import"./CBGF881I.js";import"./DxSMGPRL.js";const fe={key:0,class:"message-time"},ge={key:0,class:"typing-indicator received"},ve={class:"input-wrapper"},Ve=$({__name:"[chatId]",setup(_e){const c=H(),R=K(),U=P(),f=g(!1),_=g(!1),N=g(),z=Q(),j=Y(),A=Number(z.params.chatId),h=g(!1),r=U.chats.find(l=>l.id===A);r||j.push("/matches");const d=Z(()=>{var i;const l=(i=c.user)==null?void 0:i.id,e=r==null?void 0:r.participants.find(t=>t!==l);return R.users.find(t=>t.id===e)}),p=g("");let V;function L(l){const e=new Date(l),i={day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"};return e.toLocaleString("pt-BR",i)}function k(){var e;if(!p.value.trim()||!r)return;const l={id:Date.now(),chatId:r.id,sender:((e=c==null?void 0:c.user)==null?void 0:e.id)||0,text:p.value.trim(),timestamp:new Date().toISOString()};r.messages.push(l),p.value="",setTimeout(()=>{h.value=!0,setTimeout(()=>{h.value=!1,setTimeout(()=>{var o;const i=["Sim, concordo!","Beleza, bora f1 então!","Claro, bora!","Com certeza meu mano","vambora cpx!","Vamos lá!"],t={id:Date.now()+1,chatId:r.id,sender:((o=d.value)==null?void 0:o.id)||0,text:i[Math.floor(Math.random()*i.length)],timestamp:new Date().toISOString()};r.messages.push(t)},1e3),x()},3e3)},1e3),x()}function x(){S(()=>{V&&V.scrollTo(0,V.scrollHeight)})}function E(){d.value&&(N.value=d.value.id,f.value=!0)}function F(){ee("/messages")}return q(()=>{S(()=>{V=document.getElementById("message_container"),x()})}),(l,e)=>{const i=O;return m(),u(B,null,[a(se,{dark:"",app:"",flat:"",style:{background:"transparent",backdropFilter:"blur(5px)"}},{default:s(()=>[a(de,{icon:"",size:"large",onClick:F},{default:s(()=>[a(ue,null,{default:s(()=>e[4]||(e[4]=[y("mdi-arrow-left")])),_:1})]),_:1}),G((m(),u("div",{onClick:E,class:"d-flex w-100 h-100 align-center cursor-pointer rounde-pill"},[a(ie,{size:"40",class:"ml-0 mr-3"},{default:s(()=>{var t,o;return[a(ae,{contain:"",src:((t=n(d))==null?void 0:t.profileImage)||"",alt:(o=n(d))==null?void 0:o.name},null,8,["src","alt"])]}),_:1}),a(oe,{class:"font-weight-light"},{default:s(()=>{var t;return[y(I(((t=n(d))==null?void 0:t.name)||"Chat"),1)]}),_:1})])),[[me,!0]])]),_:1}),a(ne,{modelValue:n(f),"onUpdate:modelValue":e[1]||(e[1]=t=>b(f)?f.value=t:null),transition:"dialog-bottom-transition","content-class":"bg-surface d-flex justify-center align-center",class:"d-flex justify-center align-center",fullscreen:""},{default:s(()=>[a(M,{cols:"12",sm:"7",md:"6",lg:"4",xl:"3",class:"d-flex justify-center align-center ma-0 pa-0"},{default:s(()=>[a(i,{matchedUser:n(d),onClose:e[0]||(e[0]=t=>f.value=!1)},null,8,["matchedUser"])]),_:1})]),_:1},8,["modelValue"]),a(re,{fluid:"",class:"overflow-y-auto d-flex align-center flex-column pa-0 message-container"},{default:s(()=>[a(M,{cols:"12",lg:"6",md:"8",sm:"10",class:"d-flex justify-center"},{default:s(()=>[a(pe,{class:"pa-0 bg-transparent w-100","two-line":""},{default:s(()=>{var t;return[(m(!0),u(B,null,J(((t=n(r))==null?void 0:t.messages)||[],o=>{var C,T;return m(),u("div",{key:o.id,class:W([{sent:o.sender===((C=n(c).user)==null?void 0:C.id),received:o.sender!==((T=n(c).user)==null?void 0:T.id)},"message-item"])},[o.text?(m(),u("div",{key:0,class:"message-text",onClick:e[2]||(e[2]=he=>_.value=!n(_))},[y(I(o.text)+" ",1),a(D,null,{default:s(()=>[n(_)?(m(),u("div",fe,I(L(o.timestamp)),1)):w("",!0)]),_:2},1024)])):w("",!0)],2)}),128)),a(D,null,{default:s(()=>[n(h)?(m(),u("div",ge,e[5]||(e[5]=[v("div",{class:"dots"},[v("span"),v("span"),v("span")],-1)]))):w("",!0)]),_:1})]}),_:1})]),_:1})]),_:1}),a(le,{app:"",class:"glass-effect",height:"auto"},{default:s(()=>[v("div",ve,[a(ce,{modelValue:n(p),"onUpdate:modelValue":e[3]||(e[3]=t=>b(p)?p.value=t:null),placeholder:"Digite sua mensagem...",variant:"solo-filled",density:"comfortable",rounded:"xl",class:"container-input",height:"30","hide-details":"",color:"purple-darken-3",onKeyup:X(k,["enter"]),"append-inner-icon":"mdi-send","onClick:appendInner":k},null,8,["modelValue"])])]),_:1})],64)}}}),Ee=te(Ve,[["__scopeId","data-v-672f97d7"]]);export{Ee as default};
